[{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/ai/services/CopywriterService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'db' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getDoc' is defined but never used.","line":3,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import OpenAI from 'openai';\nimport { db } from '@/lib/firebase';\nimport { doc, getDoc } from 'firebase/firestore';\n\n// Helper to safely get OpenAI instance\nfunction getOpenAIInstance() {\n    const apiKey = process.env.NEXT_PUBLIC_OPENAI_API_KEY || process.env.OPENAI_API_KEY;\n\n    // During build or if missing, return null safely\n    if (!apiKey) return null;\n\n    return new OpenAI({\n        apiKey: apiKey,\n        dangerouslyAllowBrowser: true\n    });\n}\n\ntype MessageType = 'birthday' | 'win_back';\ntype BarberStyle = 'urban' | 'classic' | 'modern';\n\ninterface GenerateOptions {\n    type: MessageType;\n    customerName: string;\n    description?: string; // e.g. \"Last cut was 40 days ago, style: Barba Lenhador\"\n    barberStyle: BarberStyle;\n}\n\nexport const CopywriterService = {\n    generateMessage: async ({ type, customerName, description, barberStyle }: GenerateOptions): Promise<string> => {\n        try {\n            const openai = getOpenAIInstance();\n\n            // Static Fallback if no key is present (Safety First)\n            if (!openai) {\n                console.warn('[CopywriterService] No OpenAI API Key found. Using fallback.');\n                return getFallbackMessage(type, customerName);\n            }\n\n            const systemPrompt = `Voc√™ √© um assistente de barbearia com estilo \"${barberStyle}\".\n            \n            Diretrizes de Estilo:\n            - Classic: Formal, elegante, uso de \"Prezado\", \"estimado\", foco em tradi√ß√£o e cavalheirismo.\n            - Urban: Descolado, uso de g√≠rias locais (br), direto, energ√©tico. \"E a√≠\", \"Mano\", \"Tmj\".\n            - Modern: Minimalista, clean, educado mas casual. Foco em est√©tica e bem-estar.\n\n            Objetivo: Criar uma mensagem curta de Whatsapp (max 2 frases).\n            Seja amig√°vel e persuasive.`;\n\n            const userPrompt = `Cliente: ${customerName}.\n            Contexto: ${type === 'birthday' ? 'Anivers√°rio do cliente.' : 'Cliente sumido (Win-back).'}\n            Detalhes: ${description || ''}\n            \n            Gere a mensagem:`;\n\n            const response = await openai.chat.completions.create({\n                model: 'gpt-4o-mini',\n                messages: [\n                    { role: 'system', content: systemPrompt },\n                    { role: 'user', content: userPrompt }\n                ],\n                max_tokens: 150,\n                temperature: 0.7,\n            });\n\n            const message = response.choices[0]?.message?.content?.trim();\n            return message || getFallbackMessage(type, customerName);\n\n        } catch (error) {\n            console.error('[CopywriterService] AI Generation failed:', error);\n            return getFallbackMessage(type, customerName);\n        }\n    }\n};\n\nfunction getFallbackMessage(type: MessageType, name: string): string {\n    if (type === 'birthday') {\n        return `Parab√©ns ${name}! A barbearia te deseja mta felicidades. Venha comemorar com um trato no visual! üéÇ`;\n    }\n    return `Ol√° ${name}, faz tempo que n√£o te vemos! Que tal agendar seu pr√≥ximo corte? Estamos com saudades! ‚úÇÔ∏è`;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/auth/context/AuthContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/barbershops/services/serverBarbershopService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/booking/components/BookingModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/booking/components/BookingModal.tsx:50:13\n  48 |     useEffect(() => {\n  49 |         if (isOpen) {\n> 50 |             setStep(1);\n     |             ^^^^^^^ Avoid calling setState() directly within an effect\n  51 |             setSuccess(false);\n  52 |             setSelectedServices([]);\n  53 |             setSelectedBarber(null);","line":50,"column":13,"nodeType":null,"endLine":50,"endColumn":20},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/booking/components/BookingModal.tsx:82:13\n  80 |         if (selectedDate && selectedServices.length > 0) {\n  81 |             const totalDuration = selectedServices.reduce((acc, s) => acc + parseInt(s.duration.replace(/\\D/g, '') || '30'), 0);\n> 82 |             setIsLoadingSlots(true);\n     |             ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  83 |             fetchAvailableSlots(selectedDate, barbershopId, totalDuration.toString())\n  84 |                 .then(setAvailableTimes)\n  85 |                 .finally(() => setIsLoadingSlots(false));","line":82,"column":13,"nodeType":null,"endLine":82,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ignore' is defined but never used.","line":144,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":144,"endColumn":28},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":309,"column":65,"nodeType":"JSXOpeningElement","endLine":309,"endColumn":151},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":408,"column":73,"nodeType":"JSXOpeningElement","endLine":408,"endColumn":161},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":479,"column":109,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":479,"endColumn":112,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33148,33151],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33148,33151],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":491,"column":105,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":491,"endColumn":108,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[34344,34347],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[34344,34347],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAvailableSlots'. Either include it or remove the dependency array.","line":88,"column":8,"nodeType":"ArrayExpression","endLine":88,"endColumn":54,"suggestions":[{"desc":"Update the dependencies array to be: [selectedDate, selectedServices, barbershopId, fetchAvailableSlots]","fix":{"range":[3886,3932],"text":"[selectedDate, selectedServices, barbershopId, fetchAvailableSlots]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":4,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'; // Rebuild\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Calendar as CalendarIcon, Clock, Check, ChevronRight, ChevronLeft, User, ShoppingBag } from 'lucide-react';\nimport { Service } from '@/types/barbershop';\nimport { useBooking } from '@/features/booking/hooks/useBooking';\nimport { useLoyalty } from '@/features/loyalty/hooks/useLoyalty';\nimport { db } from '@/lib/firebase';\nimport { collection, getDocs, query, where } from 'firebase/firestore';\nimport { Barber } from '@/features/team/types';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { DayPicker } from 'react-day-picker';\nimport 'react-day-picker/dist/style.css';\nimport { clsx } from 'clsx';\nimport { Product } from '@/features/products/types';\n\ninterface BookingModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    barbershopId: string;\n    services: Service[];\n    themeColor: string;\n}\n\nexport default function BookingModal({ isOpen, onClose, barbershopId, services, themeColor }: BookingModalProps) {\n    const [step, setStep] = useState(1);\n    const [selectedServices, setSelectedServices] = useState<Service[]>([]);\n    const [selectedBarber, setSelectedBarber] = useState<Barber | null>(null);\n    const [selectedDate, setSelectedDate] = useState<Date | undefined>(undefined);\n    const [selectedTime, setSelectedTime] = useState<string | null>(null);\n    const [customerName, setCustomerName] = useState('');\n    const [customerPhone, setCustomerPhone] = useState('');\n    const [barbers, setBarbers] = useState<Barber[]>([]);\n\n    // Products State\n    const [products, setProducts] = useState<Product[]>([]);\n    const [selectedProducts, setSelectedProducts] = useState<Product[]>([]);\n\n    const [success, setSuccess] = useState(false);\n    const { createAppointment, fetchAvailableSlots, loading } = useBooking();\n    const { addPoints } = useLoyalty(barbershopId);\n    const [availableTimes, setAvailableTimes] = useState<string[]>([]);\n    const [isLoadingSlots, setIsLoadingSlots] = useState(false);\n\n    // Reset state when modal opens/closes\n    useEffect(() => {\n        if (isOpen) {\n            setStep(1);\n            setSuccess(false);\n            setSelectedServices([]);\n            setSelectedBarber(null);\n            setSelectedDate(undefined);\n            setSelectedTime(null);\n            setCustomerName('');\n            setCustomerPhone('');\n            setSelectedProducts([]);\n\n            const fetchBarbers = async () => {\n                const q = query(collection(db, 'barbershops', barbershopId, 'professionals'), where('active', '==', true));\n                const snapshot = await getDocs(q);\n                const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Barber[];\n                setBarbers(data);\n            };\n            fetchBarbers();\n\n            const fetchProducts = async () => {\n                const q = query(collection(db, 'products'), where('barbershopId', '==', barbershopId), where('active', '==', true));\n                const snapshot = await getDocs(q);\n                const data = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })) as Product[];\n                setProducts(data);\n            };\n            fetchProducts();\n        }\n    }, [isOpen, barbershopId]);\n\n    // Fetch times when date is selected\n    useEffect(() => {\n        if (selectedDate && selectedServices.length > 0) {\n            const totalDuration = selectedServices.reduce((acc, s) => acc + parseInt(s.duration.replace(/\\D/g, '') || '30'), 0);\n            setIsLoadingSlots(true);\n            fetchAvailableSlots(selectedDate, barbershopId, totalDuration.toString())\n                .then(setAvailableTimes)\n                .finally(() => setIsLoadingSlots(false));\n            setSelectedTime(null);\n        }\n    }, [selectedDate, selectedServices, barbershopId]); // eslint-disable-line\n\n    const toggleProduct = (product: Product) => {\n        setSelectedProducts(prev => {\n            const exists = prev.find(p => p.id === product.id);\n            if (exists) return prev.filter(p => p.id !== product.id);\n            return [...prev, product];\n        });\n    };\n\n    const toggleService = (service: Service) => {\n        setSelectedServices(prev => {\n            const exists = prev.find(s => s.name === service.name);\n            if (exists) return prev.filter(s => s.name !== service.name);\n            return [...prev, service];\n        });\n    };\n\n    const handleNext = () => {\n        if (step === 1 && selectedServices.length > 0) setStep(2);\n        if (step === 2 && selectedBarber) setStep(3);\n        if (step === 3 && selectedDate && selectedTime) {\n            if (products.length === 0) setStep(5);\n            else setStep(4);\n        }\n        if (step === 4) setStep(5);\n    };\n\n    const handleBack = () => {\n        if (step > 1) {\n            if (step === 5 && products.length === 0) setStep(3);\n            else setStep(step - 1);\n        }\n    };\n\n    const handleConfirm = async () => {\n        if (selectedServices.length === 0 || !selectedBarber || !selectedDate || !selectedTime || !customerName || !customerPhone) return;\n\n        try {\n            await createAppointment({\n                barbershopId,\n                services: selectedServices,\n                date: selectedDate,\n                time: selectedTime,\n                name: customerName,\n                phone: customerPhone,\n                barberId: selectedBarber.id,\n                barberName: selectedBarber.name,\n                products: selectedProducts\n            });\n\n            try {\n                // Loyalty: Add point per service or just 1? Assuming 1 per visit, but code was adding 1.\n                // Optionally add point per service: await addPoints(selectedServices.length, ...)\n                // Let's keep it simple: 1 visit = 1 point, or maybe 1 point.\n                await addPoints(1, `Agendamento: ${selectedServices.map(s => s.name).join(', ')}`);\n            } catch (ignore) {\n                console.log(\"Loyalty points skipped\");\n            }\n\n            setSuccess(true);\n        } catch (err) {\n            alert(err instanceof Error ? err.message : 'Erro ao agendar');\n        }\n    };\n\n    const servicesTotal = selectedServices.reduce((acc, s) => acc + s.price, 0);\n    const totalPrice = servicesTotal + selectedProducts.reduce((acc, p) => acc + p.price, 0);\n\n    if (!isOpen) return null;\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50\"\n                    />\n\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                        className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\"\n                    >\n                        <div className=\"bg-white dark:bg-zinc-900 w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden pointer-events-auto flex flex-col max-h-[90vh]\">\n\n                            {/* Header */}\n                            <div className=\"p-4 border-b border-gray-100 dark:border-zinc-800 flex justify-between items-center bg-white dark:bg-zinc-900 sticky top-0 z-10\">\n                                <h3 className=\"font-bold text-lg text-gray-900 dark:text-white\">\n                                    {success ? 'Agendamento Confirmado' : 'Agendar Hor√°rio'}\n                                </h3>\n                                <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-full transition-colors\">\n                                    <X size={20} className=\"text-gray-500\" />\n                                </button>\n                            </div>\n\n                            {/* Body */}\n                            <div className=\"p-6 overflow-y-auto flex-1\">\n                                {success ? (\n                                    <div className=\"flex flex-col items-center justify-center py-10 text-center space-y-4\">\n                                        <motion.div\n                                            initial={{ scale: 0 }}\n                                            animate={{ scale: 1 }}\n                                            className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4\"\n                                        >\n                                            <Check size={40} strokeWidth={3} />\n                                        </motion.div>\n                                        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Tudo Certo!</h2>\n                                        <p className=\"text-gray-500 dark:text-gray-400\">\n                                            Seu agendamento foi realizado com sucesso.\n                                            <br />\n                                            Te esperamos dia {selectedDate && format(selectedDate, \"dd 'de' MMMM\", { locale: ptBR })} √†s {selectedTime}.\n                                        </p>\n                                        <button\n                                            onClick={onClose}\n                                            className=\"mt-6 px-8 py-3 rounded-xl font-bold text-white transition-transform hover:scale-105\"\n                                            style={{ backgroundColor: themeColor }}\n                                        >\n                                            Fechar\n                                        </button>\n                                    </div>\n                                ) : (\n                                    <>\n                                        {/* Progress Bar */}\n                                        <div className=\"flex gap-2 mb-8\">\n                                            {[1, 2, 3, 4, 5].map((i) => {\n                                                if (products.length === 0 && i === 4) return null; // Skip Upsell dot if no products\n                                                if (products.length === 0 && i === 5) {\n                                                    // Render step 5 as the 4th dot if no products\n                                                    return (\n                                                        <div\n                                                            key={i}\n                                                            className={clsx(\n                                                                \"h-1.5 flex-1 rounded-full transition-colors duration-300\",\n                                                                5 <= step ? \"bg-black dark:bg-white\" : \"bg-gray-200 dark:bg-zinc-800\"\n                                                            )}\n                                                            style={{ backgroundColor: 5 <= step ? themeColor : undefined }}\n                                                        />\n                                                    )\n                                                }\n                                                const totalSteps = products.length > 0 ? 5 : 4;\n                                                if (i > totalSteps) return null;\n\n                                                let isActive = i <= step;\n                                                // Correction if on step 5 but products length 0 (should correspond to 4th dot)\n                                                if (products.length === 0 && step === 5) isActive = true;\n\n                                                return (\n                                                    <div\n                                                        key={i}\n                                                        className={clsx(\n                                                            \"h-1.5 flex-1 rounded-full transition-colors duration-300\",\n                                                            isActive ? \"bg-black dark:bg-white\" : \"bg-gray-200 dark:bg-zinc-800\"\n                                                        )}\n                                                        style={{ backgroundColor: isActive ? themeColor : undefined }}\n                                                    />\n                                                )\n                                            })}\n                                        </div>\n\n                                        {/* Step 1: Services */}\n                                        {step === 1 && (\n                                            <div className=\"space-y-3\">\n                                                <h4 className=\"font-medium text-gray-500 dark:text-gray-400 mb-4\">Selecione os servi√ßos</h4>\n                                                {services.map((service) => {\n                                                    const isSelected = selectedServices.some(s => s.name === service.name);\n                                                    return (\n                                                        <button\n                                                            key={service.name}\n                                                            onClick={() => toggleService(service)}\n                                                            className={clsx(\n                                                                \"w-full p-4 rounded-xl border text-left transition-all hover:border-gray-400 dark:hover:border-zinc-600 flex justify-between items-center group\",\n                                                                isSelected\n                                                                    ? \"border-2 border-black dark:border-white bg-gray-50 dark:bg-zinc-800/50\"\n                                                                    : \"border-gray-200 dark:border-zinc-800\"\n                                                            )}\n                                                            style={{ borderColor: isSelected ? themeColor : undefined }}\n                                                        >\n                                                            <div>\n                                                                <p className=\"font-bold text-gray-900 dark:text-white\">{service.name}</p>\n                                                                <p className=\"text-sm text-gray-500\">{service.duration}</p>\n                                                            </div>\n                                                            <div className=\"flex items-center gap-3\">\n                                                                <span className=\"font-medium text-gray-900 dark:text-white\">\n                                                                    R$ {service.price.toFixed(2)}\n                                                                </span>\n                                                                {isSelected && (\n                                                                    <div className=\"bg-black text-white rounded-full p-1\" style={{ backgroundColor: themeColor }}>\n                                                                        <Check size={14} />\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        </button>\n                                                    );\n                                                })}\n                                            </div>\n                                        )}\n\n                                        {/* Step 2: Barber */}\n                                        {step === 2 && (\n                                            <div className=\"space-y-3\">\n                                                <h4 className=\"font-medium text-gray-500 dark:text-gray-400 mb-4\">Escolha o Profissional</h4>\n                                                {barbers.map((barber) => (\n                                                    <button\n                                                        key={barber.id}\n                                                        onClick={() => setSelectedBarber(barber)}\n                                                        className={clsx(\n                                                            \"w-full p-4 rounded-xl border text-left transition-all hover:border-gray-400 dark:hover:border-zinc-600 flex items-center gap-4 group\",\n                                                            selectedBarber?.id === barber.id\n                                                                ? \"border-2 border-black dark:border-white bg-gray-50 dark:bg-zinc-800/50\"\n                                                                : \"border-gray-200 dark:border-zinc-800\"\n                                                        )}\n                                                        style={{ borderColor: selectedBarber?.id === barber.id ? themeColor : undefined }}\n                                                    >\n                                                        <div className=\"h-12 w-12 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center flex-shrink-0\">\n                                                            {barber.photoUrl ? (\n                                                                <img src={barber.photoUrl} alt={barber.name} className=\"h-full w-full object-cover\" />\n                                                            ) : (\n                                                                <User size={24} className=\"text-gray-400\" />\n                                                            )}\n                                                        </div>\n                                                        <div>\n                                                            <p className=\"font-bold text-gray-900 dark:text-white\">{barber.name}</p>\n                                                            <p className=\"text-sm text-gray-500\">{barber.specialty}</p>\n                                                        </div>\n                                                    </button>\n                                                ))}\n                                            </div>\n                                        )}\n\n                                        {/* Step 3: Date */}\n                                        {step === 3 && (\n                                            <div className=\"space-y-6\">\n                                                <div className=\"flex justify-center\">\n                                                    <DayPicker\n                                                        mode=\"single\"\n                                                        selected={selectedDate}\n                                                        onSelect={setSelectedDate}\n                                                        locale={ptBR}\n                                                        disabled={{ before: new Date() }}\n                                                        modifiersStyles={{\n                                                            selected: { backgroundColor: themeColor, color: 'white' }\n                                                        }}\n                                                        className=\"border border-gray-200 dark:border-zinc-800 rounded-xl p-4\"\n                                                    />\n                                                </div>\n\n                                                {selectedDate && (\n                                                    <div className=\"animate-in fade-in slide-in-from-top-4\">\n                                                        <h4 className=\"font-medium text-gray-500 dark:text-gray-400 mb-3 flex items-center gap-2\">\n                                                            <Clock size={16} />\n                                                            Hor√°rios dispon√≠veis\n                                                        </h4>\n                                                        {isLoadingSlots ? (\n                                                            <div className=\"grid grid-cols-4 gap-2\">\n                                                                {[1, 2, 3, 4, 5, 6, 7, 8].map((i) => (\n                                                                    <div key={i} className=\"h-10 bg-gray-100 dark:bg-zinc-800 rounded-lg animate-pulse\" />\n                                                                ))}\n                                                            </div>\n                                                        ) : availableTimes.length > 0 ? (\n                                                            <div className=\"grid grid-cols-4 gap-2\">\n                                                                {availableTimes.map((time) => (\n                                                                    <button\n                                                                        key={time}\n                                                                        onClick={() => setSelectedTime(time)}\n                                                                        className={clsx(\n                                                                            \"py-2 px-3 rounded-lg text-sm font-medium transition-colors border\",\n                                                                            selectedTime === time\n                                                                                ? \"bg-black text-white border-transparent\"\n                                                                                : \"border-gray-200 dark:border-zinc-800 hover:border-gray-400 dark:hover:border-zinc-600 text-gray-700 dark:text-gray-300\"\n                                                                        )}\n                                                                        style={{ backgroundColor: selectedTime === time ? themeColor : undefined }}\n                                                                    >\n                                                                        {time}\n                                                                    </button>\n                                                                ))}\n                                                            </div>\n                                                        ) : (\n                                                            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-zinc-800/50 rounded-xl border border-dashed border-gray-200 dark:border-zinc-700\">\n                                                                <p>Sem hor√°rios livres para este dia.</p>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                )}\n                                            </div>\n                                        )}\n\n                                        {/* Step 4: Upsell (Products) */}\n                                        {step === 4 && (\n                                            <div className=\"space-y-4\">\n                                                <div className=\"flex items-center justify-between mb-4\">\n                                                    <h4 className=\"font-bold text-lg text-gray-900 dark:text-white\">Algo mais?</h4>\n                                                    <span className=\"text-sm text-gray-500\">Adicione produtos ao seu agendamento</span>\n                                                </div>\n\n                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                    {products.map(product => {\n                                                        const isSelected = selectedProducts.find(p => p.id === product.id);\n                                                        return (\n                                                            <div\n                                                                key={product.id}\n                                                                onClick={() => toggleProduct(product)}\n                                                                className={clsx(\n                                                                    \"border rounded-xl p-3 cursor-pointer transition-all hover:border-gray-400 dark:hover:border-zinc-600 relative overflow-hidden group\",\n                                                                    isSelected ? \"border-2 border-black dark:border-white bg-gray-50 dark:bg-zinc-800\" : \"border-gray-200 dark:border-zinc-800\"\n                                                                )}\n                                                                style={{ borderColor: isSelected ? themeColor : undefined }}\n                                                            >\n                                                                {isSelected && (\n                                                                    <div className=\"absolute top-2 right-2 bg-black text-white rounded-full p-0.5\" style={{ backgroundColor: themeColor }}>\n                                                                        <Check size={12} />\n                                                                    </div>\n                                                                )}\n                                                                <div className=\"h-24 bg-gray-100 rounded-lg mb-3 overflow-hidden flex items-center justify-center\">\n                                                                    {product.imageUrl ? (\n                                                                        <img src={product.imageUrl} alt={product.name} className=\"w-full h-full object-cover\" />\n                                                                    ) : (\n                                                                        <ShoppingBag className=\"text-gray-400\" />\n                                                                    )}\n                                                                </div>\n                                                                <h5 className=\"font-bold text-sm text-gray-900 dark:text-white truncate\">{product.name}</h5>\n                                                                <p className=\"text-gray-500 text-sm\">R$ {product.price.toFixed(2)}</p>\n                                                            </div>\n                                                        )\n                                                    })}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {/* Step 5: Review */}\n                                        {step === 5 && (\n                                            <div className=\"space-y-4\">\n                                                <div className=\"bg-gray-50 dark:bg-zinc-800/50 p-4 rounded-xl space-y-3 mb-6\">\n                                                    <div className=\"space-y-2 border-b border-gray-200 dark:border-zinc-700 pb-3\">\n                                                        <div className=\"flex justify-between text-sm\">\n                                                            <span className=\"text-gray-500\">Servi√ßos ({selectedServices.length})</span>\n                                                            <div className=\"text-right\">\n                                                                {selectedServices.map(s => (\n                                                                    <div key={s.name} className=\"font-medium text-gray-900 dark:text-white\">\n                                                                        {s.name}\n                                                                    </div>\n                                                                ))}\n                                                            </div>\n                                                        </div>\n                                                        <div className=\"flex justify-between text-sm\">\n                                                            <span className=\"text-gray-500\">Profissional</span>\n                                                            <span className=\"font-medium text-gray-900 dark:text-white\">{selectedBarber?.name}</span>\n                                                        </div>\n                                                        <div className=\"flex justify-between text-sm\">\n                                                            <span className=\"text-gray-500\">Data e Hora</span>\n                                                            <span className=\"font-medium text-gray-900 dark:text-white\">\n                                                                {selectedDate && format(selectedDate, \"dd/MM\", { locale: ptBR })} √†s {selectedTime}\n                                                            </span>\n                                                        </div>\n                                                    </div>\n\n                                                    {selectedProducts.length > 0 && (\n                                                        <div className=\"space-y-2 border-b border-gray-200 dark:border-zinc-700 pb-3\">\n                                                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Produtos</span>\n                                                            {selectedProducts.map(p => (\n                                                                <div key={p.id} className=\"flex justify-between text-sm\">\n                                                                    <span className=\"text-gray-500\">{p.name}</span>\n                                                                    <span className=\"font-medium text-gray-900 dark:text-white\">R$ {p.price.toFixed(2)}</span>\n                                                                </div>\n                                                            ))}\n                                                        </div>\n                                                    )}\n\n                                                    <div className=\"flex justify-between text-base pt-1\">\n                                                        <span className=\"font-bold text-gray-900 dark:text-white\">Total</span>\n                                                        <span className=\"font-bold text-gray-900 dark:text-white text-lg\">\n                                                            R$ {totalPrice.toFixed(2)}\n                                                        </span>\n                                                    </div>\n                                                </div>\n\n                                                <div className=\"space-y-4\">\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Seu Nome</label>\n                                                        <div className=\"relative\">\n                                                            <User className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={18} />\n                                                            <input\n                                                                type=\"text\"\n                                                                value={customerName}\n                                                                onChange={(e) => setCustomerName(e.target.value)}\n                                                                className=\"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-offset-0 outline-none transition-all\"\n                                                                style={{ '--tw-ring-color': themeColor } as any}\n                                                                placeholder=\"Ex: Jo√£o Silva\"\n                                                            />\n                                                        </div>\n                                                    </div>\n                                                    <div>\n                                                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Seu WhatsApp</label>\n                                                        <input\n                                                            type=\"tel\"\n                                                            value={customerPhone}\n                                                            onChange={(e) => setCustomerPhone(e.target.value)}\n                                                            className=\"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-offset-0 outline-none transition-all\"\n                                                            style={{ '--tw-ring-color': themeColor } as any}\n                                                            placeholder=\"(00) 00000-0000\"\n                                                        />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </>\n                                )}\n                            </div>\n\n                            {/* Footer */}\n                            {!success && (\n                                <div className=\"p-4 border-t border-gray-100 dark:border-zinc-800 bg-gray-50 dark:bg-zinc-900/50 flex justify-between\">\n                                    <button\n                                        onClick={handleBack}\n                                        disabled={step === 1}\n                                        className={clsx(\n                                            \"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2\",\n                                            step === 1 ? \"text-gray-300 cursor-not-allowed\" : \"text-gray-600 hover:bg-gray-200 dark:text-gray-400 dark:hover:bg-zinc-800\"\n                                        )}\n                                    >\n                                        <ChevronLeft size={18} />\n                                        Voltar\n                                    </button>\n\n                                    {step < 5 ? (\n                                        <button\n                                            onClick={handleNext}\n                                            disabled={\n                                                (step === 1 && selectedServices.length === 0) ||\n                                                (step === 2 && !selectedBarber) ||\n                                                (step === 3 && (!selectedDate || !selectedTime))\n                                            }\n                                            className=\"px-6 py-2 rounded-lg font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                                            style={{ backgroundColor: themeColor }}\n                                        >\n                                            {step === 3 && products.length === 0 ? 'Revisar' : (step === 4 ? 'Revisar' : 'Pr√≥ximo')}\n                                            <ChevronRight size={18} />\n                                        </button>\n                                    ) : (\n                                        <button\n                                            onClick={handleConfirm}\n                                            disabled={loading || !customerName || !customerPhone}\n                                            className=\"px-8 py-2 rounded-lg font-bold text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-lg hover:shadow-xl hover:-translate-y-0.5\"\n                                            style={{ backgroundColor: themeColor }}\n                                        >\n                                            {loading ? (\n                                                <>\n                                                    <Clock className=\"animate-spin\" size={18} />\n                                                    Confirmando...\n                                                </>\n                                            ) : (\n                                                <>\n                                                    Confirmar Agendamento\n                                                    <Check size={18} />\n                                                </>\n                                            )}\n                                        </button>\n                                    )}\n                                </div>\n                            )}\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/booking/hooks/useBooking.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/booking/utils/getAvailableSlots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/builder/components/BuilderCanvas.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":83,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":83,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2856,2859],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2856,2859],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport {\n    DndContext,\n    closestCenter,\n    KeyboardSensor,\n    PointerSensor,\n    useSensor,\n    useSensors,\n    DragOverlay,\n    DragEndEvent,\n    TouchSensor,\n} from '@dnd-kit/core';\nimport {\n    arrayMove,\n    SortableContext,\n    sortableKeyboardCoordinates,\n    verticalListSortingStrategy,\n} from '@dnd-kit/sortable';\nimport { useBuilderStore, BuilderSection } from '@/features/builder/store/useBuilderStore';\nimport { SortableSection } from './SortableSection';\n\n// Placeholder components for sections - in a real app these would be your actual template components\nconst SectionPlaceholder = ({ title, type }: { title?: string, type: string }) => (\n    <div className=\"p-8 border border-dashed border-gray-200 rounded min-h-[150px] flex items-center justify-center bg-gray-50\">\n        <div className=\"text-center\">\n            <h3 className=\"text-lg font-bold text-gray-400 uppercase tracking-widest\">{type}</h3>\n            <p className=\"text-sm text-gray-300\">{title}</p>\n        </div>\n    </div>\n);\n\n// Map section types to components\nconst renderSectionContent = (section: BuilderSection) => {\n    // logic to switch between actual components based on section.type\n    // For now return placeholders or you can import your actual Hero, Services etc.\n    switch (section.type) {\n        case 'hero':\n            return <SectionPlaceholder type=\"Hero Section\" title={section.title} />;\n        case 'services':\n            return <SectionPlaceholder type=\"Services List\" title={section.title} />;\n        case 'testimonials':\n            return <SectionPlaceholder type=\"Testimonials\" title={section.title} />;\n        case 'gallery':\n            return <SectionPlaceholder type=\"Gallery Grid\" title={section.title} />;\n        case 'contact':\n            return <SectionPlaceholder type=\"Contact Info\" title={section.title} />;\n        default:\n            return <SectionPlaceholder type=\"Unknown Section\" title={section.title} />;\n    }\n};\n\nexport default function BuilderCanvas() {\n    const {\n        sections,\n        reorderSections,\n        removeSection,\n        toggleSectionVisibility,\n        initializeSections\n    } = useBuilderStore();\n\n    const [activeId, setActiveId] = useState<string | null>(null);\n\n    useEffect(() => {\n        initializeSections();\n    }, [initializeSections]);\n\n    const sensors = useSensors(\n        useSensor(PointerSensor),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        }),\n        useSensor(TouchSensor, {\n            // Require a 250ms press to start dragging on touch devices to avoid scrolling conflict\n            activationConstraint: {\n                delay: 250,\n                tolerance: 5,\n            },\n        })\n    );\n\n    const handleDragStart = (event: any) => {\n        setActiveId(event.active.id);\n    };\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n\n        if (over && active.id !== over.id) {\n            const oldIndex = sections.findIndex((s) => s.id === active.id);\n            const newIndex = sections.findIndex((s) => s.id === over.id);\n            reorderSections(arrayMove(sections, oldIndex, newIndex));\n        }\n        setActiveId(null);\n    };\n\n    return (\n        <div className=\"max-w-4xl mx-auto p-6 pb-24\">\n            <DndContext\n                sensors={sensors}\n                collisionDetection={closestCenter}\n                onDragStart={handleDragStart}\n                onDragEnd={handleDragEnd}\n            >\n                <SortableContext\n                    items={sections.map((s) => s.id)}\n                    strategy={verticalListSortingStrategy}\n                >\n                    <div className=\"space-y-4\">\n                        {sections.map((section) => (\n                            <SortableSection\n                                key={section.id}\n                                section={section}\n                                onRemove={removeSection}\n                                onToggleVisibility={toggleSectionVisibility}\n                            >\n                                {renderSectionContent(section)}\n                            </SortableSection>\n                        ))}\n                    </div>\n                </SortableContext>\n\n                <DragOverlay>\n                    {activeId ? (\n                        <div className=\"opacity-80 bg-white border-2 border-blue-500 shadow-2xl rounded-lg overflow-hidden\">\n                            {/* Simplified render for overlay */}\n                            <SectionPlaceholder type=\"Moving Section...\" />\n                        </div>\n                    ) : null}\n                </DragOverlay>\n            </DndContext>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/builder/components/BuilderList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/builder/components/SortableItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/builder/components/SortableSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/builder/store/useBuilderStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[360,363],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[360,363],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[797,800],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[797,800],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'initialData' is defined but never used.","line":46,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":37}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { create } from 'zustand';\nimport { v4 as uuidv4 } from 'uuid';\nimport { BarbershopData } from '@/types/barbershop';\n\nexport type SectionType = 'hero' | 'services' | 'testimonials' | 'gallery' | 'about' | 'contact' | 'custom';\n\nexport interface BuilderSection {\n    id: string;\n    type: SectionType;\n    isVisible: boolean;\n    content: Record<string, any>;\n    title?: string; // For the builder UI\n}\n\ninterface BuilderState {\n    sections: BuilderSection[];\n    activeSectionId: string | null;\n    // Actions\n    initializeSections: (initialData?: BarbershopData) => void;\n    addSection: (type: SectionType) => void;\n    removeSection: (id: string) => void;\n    reorderSections: (newSections: BuilderSection[]) => void;\n    updateSectionContent: (id: string, newContent: Record<string, any>) => void;\n    toggleSectionVisibility: (id: string) => void;\n    setActiveSection: (id: string | null) => void;\n}\n\n// Helper to generate default content based on type\nconst getDefaultContent = (type: SectionType) => {\n    switch (type) {\n        case 'hero':\n            return { title: 'Bem-vindo', subtitle: 'Sua barbearia', cta: 'Agendar' };\n        case 'services':\n            return { title: 'Nossos Servi√ßos', items: [] };\n        case 'testimonials':\n            return { title: 'O que dizem', reviews: [] };\n        default:\n            return {};\n    }\n};\n\nexport const useBuilderStore = create<BuilderState>((set) => ({\n    sections: [],\n    activeSectionId: null,\n\n    initializeSections: (initialData) => {\n        // In a real app, we would parse initialData to reconstruct sections.\n        // For now, we will seed with default sections if empty.\n        const defaultSections: BuilderSection[] = [\n            { id: '1', type: 'hero', isVisible: true, content: {}, title: 'Hero Section' },\n            { id: '2', type: 'services', isVisible: true, content: {}, title: 'Servi√ßos' },\n            { id: '3', type: 'testimonials', isVisible: true, content: {}, title: 'Depoimentos' },\n            { id: '4', type: 'gallery', isVisible: true, content: {}, title: 'Galeria' },\n            { id: '5', type: 'contact', isVisible: true, content: {}, title: 'Contato' },\n        ];\n        set({ sections: defaultSections });\n    },\n\n    addSection: (type) =>\n        set((state) => ({\n            sections: [\n                ...state.sections,\n                {\n                    id: uuidv4(),\n                    type,\n                    isVisible: true,\n                    content: getDefaultContent(type),\n                    title: `Nova Se√ß√£o ${type}`,\n                },\n            ],\n        })),\n\n    removeSection: (id) =>\n        set((state) => ({\n            sections: state.sections.filter((s) => s.id !== id),\n        })),\n\n    reorderSections: (newSections) => set({ sections: newSections }),\n\n    updateSectionContent: (id, newContent) =>\n        set((state) => ({\n            sections: state.sections.map((s) =>\n                s.id === id ? { ...s, content: { ...s.content, ...newContent } } : s\n            ),\n        })),\n\n    toggleSectionVisibility: (id) =>\n        set((state) => ({\n            sections: state.sections.map((s) =>\n                s.id === id ? { ...s, isVisible: !s.isVisible } : s\n            ),\n        })),\n\n    setActiveSection: (id) => set({ activeSectionId: id }),\n}));\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/calendar/components/CalendarView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setHours' is defined but never used.","line":18,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setMinutes' is defined but never used.","line":19,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isWithinInterval' is defined but never used.","line":20,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CalendarIcon' is defined but never used.","line":24,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":24,"column":63,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":26,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":26,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":28,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'idx' is defined but never used.","line":155,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":155,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'dayIdx' is defined but never used.","line":225,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":225,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useMemo } from 'react';\nimport {\n    format,\n    startOfWeek,\n    endOfWeek,\n    startOfMonth,\n    endOfMonth,\n    eachDayOfInterval,\n    isSameDay,\n    addDays,\n    addMonths,\n    subMonths,\n    subDays,\n    isSameMonth,\n    getHours,\n    setHours,\n    setMinutes,\n    isWithinInterval\n} from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { Appointment } from '@/types/appointment';\nimport { ChevronLeft, ChevronRight, Calendar as CalendarIcon, Clock, Users } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Badge } from '@/components/ui/badge'; // Assuming exists, otherwise simple span\n\ninterface Props {\n    appointments: Appointment[];\n    onDateSelect?: (date: Date) => void;\n    colors?: {\n        confirmed: string;\n        pending: string;\n        cancelled: string;\n    }\n}\n\ntype ViewMode = 'month' | 'week';\n\nexport default function CalendarView({ appointments, onDateSelect, colors }: Props) {\n    const [currentDate, setCurrentDate] = useState(new Date());\n    const [view, setView] = useState<ViewMode>('week');\n    const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\n\n    // Navigation\n    const next = () => {\n        if (view === 'month') setCurrentDate(addMonths(currentDate, 1));\n        else setCurrentDate(addDays(currentDate, 7));\n    };\n\n    const prev = () => {\n        if (view === 'month') setCurrentDate(subMonths(currentDate, 1));\n        else setCurrentDate(subDays(currentDate, 7));\n    };\n\n    const today = () => setCurrentDate(new Date());\n\n    // Grid Generatators\n    const monthDays = useMemo(() => {\n        const start = startOfWeek(startOfMonth(currentDate));\n        const end = endOfWeek(endOfMonth(currentDate));\n        return eachDayOfInterval({ start, end });\n    }, [currentDate]);\n\n    const weekDays = useMemo(() => {\n        const start = startOfWeek(currentDate, { weekStartsOn: 0 }); // Sunday start\n        const end = endOfWeek(currentDate, { weekStartsOn: 0 });\n        return eachDayOfInterval({ start, end });\n    }, [currentDate]);\n\n    // Hours for Week View (08:00 to 22:00)\n    const hours = Array.from({ length: 15 }, (_, i) => i + 8);\n\n    // Helpers\n    const getAppointmentsForDay = (date: Date) => {\n        return appointments.filter(apt =>\n            isSameDay(new Date(apt.date.seconds * 1000), date)\n        );\n    };\n\n    const getAppointmentStyle = (status: string) => {\n        if (colors) {\n            const color = colors[status as keyof typeof colors] || colors.pending;\n            // Return base classes plus style object key (handled in render)\n            return {\n                style: {\n                    backgroundColor: `${color}20`, // 20% opacity using hex alpha if possible, or just utilize CSS var\n                    borderColor: color,\n                    color: color,\n                    borderWidth: '1px',\n                    borderStyle: 'solid'\n                },\n                className: 'bg-opacity-20 ' // Tailwind utility to ensure mix if needed\n            };\n        }\n\n        switch (status) {\n            case 'confirmed': return { className: 'bg-green-100 text-green-700 border-green-200' };\n            case 'cancelled': return { className: 'bg-red-100 text-red-700 border-red-200 opacity-60' };\n            default: return { className: 'bg-blue-100 text-blue-700 border-blue-200' };\n        }\n    };\n\n    return (\n        <Card className=\"w-full h-full flex flex-col shadow-sm bg-slate-900 border-slate-800 overflow-hidden text-slate-100\">\n            {/* Header */}\n            <div className=\"flex flex-col md:flex-row items-center justify-between p-4 border-b border-slate-800 gap-4 bg-slate-950\">\n                <div className=\"flex items-center gap-2\">\n                    <Button variant=\"outline\" size=\"icon\" onClick={prev} className=\"border-slate-700 bg-slate-800 hover:bg-slate-700\">\n                        <ChevronLeft className=\"h-4 w-4\" />\n                    </Button>\n                    <span className=\"text-lg font-semibold w-48 text-center capitalize\">\n                        {format(currentDate, view === 'month' ? 'MMMM yyyy' : \"'Semana de' d MMM\", { locale: ptBR })}\n                    </span>\n                    <Button variant=\"outline\" size=\"icon\" onClick={next} className=\"border-slate-700 bg-slate-800 hover:bg-slate-700\">\n                        <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\" onClick={today} className=\"ml-2 hover:bg-slate-800 hover:text-white\">\n                        Hoje\n                    </Button>\n                </div>\n\n                <div className=\"flex bg-slate-800 p-1 rounded-lg\">\n                    <button\n                        onClick={() => setView('week')}\n                        className={`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${view === 'week' ? 'bg-slate-700 shadow text-white' : 'text-slate-400 hover:text-white'}`}\n                    >\n                        Semanal\n                    </button>\n                    <button\n                        onClick={() => setView('month')}\n                        className={`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${view === 'month' ? 'bg-slate-700 shadow text-white' : 'text-slate-400 hover:text-white'}`}\n                    >\n                        Mensal\n                    </button>\n                </div>\n            </div>\n\n            {/* Calendar Grid */}\n            <CardContent className=\"p-0 flex-1 min-h-0 relative bg-slate-900 overflow-x-auto overflow-y-hidden\">\n                {view === 'month' ? (\n                    <div className=\"w-full min-w-[800px]\">\n                        {/* Days Header */}\n                        <div className=\"grid grid-cols-7 border-b border-slate-800 bg-slate-950\">\n                            {['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'].map(day => (\n                                <div key={day} className=\"py-2 text-center text-sm font-medium text-slate-500\">\n                                    {day}\n                                </div>\n                            ))}\n                        </div>\n                        {/* Month Grid */}\n                        <div className=\"grid grid-cols-7 auto-rows-[120px]\">\n                            {monthDays.map((day, idx) => {\n                                const dayAppointments = getAppointmentsForDay(day);\n                                const isCurrentMonth = isSameMonth(day, currentDate);\n                                const isToday = isSameDay(day, new Date());\n\n                                return (\n                                    <div\n                                        key={day.toString()}\n                                        onClick={() => onDateSelect?.(day)}\n                                        className={`border-b border-r border-slate-800 p-2 relative transition-colors hover:bg-slate-800/50 ${!isCurrentMonth ? 'bg-slate-950/50 text-slate-600' : 'bg-slate-900'}`}\n                                    >\n                                        <div className={`text-sm font-medium mb-1 ${isToday ? 'bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center' : 'text-slate-400'}`}>\n                                            {format(day, 'd')}\n                                        </div>\n                                        <div className=\"space-y-1 overflow-y-auto max-h-[80px] scrollbar-thin\">\n                                            {dayAppointments.slice(0, 3).map(apt => {\n                                                const style = getAppointmentStyle(apt.status);\n                                                return (\n                                                    <div\n                                                        key={apt.id}\n                                                        onClick={(e) => { e.stopPropagation(); setSelectedAppointment(apt); }}\n                                                        className={`text-[10px] px-1.5 py-0.5 rounded border truncate cursor-pointer ${style.className}`}\n                                                        style={style.style}\n                                                    >\n                                                        {format(new Date(apt.date.seconds * 1000), 'HH:mm')} - {apt.customerName}\n                                                    </div>\n                                                );\n                                            })}\n                                            {dayAppointments.length > 3 && (\n                                                <div className=\"text-[10px] text-slate-500 pl-1\">\n                                                    +{dayAppointments.length - 3} mais\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                ) : (\n                    // Week View\n                    <div className=\"flex flex-col h-full min-w-[800px]\">\n                        {/* Week Header */}\n                        <div className=\"grid grid-cols-8 border-b border-slate-800 bg-slate-950 flex-shrink-0\">\n                            <div className=\"p-4 border-r border-slate-800 text-center text-xs font-medium text-slate-400\">Hora</div>\n                            {weekDays.map(day => (\n                                <div key={day.toString()} className={`p-2 text-center border-r border-slate-800 last:border-r-0 ${isSameDay(day, new Date()) ? 'bg-slate-800/30' : ''}`}>\n                                    <div className=\"text-xs text-slate-500 uppercase\">{format(day, 'EEE', { locale: ptBR })}</div>\n                                    <div className={`text-sm font-bold mx-auto mt-1 ${isSameDay(day, new Date()) ? 'bg-blue-600 text-white w-7 h-7 rounded-full flex items-center justify-center' : 'text-slate-200'}`}>\n                                        {format(day, 'd')}\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n\n                        {/* Week Grid (Scrollable) */}\n                        <div className=\"overflow-y-auto flex-1 custom-scrollbar\">\n                            <div className=\"grid grid-cols-8 relative\">\n                                {/* Time Column */}\n                                <div className=\"col-span-1 border-r border-slate-800 bg-slate-950/30\">\n                                    {hours.map(hour => (\n                                        <div key={hour} className=\"h-20 border-b border-slate-800 text-xs text-slate-500 relative\">\n                                            <span className=\"absolute -top-2.5 right-2 bg-slate-900 px-1 rounded\">\n                                                {hour}:00\n                                            </span>\n                                        </div>\n                                    ))}\n                                </div>\n\n                                {/* Days Columns */}\n                                {weekDays.map((day, dayIdx) => (\n                                    <div key={day.toString()} className=\"col-span-1 border-r border-slate-800 last:border-r-0 relative min-w-[100px]\">\n                                        {/* Rows for grid lines */}\n                                        {hours.map(hour => (\n                                            <div key={`${day}-${hour}`} className=\"h-20 border-b border-slate-800 relative\" />\n                                        ))}\n\n                                        {/* Absolute Events Overlay */}\n                                        {getAppointmentsForDay(day).map(apt => {\n                                            const aptDate = new Date(apt.date.seconds * 1000);\n                                            const aptHour = getHours(aptDate);\n                                            // Only show if within our visible hours range\n                                            if (aptHour >= 8 && aptHour <= 22) {\n                                                const topOffset = (aptHour - 8) * 80; // 80px per hour\n                                                const style = getAppointmentStyle(apt.status);\n                                                return (\n                                                    <div\n                                                        key={apt.id}\n                                                        onClick={() => setSelectedAppointment(apt)}\n                                                        className={`absolute left-0.5 right-0.5 p-1 rounded-md text-xs border shadow-sm cursor-pointer hover:z-10 transition-all ${style.className}`}\n                                                        style={{\n                                                            top: `${topOffset}px`,\n                                                            height: '76px', // Almost full hour with gap\n                                                            ...style.style\n                                                        }}\n                                                    >\n                                                        <div className=\"font-bold flex justify-between\">\n                                                            <span>{format(aptDate, 'HH:mm')}</span>\n                                                        </div>\n                                                        <div className=\"truncate font-semibold\">{apt.customerName}</div>\n                                                        <div className=\"truncate text-[10px] opacity-80\">{apt.serviceName}</div>\n                                                        {apt.barberName && (\n                                                            <div className=\"absolute bottom-1 right-1\">\n                                                                <div className=\"w-5 h-5 bg-black/20 rounded-full flex items-center justify-center text-[10px] font-bold\" title={apt.barberName}>\n                                                                    {apt.barberName.charAt(0)}\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                );\n                                            }\n                                            return null;\n                                        })}\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    </div>\n                )}\n            </CardContent>\n\n            {/* Details Modal */}\n            <Dialog open={!!selectedAppointment} onOpenChange={(open) => !open && setSelectedAppointment(null)}>\n                <DialogContent className=\"bg-slate-900 border-slate-800 text-slate-100\">\n                    <DialogHeader>\n                        <DialogTitle className=\"text-white\">Detalhes do Agendamento</DialogTitle>\n                        <DialogDescription className=\"text-slate-400\">\n                            {selectedAppointment && format(new Date(selectedAppointment.date.seconds * 1000), \"d 'de' MMMM '√†s' HH:mm\", { locale: ptBR })}\n                        </DialogDescription>\n                    </DialogHeader>\n                    {selectedAppointment && (\n                        <div className=\"space-y-4\">\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div className=\"space-y-1\">\n                                    <span className=\"text-xs text-slate-500 font-medium uppercase\">Cliente</span>\n                                    <div className=\"font-medium text-slate-200\">{selectedAppointment.customerName}</div>\n                                    <div className=\"text-sm text-slate-400\">{selectedAppointment.customerPhone}</div>\n                                </div>\n                                <div className=\"space-y-1\">\n                                    <span className=\"text-xs text-slate-500 font-medium uppercase\">Servi√ßo</span>\n                                    <div className=\"font-medium text-slate-200\">{selectedAppointment.serviceName}</div>\n                                    <div className=\"text-sm text-slate-400\">R$ {selectedAppointment.price.toFixed(2)}</div>\n                                </div>\n                            </div>\n\n                            {selectedAppointment.barberName && (\n                                <div className=\"flex items-center gap-2 p-2 bg-slate-800 rounded-lg\">\n                                    <Users className=\"h-4 w-4 text-slate-400\" />\n                                    <span className=\"text-sm font-medium text-slate-300\">Profissional: {selectedAppointment.barberName}</span>\n                                </div>\n                            )}\n\n                            <div\n                                className=\"px-2 py-1 rounded text-xs inline-block font-semibold capitalize border\"\n                                style={getAppointmentStyle(selectedAppointment.status).style}\n                            >\n                                Status: {selectedAppointment.status}\n                            </div>\n                        </div>\n                    )}\n                </DialogContent>\n            </Dialog>\n        </Card>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/cart/components/CartDrawer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1328,1331],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1328,1331],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useCartStore } from '@/store/useCartStore';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Minus, Plus, ShoppingBag, Trash2, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport { useParams } from 'next/navigation'; // Get dynamic params\nimport { useCheckout } from '@/features/shop/hooks/useCheckout';\nimport { toast } from 'sonner';\n\nexport default function CartDrawer() {\n    const { items, isOpen, toggleCart, updateQuantity, getTotalPrice } = useCartStore();\n    const totalPrice = getTotalPrice();\n    const params = useParams();\n    const { checkout, isPending } = useCheckout();\n\n    const handleCheckout = async () => {\n        // Try getting slug from URL, fallback to 'demo' if testing in isolation (though ideally shouldn't happen)\n        // In a real WaaS, explicit Context is better, but this solves the \"hardcoded\" issue for the dynamic route.\n        const currentSlug = typeof params?.slug === 'string' ? params.slug : undefined;\n        // If we strictly need an ID, we'd loop up context. For now, sending slug to API is robust enough.\n\n        try {\n            await checkout({\n                items,\n                slug: currentSlug,\n                barberId: currentSlug ? undefined : 'demo-fallback'\n            });\n        } catch (error: any) {\n            toast.error('N√£o foi poss√≠vel iniciar o checkout', {\n                description: error.message || 'Tente novamente mais tarde.'\n            });\n        }\n    };\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={toggleCart}\n                        className=\"fixed inset-0 bg-black/50 z-[60] backdrop-blur-sm\"\n                    />\n\n                    {/* Drawer */}\n                    <motion.div\n                        initial={{ x: '100%' }}\n                        animate={{ x: 0 }}\n                        exit={{ x: '100%' }}\n                        transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n                        className=\"fixed inset-y-0 right-0 w-full max-w-md bg-white shadow-2xl z-[70] flex flex-col\"\n                    >\n                        {/* Header */}\n                        <div className=\"p-5 border-b border-gray-100 flex items-center justify-between bg-white\">\n                            <h2 className=\"text-xl font-bold flex items-center gap-2\">\n                                <ShoppingBag className=\"text-black\" />\n                                Seu Carrinho\n                            </h2>\n                            <button\n                                onClick={toggleCart}\n                                className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n                            >\n                                <X size={20} />\n                            </button>\n                        </div>\n\n                        {/* Body - Cart Items */}\n                        <div className=\"flex-1 overflow-y-auto p-5 space-y-4\">\n                            {items.length === 0 ? (\n                                <div className=\"h-full flex flex-col items-center justify-center text-center text-gray-500 space-y-4\">\n                                    <ShoppingBag size={48} className=\"text-gray-300 opacity-50\" />\n                                    <p>Seu carrinho est√° vazio.</p>\n                                    <button\n                                        onClick={toggleCart}\n                                        className=\"text-sm font-bold text-black border-b border-black pb-0.5 hover:opacity-70\"\n                                    >\n                                        Continuar comprando\n                                    </button>\n                                </div>\n                            ) : (\n                                items.map((item) => (\n                                    <div key={item.id} className=\"flex gap-4 p-3 bg-gray-50 rounded-xl border border-gray-100\">\n                                        {/* Image */}\n                                        <div className=\"relative w-20 h-20 bg-white rounded-lg overflow-hidden shrink-0 border border-gray-200\">\n                                            {item.imageUrl ? (\n                                                <Image src={item.imageUrl} alt={item.name} fill className=\"object-cover\" />\n                                            ) : (\n                                                <div className=\"flex h-full w-full items-center justify-center text-gray-300\">\n                                                    <ShoppingBag size={20} />\n                                                </div>\n                                            )}\n                                        </div>\n\n                                        {/* Info */}\n                                        <div className=\"flex-1 flex flex-col justify-between\">\n                                            <div>\n                                                <h4 className=\"font-bold text-sm text-gray-900 line-clamp-1\">{item.name}</h4>\n                                                <p className=\"text-xs text-gray-500\">\n                                                    {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(item.price)} unit.\n                                                </p>\n                                            </div>\n\n                                            <div className=\"flex items-center justify-between mt-2\">\n                                                {/* Qty Control */}\n                                                <div className=\"flex items-center gap-3 bg-white border border-gray-200 rounded-lg px-2 py-1\">\n                                                    <button\n                                                        onClick={() => updateQuantity(item.id, -1)}\n                                                        className=\"text-gray-500 hover:text-red-500\"\n                                                    >\n                                                        {item.quantity === 1 ? <Trash2 size={14} /> : <Minus size={14} />}\n                                                    </button>\n                                                    <span className=\"text-sm font-bold text-gray-900 w-4 text-center\">{item.quantity}</span>\n                                                    <button\n                                                        onClick={() => updateQuantity(item.id, 1)}\n                                                        className=\"text-gray-500 hover:text-black\"\n                                                    >\n                                                        <Plus size={14} />\n                                                    </button>\n                                                </div>\n\n                                                <p className=\"font-bold text-gray-900 text-sm\">\n                                                    {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(item.price * item.quantity)}\n                                                </p>\n                                            </div>\n                                        </div>\n                                    </div>\n                                ))\n                            )}\n                        </div>\n\n                        {/* Footer */}\n                        {items.length > 0 && (\n                            <div className=\"p-6 border-t border-gray-100 bg-gray-50\">\n                                <div className=\"flex justify-between items-center mb-4\">\n                                    <span className=\"text-gray-500 text-sm\">Subtotal</span>\n                                    <span className=\"text-xl font-bold text-gray-900\">\n                                        {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(totalPrice)}\n                                    </span>\n                                </div>\n                                <button\n                                    data-testid=\"checkout-btn\"\n                                    onClick={handleCheckout}\n                                    disabled={isPending}\n                                    className=\"w-full py-4 bg-black text-white rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-gray-900 transition-colors shadow-lg hover:shadow-xl transform active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed\"\n                                >\n                                    {isPending ? <Loader2 className=\"animate-spin\" /> : 'Finalizar Compra'}\n                                </button>\n                            </div>\n                        )}\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientHistoryModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":4,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":4,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'XCircle' is defined but never used.","line":4,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { Client } from '../types';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Calendar, Clock, DollarSign, User, Phone, CheckCircle, XCircle } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\n\ninterface ClientHistoryModalProps {\n    client: Client | null;\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport function ClientHistoryModal({ client, isOpen, onClose }: ClientHistoryModalProps) {\n    if (!client) return null;\n\n    return (\n        <Dialog open={isOpen} onOpenChange={onClose}>\n            <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto w-full bg-slate-900 border-slate-800 text-slate-100\">\n                <DialogHeader>\n                    <DialogTitle className=\"flex items-center gap-2 text-xl text-slate-100\">\n                        <User size={24} className=\"text-slate-400\" />\n                        {client.name}\n                    </DialogTitle>\n                    <DialogDescription className=\"flex items-center gap-2 text-slate-400\">\n                        <Phone size={14} />\n                        {client.phone}\n                    </DialogDescription>\n                </DialogHeader>\n\n                {/* Summary Metrics */}\n                <div className=\"grid grid-cols-3 gap-4 my-6\">\n                    <div className=\"bg-slate-950 p-4 rounded-xl border border-slate-800 text-center\">\n                        <p className=\"text-sm text-slate-400 mb-1\">Total Gasto</p>\n                        <p className=\"text-xl font-bold text-slate-100\">R$ {client.totalSpend.toFixed(2)}</p>\n                    </div>\n                    <div className=\"bg-slate-950 p-4 rounded-xl border border-slate-800 text-center\">\n                        <p className=\"text-sm text-slate-400 mb-1\">Visitas</p>\n                        <p className=\"text-xl font-bold text-slate-100\">{client.totalVisits}</p>\n                    </div>\n                    <div className=\"bg-slate-950 p-4 rounded-xl border border-slate-800 text-center\">\n                        <p className=\"text-sm text-slate-400 mb-1\">Ticket M√©dio</p>\n                        <p className=\"text-xl font-bold text-slate-100\">R$ {client.averageTicket.toFixed(2)}</p>\n                    </div>\n                </div>\n\n                {/* History Timeline */}\n                <div>\n                    <h4 className=\"font-bold text-slate-100 mb-4 flex items-center gap-2\">\n                        <Clock size={16} />\n                        Hist√≥rico de Agendamentos\n                    </h4>\n\n                    <div className=\"space-y-4\">\n                        {client.history.map((app) => (\n                            <div key={app.id} className=\"flex gap-4 relative group\">\n                                {/* Timeline Line */}\n                                <div className=\"w-12 flex flex-col items-center\">\n                                    <div className=\"h-full w-[1px] bg-slate-800 group-last:bg-transparent absolute top-3 left-6 -z-10\"></div>\n                                    <div className={`w-3 h-3 rounded-full mt-2 z-10 ${app.status === 'confirmed' ? 'bg-green-500' :\n                                        app.status === 'cancelled' ? 'bg-red-500' : 'bg-yellow-500'\n                                        }`}></div>\n                                </div>\n\n                                <div className=\"flex-1 bg-slate-950 border border-slate-800 p-3 rounded-lg hover:border-slate-700 transition-all\">\n                                    <div className=\"flex justify-between items-start\">\n                                        <div>\n                                            <p className=\"font-semibold text-slate-100\">{app.serviceName}</p>\n                                            <p className=\"text-xs text-slate-400 flex items-center gap-1\">\n                                                <Calendar size={12} />\n                                                {format(new Date(app.date.seconds ? app.date.seconds * 1000 : app.date), \"dd 'de' MMMM, yyyy '√†s' HH:mm\", { locale: ptBR })}\n                                            </p>\n                                        </div>\n                                        <div className=\"text-right\">\n                                            <p className=\"font-medium text-slate-100\">R$ {app.price.toFixed(2)}</p>\n                                            <span className={`text-[10px] uppercase font-bold px-2 py-0.5 rounded-full ${app.status === 'confirmed' ? 'bg-green-500/10 text-green-400' :\n                                                app.status === 'cancelled' ? 'bg-red-500/10 text-red-400' : 'bg-yellow-500/10 text-yellow-400'\n                                                }`}>\n                                                {app.status === 'confirmed' ? 'Confirmado' : app.status === 'cancelled' ? 'Cancelado' : 'Pendente'}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":5,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":5,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":86},{"ruleId":"prefer-const","severity":2,"message":"'result' is never reassigned. Use 'const' instead.","line":15,"column":13,"nodeType":"Identifier","messageId":"useConst","endLine":15,"endColumn":19,"fix":{"range":[701,848],"text":"const result = clients.filter(c =>\n            c.name.toLowerCase().includes(search.toLowerCase()) ||\n            c.phone.includes(search)\n        );"}},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:94:46\n  92 |                                     onClick={() => handleSort('name')}\n  93 |                                 >\n> 94 |                                     Cliente <SortIcon field=\"name\" />\n     |                                              ^^^^^^^^ This component is created during render\n  95 |                                 </th>\n  96 |                                 <th\n  97 |                                     className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:43:22\n  41 |     };\n  42 |\n> 43 |     const SortIcon = ({ field }: { field: SortField }) => {\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         if (sort.field !== field) return <ArrowUpDown size={14} className=\"text-slate-400 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return sort.order === 'asc'\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |             ? <ArrowUp size={14} className=\"text-blue-600 ml-1 inline\" />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |             : <ArrowDown size={14} className=\"text-blue-600 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |     };\n     | ^^^^^^ The component is created during render here\n  49 |\n  50 |     if (loading) {\n  51 |         return <div className=\"flex justify-center items-center h-64\"><Loader2 className=\"animate-spin text-blue-600\" /></div>;","line":94,"column":46,"nodeType":null,"endLine":94,"endColumn":54},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:100:52\n   98 |                                     onClick={() => handleSort('lastVisit')}\n   99 |                                 >\n> 100 |                                     √öltima Visita <SortIcon field=\"lastVisit\" />\n      |                                                    ^^^^^^^^ This component is created during render\n  101 |                                 </th>\n  102 |                                 <th\n  103 |                                     className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:43:22\n  41 |     };\n  42 |\n> 43 |     const SortIcon = ({ field }: { field: SortField }) => {\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         if (sort.field !== field) return <ArrowUpDown size={14} className=\"text-slate-400 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return sort.order === 'asc'\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |             ? <ArrowUp size={14} className=\"text-blue-600 ml-1 inline\" />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |             : <ArrowDown size={14} className=\"text-blue-600 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |     };\n     | ^^^^^^ The component is created during render here\n  49 |\n  50 |     if (loading) {\n  51 |         return <div className=\"flex justify-center items-center h-64\"><Loader2 className=\"animate-spin text-blue-600\" /></div>;","line":100,"column":52,"nodeType":null,"endLine":100,"endColumn":60},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:106:46\n  104 |                                     onClick={() => handleSort('totalVisits')}\n  105 |                                 >\n> 106 |                                     Visitas <SortIcon field=\"totalVisits\" />\n      |                                              ^^^^^^^^ This component is created during render\n  107 |                                 </th>\n  108 |                                 <th\n  109 |                                     className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:43:22\n  41 |     };\n  42 |\n> 43 |     const SortIcon = ({ field }: { field: SortField }) => {\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         if (sort.field !== field) return <ArrowUpDown size={14} className=\"text-slate-400 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return sort.order === 'asc'\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |             ? <ArrowUp size={14} className=\"text-blue-600 ml-1 inline\" />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |             : <ArrowDown size={14} className=\"text-blue-600 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |     };\n     | ^^^^^^ The component is created during render here\n  49 |\n  50 |     if (loading) {\n  51 |         return <div className=\"flex justify-center items-center h-64\"><Loader2 className=\"animate-spin text-blue-600\" /></div>;","line":106,"column":46,"nodeType":null,"endLine":106,"endColumn":54},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:112:50\n  110 |                                     onClick={() => handleSort('totalSpend')}\n  111 |                                 >\n> 112 |                                     Total Gasto <SortIcon field=\"totalSpend\" />\n      |                                                  ^^^^^^^^ This component is created during render\n  113 |                                 </th>\n  114 |                                 <th className=\"text-right py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider\">A√ß√µes</th>\n  115 |                             </tr>\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/components/ClientList.tsx:43:22\n  41 |     };\n  42 |\n> 43 |     const SortIcon = ({ field }: { field: SortField }) => {\n     |                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 44 |         if (sort.field !== field) return <ArrowUpDown size={14} className=\"text-slate-400 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         return sort.order === 'asc'\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |             ? <ArrowUp size={14} className=\"text-blue-600 ml-1 inline\" />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |             : <ArrowDown size={14} className=\"text-blue-600 ml-1 inline\" />;\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |     };\n     | ^^^^^^ The component is created during render here\n  49 |\n  50 |     if (loading) {\n  51 |         return <div className=\"flex justify-center items-center h-64\"><Loader2 className=\"animate-spin text-blue-600\" /></div>;","line":112,"column":50,"nodeType":null,"endLine":112,"endColumn":58}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"\nimport { useState, useMemo } from 'react';\nimport { useClients } from '../hooks/useClients';\nimport { Client, SortField, SortOrder } from '../types';\nimport { Search, Loader2, ArrowUpDown, ArrowUp, ArrowDown, User, DollarSign, Calendar } from 'lucide-react';\nimport { ClientHistoryModal } from './ClientHistoryModal';\n\nexport default function ClientList() {\n    const { clients, loading } = useClients();\n    const [search, setSearch] = useState('');\n    const [sort, setSort] = useState<{ field: SortField, order: SortOrder }>({ field: 'lastVisit', order: 'desc' });\n    const [selectedClient, setSelectedClient] = useState<Client | null>(null);\n\n    const filteredClients = useMemo(() => {\n        let result = clients.filter(c =>\n            c.name.toLowerCase().includes(search.toLowerCase()) ||\n            c.phone.includes(search)\n        );\n\n        result.sort((a, b) => {\n            let valA = a[sort.field];\n            let valB = b[sort.field];\n\n            // Normalize dates to numbers for comparison\n            if (valA instanceof Date) valA = valA.getTime();\n            if (valB instanceof Date) valB = valB.getTime();\n\n            if (valA < valB) return sort.order === 'asc' ? -1 : 1;\n            if (valA > valB) return sort.order === 'asc' ? 1 : -1;\n            return 0;\n        });\n\n        return result;\n    }, [clients, search, sort]);\n\n    const handleSort = (field: SortField) => {\n        setSort(prev => ({\n            field,\n            order: prev.field === field && prev.order === 'desc' ? 'asc' : 'desc'\n        }));\n    };\n\n    const SortIcon = ({ field }: { field: SortField }) => {\n        if (sort.field !== field) return <ArrowUpDown size={14} className=\"text-slate-400 ml-1 inline\" />;\n        return sort.order === 'asc'\n            ? <ArrowUp size={14} className=\"text-blue-600 ml-1 inline\" />\n            : <ArrowDown size={14} className=\"text-blue-600 ml-1 inline\" />;\n    };\n\n    if (loading) {\n        return <div className=\"flex justify-center items-center h-64\"><Loader2 className=\"animate-spin text-blue-600\" /></div>;\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Summary Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"bg-slate-900 p-6 rounded-xl border border-slate-800 shadow-sm\">\n                    <div className=\"flex items-center gap-4\">\n                        <div className=\"bg-blue-600/20 p-3 rounded-full text-blue-500\">\n                            <User size={24} />\n                        </div>\n                        <div>\n                            <p className=\"text-sm text-slate-400\">Total de Clientes</p>\n                            <h3 className=\"text-2xl font-bold text-slate-100\">{clients.length}</h3>\n                        </div>\n                    </div>\n                </div>\n                {/* Could add more metrics like 'Active Clients', 'Churned', etc. */}\n            </div>\n\n            {/* Search and Filters */}\n            <div className=\"flex items-center gap-4 bg-slate-900 p-4 rounded-xl border border-slate-800\">\n                <Search size={20} className=\"text-slate-400\" />\n                <input\n                    type=\"text\"\n                    placeholder=\"Buscar por nome ou telefone...\"\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    className=\"flex-1 outline-none text-slate-100 placeholder:text-slate-500 bg-transparent\"\n                />\n            </div>\n\n            {/* Table */}\n            <div className=\"bg-slate-900 rounded-xl border border-slate-800 overflow-hidden shadow-sm\">\n                <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                        <thead className=\"bg-slate-950 border-b border-slate-800\">\n                            <tr>\n                                <th\n                                    className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n                                    onClick={() => handleSort('name')}\n                                >\n                                    Cliente <SortIcon field=\"name\" />\n                                </th>\n                                <th\n                                    className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n                                    onClick={() => handleSort('lastVisit')}\n                                >\n                                    √öltima Visita <SortIcon field=\"lastVisit\" />\n                                </th>\n                                <th\n                                    className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n                                    onClick={() => handleSort('totalVisits')}\n                                >\n                                    Visitas <SortIcon field=\"totalVisits\" />\n                                </th>\n                                <th\n                                    className=\"text-left py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider cursor-pointer hover:bg-slate-900 transition-colors\"\n                                    onClick={() => handleSort('totalSpend')}\n                                >\n                                    Total Gasto <SortIcon field=\"totalSpend\" />\n                                </th>\n                                <th className=\"text-right py-4 px-6 text-xs font-bold text-slate-400 uppercase tracking-wider\">A√ß√µes</th>\n                            </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-slate-800\">\n                            {filteredClients.map((client) => (\n                                <tr key={client.id} className=\"hover:bg-slate-800/50 transition-colors group\">\n                                    <td className=\"py-4 px-6\">\n                                        <div className=\"flex items-center gap-3\">\n                                            <div className=\"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-400 font-bold border border-slate-700\">\n                                                {client.name.charAt(0).toUpperCase()}\n                                            </div>\n                                            <div>\n                                                <p className=\"font-semibold text-slate-100\">{client.name}</p>\n                                                <p className=\"text-xs text-slate-500\">{client.phone}</p>\n                                            </div>\n                                        </div>\n                                    </td>\n                                    <td className=\"py-4 px-6 text-sm text-slate-400\">\n                                        {client.lastVisit.toLocaleDateString('pt-BR')}\n                                    </td>\n                                    <td className=\"py-4 px-6 text-sm text-slate-400\">\n                                        {client.totalVisits}\n                                    </td>\n                                    <td className=\"py-4 px-6 text-sm font-medium text-slate-200\">\n                                        R$ {client.totalSpend.toFixed(2)}\n                                    </td>\n                                    <td className=\"py-4 px-6 text-right\">\n                                        <button\n                                            onClick={() => setSelectedClient(client)}\n                                            className=\"text-blue-500 hover:text-blue-400 text-sm font-medium hover:underline\"\n                                        >\n                                            Ver Detalhes\n                                        </button>\n                                    </td>\n                                </tr>\n                            ))}\n                            {filteredClients.length === 0 && (\n                                <tr>\n                                    <td colSpan={5} className=\"py-12 text-center text-slate-500\">\n                                        Nenhum cliente encontrado.\n                                    </td>\n                                </tr>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <ClientHistoryModal\n                client={selectedClient}\n                isOpen={!!selectedClient}\n                onClose={() => setSelectedClient(null)}\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/hooks/useClients.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":2,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SortField' is defined but never used.","line":7,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SortOrder' is defined but never used.","line":7,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { useState, useEffect, useMemo } from 'react';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs, orderBy } from 'firebase/firestore';\nimport { Appointment } from '@/types/appointment';\nimport { Client, SortField, SortOrder } from '../types';\n\nexport function useClients() {\n    const { user } = useAuth();\n    const [clients, setClients] = useState<Client[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const fetchAndAggregate = async () => {\n            if (!user) return;\n            try {\n                // Fetch all appointments\n                const q = query(\n                    collection(db, 'appointments'),\n                    where('barbershopId', '==', user.uid),\n                    orderBy('date', 'desc')\n                );\n\n                const snapshot = await getDocs(q);\n                const appointments = snapshot.docs.map(doc => ({\n                    id: doc.id,\n                    ...doc.data()\n                })) as Appointment[];\n\n                // Aggregate by Phone\n                const clientMap = new Map<string, Client>();\n\n                appointments.forEach(app => {\n                    const phone = app.customerPhone;\n                    if (!phone) return;\n\n                    const date = app.date.seconds ? new Date(app.date.seconds * 1000) : new Date(app.date);\n\n                    if (!clientMap.has(phone)) {\n                        clientMap.set(phone, {\n                            id: phone, // Simple ID for now\n                            name: app.customerName,\n                            phone: phone,\n                            totalVisits: 0,\n                            totalSpend: 0,\n                            lastVisit: date,\n                            firstVisit: date,\n                            averageTicket: 0,\n                            status: 'new',\n                            history: []\n                        });\n                    }\n\n                    const client = clientMap.get(phone)!;\n\n                    // Update client data\n                    client.history.push(app);\n\n                    if (app.status === 'confirmed') {\n                        client.totalVisits += 1;\n                        client.totalSpend += app.price;\n                    }\n\n                    // Update dates\n                    if (date > client.lastVisit) client.lastVisit = date;\n                    if (date < client.firstVisit) client.firstVisit = date;\n\n                    // Update name if most recent appointment has a different name (maybe they fixed a typo)\n                    // We stick to the first found (most recent due to sort) for now, or could logic this better.\n                });\n\n                // Final calculations\n                const aggregatedClients = Array.from(clientMap.values()).map(client => {\n                    client.averageTicket = client.totalVisits > 0 ? client.totalSpend / client.totalVisits : 0;\n\n                    // Determine status\n                    const daysSinceLastVisit = (new Date().getTime() - client.lastVisit.getTime()) / (1000 * 3600 * 24);\n                    if (client.totalVisits === 1 && daysSinceLastVisit < 30) client.status = 'new';\n                    else if (daysSinceLastVisit > 60) client.status = 'churned';\n                    else client.status = 'active';\n\n                    return client;\n                });\n\n                setClients(aggregatedClients);\n\n            } catch (error) {\n                console.error(\"Error fetching clients:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchAndAggregate();\n    }, [user]);\n\n    return { clients, loading };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/crm/types/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/customization/components/ThemeEditor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/dashboard/components/FeatureLocked.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/dashboard/components/SettingsForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAuth' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeTab' is assigned a value but never used.","line":27,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":21},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":213,"column":45,"nodeType":"JSXOpeningElement","endLine":213,"endColumn":128}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Save, Loader2, CheckCircle2, User, Image as ImageIcon, Phone, Instagram, MapPin } from 'lucide-react';\nimport { BarbershopData } from '@/types/barbershop';\nimport ImageUploader from '@/components/ui/ImageUploader';\nimport { User as AuthUser } from 'firebase/auth';\n\ninterface SettingsFormProps {\n    user: AuthUser;\n}\n\nexport default function SettingsForm({ user }: SettingsFormProps) {\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [success, setSuccess] = useState(false);\n\n    // Default to 'general' tab\n    const [activeTab, setActiveTab] = useState(\"general\");\n\n    const [formData, setFormData] = useState({\n        name: '',\n        description: '',\n        phone: '',\n        whatsapp: '',\n        address: '',\n        instagram: '',\n        hero_image: ''\n    });\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const docRef = doc(db, 'barbershops', user.uid);\n                const docSnap = await getDoc(docRef);\n\n                if (docSnap.exists()) {\n                    const data = docSnap.data() as BarbershopData;\n                    setFormData({\n                        name: data.name,\n                        description: data.content?.description || '',\n                        phone: data.contact?.phone || '',\n                        whatsapp: data.contact?.whatsapp || '',\n                        address: data.contact?.address || '',\n                        instagram: data.contact?.instagram || '',\n                        hero_image: data.content?.hero_image || ''\n                    });\n                }\n            } catch (error) {\n                console.error(\"Error fetching settings:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchData();\n    }, [user]);\n\n    const handleSave = async () => {\n        setSaving(true);\n        setSuccess(false);\n\n        try {\n            const docRef = doc(db, 'barbershops', user.uid);\n\n            await updateDoc(docRef, {\n                'name': formData.name,\n                'content.description': formData.description,\n                'contact.phone': formData.phone,\n                'contact.whatsapp': formData.whatsapp,\n                'contact.address': formData.address,\n                'contact.instagram': formData.instagram,\n                'content.hero_image': formData.hero_image\n            });\n\n            setSuccess(true);\n            setTimeout(() => setSuccess(false), 3000);\n        } catch (error) {\n            console.error(\"Error saving settings:\", error);\n            alert(\"Erro ao salvar altera√ß√µes.\");\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <Loader2 className=\"animate-spin text-blue-600\" size={32} />\n            </div>\n        );\n    }\n\n    // Shared input styles to fix dark mode glitch\n    const inputClass = \"bg-slate-950 border-2 border-slate-800 text-white placeholder:text-slate-500 focus-visible:ring-blue-600 focus-visible:border-blue-600 rounded-xl h-12 transition-all hover:border-slate-700\";\n    const labelClass = \"text-slate-300 font-bold mb-1.5 block\";\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                {/* Header Actions */}\n                <div className=\"flex items-center gap-4 ml-auto\">\n                    {success && (\n                        <div className=\"flex items-center gap-2 text-emerald-400 bg-emerald-950/50 px-4 py-2 rounded-full border border-emerald-900/50 animate-in fade-in slide-in-from-right-4 shadow-lg shadow-emerald-900/20\">\n                            <CheckCircle2 size={18} />\n                            <span className=\"text-sm font-bold\">Salvo com sucesso!</span>\n                        </div>\n                    )}\n                    <Button\n                        onClick={handleSave}\n                        disabled={saving}\n                        className=\"bg-blue-600 hover:bg-blue-700 text-white min-w-[140px] shadow-lg shadow-blue-900/20 rounded-xl h-11 font-bold transition-all hover:scale-105 active:scale-95\"\n                    >\n                        {saving ? <Loader2 size={18} className=\"animate-spin mr-2\" /> : <Save size={18} className=\"mr-2\" />}\n                        {saving ? 'Salvando...' : 'Salvar Altera√ß√µes'}\n                    </Button>\n                </div>\n            </div>\n\n            <Tabs defaultValue=\"general\" className=\"w-full\" onValueChange={setActiveTab}>\n                {/* Desktop Tabs */}\n                <TabsList className=\"bg-slate-950/40 border-2 border-slate-800/60 p-1.5 rounded-2xl w-full md:w-auto mb-8 hidden md:inline-flex gap-2\">\n                    <TabsTrigger\n                        value=\"general\"\n                        className=\"flex items-center gap-2 px-6 py-2.5 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 font-medium transition-all data-[state=active]:shadow-lg data-[state=active]:shadow-blue-900/20 hover:text-white hover:bg-white/5\"\n                    >\n                        <User size={18} /> Geral\n                    </TabsTrigger>\n                    <TabsTrigger\n                        value=\"visual\"\n                        className=\"flex items-center gap-2 px-6 py-2.5 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 font-medium transition-all data-[state=active]:shadow-lg data-[state=active]:shadow-blue-900/20 hover:text-white hover:bg-white/5\"\n                    >\n                        <ImageIcon size={18} /> Visual\n                    </TabsTrigger>\n                    <TabsTrigger\n                        value=\"contact\"\n                        className=\"flex items-center gap-2 px-6 py-2.5 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 font-medium transition-all data-[state=active]:shadow-lg data-[state=active]:shadow-blue-900/20 hover:text-white hover:bg-white/5\"\n                    >\n                        <Phone size={18} /> Contato\n                    </TabsTrigger>\n                </TabsList>\n\n                {/* Mobile Tabs */}\n                <div className=\"md:hidden mb-6 overflow-x-auto pb-2\">\n                    <TabsList className=\"bg-slate-950/40 border-2 border-slate-800/60 p-1.5 rounded-2xl inline-flex w-max gap-1\">\n                        <TabsTrigger value=\"general\" className=\"px-4 py-2 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 hover:text-white\"><User size={16} className=\"mr-2\" /> Geral</TabsTrigger>\n                        <TabsTrigger value=\"visual\" className=\"px-4 py-2 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 hover:text-white\"><ImageIcon size={16} className=\"mr-2\" /> Visual</TabsTrigger>\n                        <TabsTrigger value=\"contact\" className=\"px-4 py-2 rounded-xl data-[state=active]:bg-blue-600 data-[state=active]:text-white text-slate-400 hover:text-white\"><Phone size={16} className=\"mr-2\" /> Contato</TabsTrigger>\n                    </TabsList>\n                </div>\n\n                {/* --- TAB: GERAL --- */}\n                <TabsContent value=\"general\">\n                    <Card className=\"border-2 border-slate-800 shadow-xl shadow-black/40 bg-slate-900 text-white overflow-hidden rounded-[2rem]\">\n                        <CardHeader className=\"border-b border-slate-800/50 pb-6 mb-2\">\n                            <CardTitle className=\"text-2xl font-bold text-white flex items-center gap-2\">\n                                <span className=\"bg-blue-600/20 p-2 rounded-lg text-blue-500\"><User size={20} /></span>\n                                Informa√ß√µes B√°sicas\n                            </CardTitle>\n                            <CardDescription className=\"text-slate-400 text-base\">Dados principais exibidos no topo do seu site.</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-6 pt-6\">\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"name\" className={labelClass}>Nome da Barbearia</Label>\n                                <Input\n                                    id=\"name\"\n                                    value={formData.name}\n                                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                    className={`${inputClass} max-w-md font-medium`}\n                                    placeholder=\"Ex: Barbearia do Z√©\"\n                                />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"description\" className={labelClass}>Descri√ß√£o / Slogan</Label>\n                                <Input\n                                    id=\"description\"\n                                    value={formData.description}\n                                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                                    className={`${inputClass} max-w-xl`}\n                                    placeholder=\"Ex: Estilo e tradi√ß√£o desde 2010.\"\n                                />\n                                <p className=\"text-xs text-slate-400\">Aparece logo abaixo do nome no cabe√ßalho.</p>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </TabsContent>\n\n                {/* --- TAB: VISUAL --- */}\n                <TabsContent value=\"visual\">\n                    <Card className=\"border-2 border-slate-800 shadow-xl shadow-black/40 bg-slate-900 text-white overflow-hidden rounded-[2rem]\">\n                        <CardHeader className=\"border-b border-slate-800/50 pb-6 mb-2\">\n                            <CardTitle className=\"text-2xl font-bold text-white flex items-center gap-2\">\n                                <span className=\"bg-purple-600/20 p-2 rounded-lg text-purple-500\"><ImageIcon size={20} /></span>\n                                Identidade Visual\n                            </CardTitle>\n                            <CardDescription className=\"text-slate-400 text-base\">Personalize as imagens do seu site.</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"space-y-8 pt-6\">\n                            {/* Hero Image */}\n                            <div className=\"space-y-4\">\n                                <Label className={`text-base ${labelClass}`}>Imagem de Capa (Hero)</Label>\n                                <div className=\"border-2 border-dashed border-slate-700 rounded-2xl p-8 flex flex-col items-center justify-center bg-slate-800/30 hover:bg-slate-800/50 transition-colors group\">\n                                    {formData.hero_image ? (\n                                        <div className=\"relative w-full max-w-md aspect-video rounded-xl overflow-hidden shadow-2xl shadow-black/50 mb-6 border border-slate-700 group-hover:scale-[1.02] transition-transform duration-500\">\n                                            <img src={formData.hero_image} alt=\"Capa\" className=\"w-full h-full object-cover\" />\n                                        </div>\n                                    ) : (\n                                        <div className=\"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mb-6 text-slate-500 border border-slate-700\">\n                                            <ImageIcon size={32} />\n                                        </div>\n                                    )}\n                                    <div className=\"max-w-xs w-full\">\n                                        <ImageUploader\n                                            onUpload={(url) => setFormData({ ...formData, hero_image: url })}\n                                            label={formData.hero_image ? \"Trocar Imagem\" : \"Adicionar Imagem\"}\n                                            className=\"static bg-blue-600 hover:bg-blue-500 w-full justify-center h-12 rounded-xl text-base shadow-lg shadow-blue-900/20\"\n                                        />\n                                    </div>\n                                    <p className=\"text-sm text-slate-400 mt-4 text-center\">Recomendado: 1920x1080px (Alta resolu√ß√£o)</p>\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </TabsContent>\n\n                {/* --- TAB: CONTATO --- */}\n                <TabsContent value=\"contact\">\n                    <Card className=\"border-2 border-slate-800 shadow-xl shadow-black/40 bg-slate-900 text-white overflow-hidden rounded-[2rem]\">\n                        <CardHeader className=\"border-b border-slate-800/50 pb-6 mb-2\">\n                            <CardTitle className=\"text-2xl font-bold text-white flex items-center gap-2\">\n                                <span className=\"bg-green-600/20 p-2 rounded-lg text-green-500\"><Phone size={20} /></span>\n                                Canais de Contato\n                            </CardTitle>\n                            <CardDescription className=\"text-slate-400 text-base\">Como seus clientes encontram voc√™.</CardDescription>\n                        </CardHeader>\n                        <CardContent className=\"grid gap-6 pt-6\">\n                            <div className=\"grid md:grid-cols-2 gap-6\">\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"phone\" className={`flex items-center gap-2 ${labelClass}`}><Phone size={14} /> Telefone</Label>\n                                    <Input\n                                        id=\"phone\"\n                                        value={formData.phone}\n                                        onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                                        placeholder=\"(11) 99999-9999\"\n                                        className={inputClass}\n                                    />\n                                </div>\n                                <div className=\"space-y-2\">\n                                    <Label htmlFor=\"whatsapp\" className={`flex items-center gap-2 ${labelClass}`}><Phone size={14} className=\"text-green-600\" /> WhatsApp</Label>\n                                    <Input\n                                        id=\"whatsapp\"\n                                        value={formData.whatsapp}\n                                        onChange={(e) => setFormData({ ...formData, whatsapp: e.target.value })}\n                                        placeholder=\"5511999999999\"\n                                        className={inputClass}\n                                    />\n                                    <p className=\"text-[10px] text-slate-400\">Inclua o c√≥digo do pa√≠s (55) e DDD. Apenas n√∫meros.</p>\n                                </div>\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"address\" className={`flex items-center gap-2 ${labelClass}`}><MapPin size={14} /> Endere√ßo Completo</Label>\n                                <Input\n                                    id=\"address\"\n                                    value={formData.address}\n                                    onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n                                    placeholder=\"Rua Exemplo, 123 - Centro, Cidade - SP\"\n                                    className={inputClass}\n                                />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label htmlFor=\"instagram\" className={`flex items-center gap-2 ${labelClass}`}><Instagram size={14} className=\"text-pink-600\" /> Instagram</Label>\n                                <div className=\"relative\">\n                                    <span className=\"absolute left-3 top-2.5 text-slate-400 font-medium\">@</span>\n                                    <Input\n                                        id=\"instagram\"\n                                        value={formData.instagram}\n                                        onChange={(e) => setFormData({ ...formData, instagram: e.target.value })}\n                                        className={`${inputClass} pl-8`}\n                                        placeholder=\"suabarbearia\"\n                                    />\n                                </div>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </TabsContent>\n            </Tabs>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/dashboard/components/ShareBarbershopCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":36,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Copy, MessageCircle, ExternalLink } from 'lucide-react';\nimport { useToast } from '@/components/ui/use-toast';\n\ninterface ShareBarbershopCardProps {\n    slug?: string;\n}\n\nexport default function ShareBarbershopCard({ slug }: ShareBarbershopCardProps) {\n    const { toast } = useToast();\n    const [copied, setCopied] = useState(false);\n\n    // Hardcoded domain for now, or could come from env\n    const baseUrl = typeof window !== 'undefined' ? window.location.origin : 'https://barbersaas.com';\n    const shareUrl = slug ? `${baseUrl}/${slug}` : `${baseUrl}/slug-da-barbearia`;\n\n    // WhatsApp URL\n    const whatsappText = encodeURIComponent(`Agende seu hor√°rio aqui: ${shareUrl}`);\n    const whatsappUrl = `https://wa.me/?text=${whatsappText}`;\n\n    const handleCopy = async () => {\n        try {\n            await navigator.clipboard.writeText(shareUrl);\n            setCopied(true);\n            toast({\n                title: \"Link copiado!\",\n                description: \"O link da sua barbearia foi copiado para a √°rea de transfer√™ncia.\",\n                variant: \"default\",\n            });\n            setTimeout(() => setCopied(false), 2000);\n        } catch (err) {\n            toast({\n                title: \"Erro ao copiar\",\n                description: \"N√£o foi poss√≠vel copiar o link.\",\n                variant: \"destructive\",\n            });\n        }\n    };\n\n    const handleWhatsAppShare = () => {\n        window.open(whatsappUrl, '_blank');\n    };\n\n    return (\n        <Card className=\"mb-8 border-l-4 border-l-emerald-500 shadow-md bg-gradient-to-r from-white to-slate-50 dark:from-slate-900 dark:to-slate-900/50\">\n            <CardHeader className=\"pb-2\">\n                <CardTitle className=\"flex items-center gap-2 text-xl\">\n                    <ExternalLink className=\"w-5 h-5 text-emerald-600\" />\n                    Compartilhe sua Barbearia\n                </CardTitle>\n                <p className=\"text-sm text-muted-foreground\">\n                    Divulgue seu link para que seus clientes possam agendar hor√°rios online.\n                </p>\n            </CardHeader>\n            <CardContent>\n                <div className=\"flex flex-col md:flex-row gap-4 items-center\">\n                    <div className=\"flex-1 w-full flex gap-2\">\n                        <Input\n                            value={shareUrl}\n                            readOnly\n                            className=\"bg-white dark:bg-slate-950 font-mono text-sm\"\n                        />\n                        <Button\n                            variant=\"outline\"\n                            size=\"icon\"\n                            onClick={handleCopy}\n                            className={copied ? \"text-green-600 border-green-600\" : \"\"}\n                            title=\"Copiar Link\"\n                        >\n                            <Copy className=\"w-4 h-4\" />\n                        </Button>\n                    </div>\n\n                    <Button\n                        onClick={handleWhatsAppShare}\n                        className=\"w-full md:w-auto bg-[#25D366] hover:bg-[#128C7E] text-white font-bold gap-2 shadow-sm\"\n                    >\n                        <MessageCircle className=\"w-4 h-4\" />\n                        Enviar no WhatsApp\n                    </Button>\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/dashboard/components/Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/demo/components/DemoCustomizer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":5,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":5,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":6,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":6,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":11,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[417,420],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[417,420],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[445,448],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[445,448],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3044,3047],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3044,3047],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useDemoStore } from '@/store/useDemoStore';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Settings2, MapPin, Calendar, Star, X, Check, Palette } from 'lucide-react';\nimport { useState, useRef, useEffect } from 'react';\nimport { cn } from '@/lib/utils';\nimport ThemeEditor from '@/features/customization/components/ThemeEditor';\n\ninterface DemoCustomizerProps {\n    colors: any;\n    onUpdate: (colors: any) => void;\n}\n\nexport default function DemoCustomizer({ colors, onUpdate }: DemoCustomizerProps) {\n    const {\n        showBooking, toggleBooking,\n        showMap, toggleMap,\n        showReviews, toggleReviews\n    } = useDemoStore();\n\n    const [isThemeOpen, setIsThemeOpen] = useState(false);\n\n    return (\n        <div className=\"fixed top-24 left-1/2 -translate-x-1/2 z-[100] flex flex-col items-center gap-4\">\n            <motion.div\n                initial={{ y: -20, opacity: 0 }}\n                animate={{ y: 0, opacity: 1 }}\n                exit={{ y: -20, opacity: 0 }}\n                className=\"bg-black/80 backdrop-blur-xl border border-white/10 rounded-full p-2 flex items-center gap-2 shadow-2xl\"\n            >\n                <div className=\"flex items-center gap-1 px-2 border-r border-white/10 mr-1\">\n                    <Settings2 size={16} className=\"text-white/50\" />\n                    <span className=\"text-xs font-medium text-white/50 uppercase tracking-wider hidden md:block\">Personalizar</span>\n                </div>\n\n                <ToggleBtn\n                    active={isThemeOpen}\n                    onClick={() => setIsThemeOpen(!isThemeOpen)}\n                    icon={Palette}\n                    label=\"Cores\"\n                    highlight\n                />\n\n                <div className=\"w-[1px] h-6 bg-white/10 mx-1\" />\n\n                <ToggleBtn\n                    active={showBooking}\n                    onClick={toggleBooking}\n                    icon={Calendar}\n                    label=\"Agendamento\"\n                />\n\n                <ToggleBtn\n                    active={showMap}\n                    onClick={toggleMap}\n                    icon={MapPin}\n                    label=\"Mapa\"\n                />\n\n                <ToggleBtn\n                    active={showReviews}\n                    onClick={toggleReviews}\n                    icon={Star}\n                    label=\"Avalia√ß√µes\"\n                    highlight\n                />\n            </motion.div>\n\n            <AnimatePresence>\n                {isThemeOpen && (\n                    <motion.div\n                        initial={{ opacity: 0, y: -10, scale: 0.95 }}\n                        animate={{ opacity: 1, y: 0, scale: 1 }}\n                        exit={{ opacity: 0, y: -10, scale: 0.95 }}\n                    >\n                        <ThemeEditor colors={colors} onUpdate={onUpdate} />\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n\nfunction ToggleBtn({ active, onClick, icon: Icon, label, highlight }: any) {\n    return (\n        <button\n            onClick={onClick}\n            className={`\n                relative px-4 py-2 rounded-full flex items-center gap-2 transition-all duration-300\n                ${active\n                    ? highlight\n                        ? 'bg-gradient-to-r from-yellow-500 to-amber-600 text-white shadow-[0_0_15px_rgba(245,158,11,0.5)]'\n                        : 'bg-white text-black'\n                    : 'bg-transparent text-white/50 hover:bg-white/5'\n                }\n            `}\n        >\n            <Icon size={16} className={active && highlight ? 'fill-white' : ''} />\n            <span className=\"text-sm font-medium\">{label}</span>\n            {active && (\n                <motion.div layoutId=\"active-dot\" className=\"w-1.5 h-1.5 rounded-full bg-current ml-1\" />\n            )}\n        </button>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/demo/components/DemoOverlay.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":3,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":14,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { ArrowRight, ArrowLeft, Brush, X, Check } from 'lucide-react';\nimport Link from 'next/link';\nimport { useRouter } from 'next/navigation';\n\ninterface DemoOverlayProps {\n    templateId: string;\n    isEditing?: boolean;\n    onToggleEdit?: () => void;\n}\n\nexport default function DemoOverlay({ templateId, isEditing, onToggleEdit }: DemoOverlayProps) {\n    const router = useRouter();\n\n    return (\n        <div className=\"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 p-2 bg-black/80 backdrop-blur-xl border border-white/10 rounded-full shadow-2xl\">\n            <Link\n                href=\"/\"\n                className=\"w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-white/50 hover:text-white transition-colors\"\n                title=\"Voltar\"\n            >\n                <ArrowLeft size={18} />\n            </Link>\n\n            <div className=\"h-6 w-[1px] bg-white/10 mx-1\"></div>\n\n            <div className=\"flex items-center gap-2\">\n                {onToggleEdit && (\n                    <button\n                        onClick={onToggleEdit}\n                        className={`\n                            flex items-center gap-2 px-4 py-2 rounded-full font-medium text-sm transition-all\n                            ${isEditing\n                                ? 'bg-white text-black hover:bg-gray-200'\n                                : 'bg-transparent text-white hover:bg-white/10 border border-white/20'\n                            }\n                        `}\n                    >\n                        {isEditing ? <Check size={16} /> : <Brush size={16} />}\n                        {isEditing ? 'Concluir Edi√ß√£o' : 'Editar Site'}\n                    </button>\n                )}\n\n                <Link\n                    href={`/register?selectedTemplate=${templateId}`}\n                    className=\"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-full font-medium text-sm transition-all shadow-lg shadow-blue-600/20\"\n                >\n                    Quero este modelo\n                    <ArrowRight size={16} />\n                </Link>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/demo/components/DemoWrapper.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/editor/components/EditorSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateContent' is assigned a value but never used.","line":32,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEditor } from '@/hooks/useEditor';\nimport { useSaveTheme } from '@/hooks/useSaveTheme';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\nimport {\n    Layout,\n    Save,\n    Eye,\n    Edit3,\n    Loader2,\n    ChevronLeft,\n    ChevronRight,\n    LogOut\n} from 'lucide-react';\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { clsx } from 'clsx';\nimport ThemeEditor from '@/features/customization/components/ThemeEditor';\nimport SectionsEditor from './SectionsEditor';\n\nimport { Toast } from '@/components/ui/Toast';\n\nexport default function EditorSidebar() {\n    const {\n        isEditing,\n        toggleEditing,\n        resetChanges,\n        hasChanges,\n        data,\n        updateContent,\n        updateData\n    } = useEditor();\n\n    const { saveChanges: persistChanges, saving } = useSaveTheme();\n\n    const [isOpen, setIsOpen] = useState(true);\n    const [activeTab, setActiveTab] = useState<'theme' | 'sections'>('theme');\n    const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);\n\n    const handleSave = async () => {\n        const result = await persistChanges(true); // force publish\n        if (result.success) {\n            setToast({ message: 'Site publicado com sucesso!', type: 'success' });\n        } else {\n            setToast({ message: 'Erro ao salvar altera√ß√µes.', type: 'error' });\n        }\n    };\n\n    if (!data) return null;\n\n    return (\n        <>\n            {/* Toggle Button (when closed) */}\n            <AnimatePresence>\n                {!isOpen && (\n                    <motion.button\n                        initial={{ x: -100 }}\n                        animate={{ x: 0 }}\n                        exit={{ x: -100 }}\n                        onClick={() => setIsOpen(true)}\n                        className=\"fixed left-0 top-24 z-50 bg-white p-3 rounded-r-xl shadow-lg border border-l-0 border-slate-200 text-slate-700 hover:text-blue-600 transition-colors\"\n                    >\n                        <ChevronRight size={20} />\n                    </motion.button>\n                )}\n            </AnimatePresence>\n\n            {/* Main Sidebar */}\n            <motion.div\n                initial={{ marginLeft: -320 }}\n                animate={{ marginLeft: isOpen ? 0 : -320 }}\n                transition={{ type: \"spring\", damping: 20, stiffness: 100 }}\n                className=\"h-screen w-80 bg-white border-r border-slate-200 shadow-2xl z-40 flex flex-col flex-shrink-0 relative\"\n            >\n                {/* Header */}\n                <div className=\"h-16 flex items-center px-6 border-b border-slate-100 flex-shrink-0 justify-between\">\n                    <span className=\"font-bold text-lg text-slate-900 flex items-center gap-2\">\n                        <Layout size={18} className=\"text-blue-600\" />\n                        Editor Visual\n                    </span>\n                    <div className=\"flex items-center gap-1\">\n                        <Link href=\"/dashboard\" className=\"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors\" title=\"Voltar ao Dashboard\">\n                            <LogOut size={20} className=\"rotate-180\" />\n                        </Link>\n                        <button\n                            onClick={() => setIsOpen(false)}\n                            className=\"p-2 hover:bg-slate-100 rounded-full text-slate-500 transition-colors\"\n                        >\n                            <ChevronLeft size={20} />\n                        </button>\n                    </div>\n                </div>\n\n                {/* Toolbar */}\n                <div className=\"p-2 grid grid-cols-2 gap-2 border-b border-slate-100 bg-slate-50/50\">\n                    <button\n                        onClick={() => toggleEditing(true)}\n                        className={clsx(\n                            \"flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all\",\n                            isEditing\n                                ? \"bg-white text-blue-700 shadow-sm ring-1 ring-slate-200\"\n                                : \"text-slate-500 hover:bg-slate-100 hover:text-slate-700\"\n                        )}\n                    >\n                        <Edit3 size={16} />\n                        Editar\n                    </button>\n                    <button\n                        onClick={() => toggleEditing(false)}\n                        className={clsx(\n                            \"flex items-center justify-center gap-2 py-2 px-3 rounded-lg text-sm font-medium transition-all\",\n                            !isEditing\n                                ? \"bg-white text-blue-700 shadow-sm ring-1 ring-slate-200\"\n                                : \"text-slate-500 hover:bg-slate-100 hover:text-slate-700\"\n                        )}\n                    >\n                        <Eye size={16} />\n                        Preview\n                    </button>\n                </div>\n\n                {/* Tabs */}\n                <div className=\"flex border-b border-slate-100\">\n                    <button\n                        onClick={() => setActiveTab('theme')}\n                        className={clsx(\n                            \"flex-1 py-3 text-sm font-medium border-b-2 transition-colors\",\n                            activeTab === 'theme'\n                                ? \"border-blue-600 text-blue-600 bg-blue-50/10\"\n                                : \"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50\"\n                        )}\n                    >\n                        Tema & Cores\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('sections')}\n                        className={clsx(\n                            \"flex-1 py-3 text-sm font-medium border-b-2 transition-colors\",\n                            activeTab === 'sections'\n                                ? \"border-blue-600 text-blue-600 bg-blue-50/10\"\n                                : \"border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-50\"\n                        )}\n                    >\n                        Se√ß√µes\n                    </button>\n                </div>\n\n                {/* Content */}\n                <div className=\"flex-1 overflow-y-auto p-4 scrollbar-thin scrollbar-thumb-slate-200\">\n                    {activeTab === 'theme' && (\n                        <div className=\"space-y-6\">\n                            {/* Template Selector in Sidebar */}\n                            <div className=\"space-y-3 pb-4 border-b border-slate-100\">\n                                <h4 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider\">Template</h4>\n                                <div className=\"grid grid-cols-3 gap-2\">\n                                    {[\n                                        { id: 'classic', name: 'Classic', color: 'bg-emerald-900' },\n                                        { id: 'modern', name: 'Modern', color: 'bg-slate-900' },\n                                        { id: 'urban', name: 'Urban', color: 'bg-orange-900' }\n                                    ].map((theme) => (\n                                        <button\n                                            key={theme.id}\n                                            onClick={() => updateData({ ...data, template_id: theme.id as 'classic' | 'modern' | 'urban' })}\n                                            className={clsx(\n                                                \"flex flex-col items-center gap-1 p-2 rounded-lg border transition-all text-xs\",\n                                                data.template_id === theme.id\n                                                    ? \"border-blue-500 bg-blue-50/50\"\n                                                    : \"border-slate-200 hover:border-slate-300 hover:bg-slate-50\"\n                                            )}\n                                        >\n                                            <div className={clsx(\"w-full aspect-square rounded-md mb-1\", theme.color)}></div>\n                                            <span className={clsx(\"font-medium\", data.template_id === theme.id ? \"text-blue-600\" : \"text-slate-600\")}>\n                                                {theme.name}\n                                            </span>\n                                        </button>\n                                    ))}\n                                </div>\n                            </div>\n\n                            <ThemeEditor\n                                colors={data.colors}\n                                onUpdate={(newColors) => {\n                                    if (updateData) updateData({ ...data, colors: newColors });\n                                }}\n                            />\n\n                            <div className=\"p-4 bg-blue-50 rounded-lg border border-blue-100\">\n                                <h4 className=\"text-xs font-bold text-blue-500 uppercase tracking-wider mb-2\">Como Editar</h4>\n                                <p className=\"text-sm text-blue-700 leading-relaxed\">\n                                    Clique nos textos e imagens diretamente no site ao lado para edit√°-los. O modo de edi√ß√£o deve estar ativo.\n                                </p>\n                            </div>\n                        </div>\n                    )}\n\n                    {activeTab === 'sections' && (\n                        <SectionsEditor />\n                    )}\n                </div>\n\n                {/* Footer Actions */}\n                <div className=\"p-4 border-t border-slate-100 bg-slate-50 space-y-3\">\n                    {hasChanges && (\n                        <motion.div\n                            initial={{ opacity: 0, y: 10 }}\n                            animate={{ opacity: 1, y: 0 }}\n                            className=\"flex items-center justify-between text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-md border border-amber-100\"\n                        >\n                            <span className=\"font-medium\">Altera√ß√µes n√£o salvas</span>\n                            <button onClick={resetChanges} className=\"hover:underline font-bold\">Desfazer</button>\n                        </motion.div>\n                    )}\n\n                    <Button\n                        className=\"w-full bg-slate-900 hover:bg-slate-800 text-white shadow-lg shadow-slate-900/10 h-11\"\n                        onClick={handleSave}\n                        disabled={saving}\n                    >\n                        {saving ? <Loader2 size={18} className=\"animate-spin mr-2\" /> : <Save size={18} className=\"mr-2\" />}\n                        Salvar e Publicar\n                    </Button>\n                </div>\n\n                <AnimatePresence>\n                    {toast && (\n                        <Toast\n                            message={toast.message}\n                            type={toast.type}\n                            onClose={() => setToast(null)}\n                        />\n                    )}\n                </AnimatePresence>\n            </motion.div>\n        </>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/editor/components/SectionsEditor.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":45,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1119,1122],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1119,1122],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-as-const","severity":2,"message":"Expected a `const` instead of a literal type assertion.","line":62,"column":33,"nodeType":"TSLiteralType","messageId":"preferConstAssertion","endLine":62,"endColumn":43,"fix":{"range":[1547,1557],"text":"const"}},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/editor/components/SectionsEditor.tsx:134:13\n  132 |             const currentSections = data.content.sections;\n  133 |             const missingSections = defaultSections.filter(s => !currentSections.includes(s));\n> 134 |             setItems([...currentSections, ...missingSections]);\n      |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  135 |         } else if (data) {\n  136 |             setItems(defaultSections);\n  137 |         }","line":134,"column":13,"nodeType":null,"endLine":134,"endColumn":21},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'data' and 'defaultSections'. Either include them or remove the dependency array.","line":138,"column":8,"nodeType":"ArrayExpression","endLine":138,"endColumn":32,"suggestions":[{"desc":"Update the dependencies array to be: [data, data.content.sections, defaultSections]","fix":{"range":[4560,4584],"text":"[data, data.content.sections, defaultSections]"}}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":184,"column":120,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba &quot;Identidade Visual\"."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba &ldquo;Identidade Visual\"."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba &#34;Identidade Visual\"."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba &rdquo;Identidade Visual\"."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":184,"column":138,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba \"Identidade Visual&quot;."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba \"Identidade Visual&ldquo;."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba \"Identidade Visual&#34;."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6070,6143],"text":"A se√ß√£o principal do seu site. Edite a imagem na aba \"Identidade Visual&rdquo;."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { useEditor } from '@/hooks/useEditor';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport {\n    MapPin,\n    Phone,\n    MessageCircle,\n    Star,\n    Scissors,\n    Plus,\n    Trash2,\n    ChevronDown,\n    ChevronRight,\n    ShoppingBag,\n    GripVertical,\n    LayoutTemplate,\n    Image as ImageIcon,\n    Sparkles,\n    Info\n} from 'lucide-react';\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { useEditorStore } from '@/store/useEditorStore';\nimport { Switch } from '@/components/ui/switch';\nimport {\n    DndContext,\n    closestCenter,\n    KeyboardSensor,\n    PointerSensor,\n    useSensor,\n    useSensors,\n    DragEndEvent\n} from '@dnd-kit/core';\nimport {\n    arrayMove,\n    SortableContext,\n    sortableKeyboardCoordinates,\n    verticalListSortingStrategy,\n    useSortable\n} from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\n\n// Simple Accordion Component\nfunction AccordionItem({ title, icon: Icon, children, defaultOpen = false, id }: any) {\n    const [isOpen, setIsOpen] = useState(defaultOpen);\n\n    const {\n        attributes,\n        listeners,\n        setNodeRef,\n        transform,\n        transition,\n        isDragging\n    } = useSortable({ id: id });\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition,\n        zIndex: isDragging ? 10 : 1,\n        opacity: isDragging ? 0.5 : 1,\n        position: 'relative' as 'relative',\n    };\n\n    return (\n        <div ref={setNodeRef} style={style} className=\"border border-slate-200 rounded-lg overflow-hidden bg-white mb-3 shadow-sm\">\n            <div className=\"flex items-center bg-slate-50 border-b border-slate-100\">\n                <div\n                    {...attributes}\n                    {...listeners}\n                    className=\"p-3 text-slate-400 cursor-grab hover:text-slate-600 hover:bg-slate-100 active:cursor-grabbing border-r border-slate-100\"\n                >\n                    <GripVertical size={16} />\n                </div>\n\n                <button\n                    onClick={() => setIsOpen(!isOpen)}\n                    className=\"flex-1 flex items-center justify-between p-3 hover:bg-slate-100 transition-colors text-left\"\n                >\n                    <div className=\"flex items-center gap-2 font-medium text-slate-700\">\n                        <Icon size={18} className=\"text-blue-500\" />\n                        {title}\n                    </div>\n                    {isOpen ? <ChevronDown size={16} className=\"text-slate-400\" /> : <ChevronRight size={16} className=\"text-slate-400\" />}\n                </button>\n            </div>\n\n            <AnimatePresence>\n                {isOpen && (\n                    <motion.div\n                        initial={{ height: 0, opacity: 0 }}\n                        animate={{ height: 'auto', opacity: 1 }}\n                        exit={{ height: 0, opacity: 0 }}\n                        className=\"overflow-hidden\"\n                    >\n                        <div className=\"p-4 space-y-4 border-t border-slate-100 bg-white\">\n                            {children}\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n\nexport default function SectionsEditor() {\n    const {\n        data,\n        updateContact,\n        updateService,\n        updateData,\n        updateContent,\n        toggleProductsSection\n    } = useEditor();\n\n    const sensors = useSensors(\n        useSensor(PointerSensor),\n        useSensor(KeyboardSensor, {\n            coordinateGetter: sortableKeyboardCoordinates,\n        })\n    );\n\n    const toggleReviewsModal = useEditorStore(state => state.toggleReviewsModal);\n\n    // Initial Default Sections\n    const defaultSections = ['hero', 'services', 'transformation', 'about', 'gallery', 'products', 'reviews', 'contact'];\n    const [items, setItems] = useState<string[]>([]);\n\n    useEffect(() => {\n        if (data && data.content.sections && data.content.sections.length > 0) {\n            // Merge defaults to ensure new sections appear if they were added to the code but not DB\n            const currentSections = data.content.sections;\n            const missingSections = defaultSections.filter(s => !currentSections.includes(s));\n            setItems([...currentSections, ...missingSections]);\n        } else if (data) {\n            setItems(defaultSections);\n        }\n    }, [data?.content.sections]);\n\n\n    if (!data) return null;\n\n    const handleDragEnd = (event: DragEndEvent) => {\n        const { active, over } = event;\n\n        if (over && active.id !== over.id) {\n            setItems((items) => {\n                const oldIndex = items.indexOf(active.id as string);\n                const newIndex = items.indexOf(over.id as string);\n                const newOrder = arrayMove(items, oldIndex, newIndex);\n\n                // Persist to global store\n                updateData({\n                    ...data,\n                    content: {\n                        ...data.content,\n                        sections: newOrder\n                    }\n                });\n\n                return newOrder;\n            });\n        }\n    };\n\n\n    const handleAddService = () => {\n        const newServices = [...data.services, { name: 'Novo Servi√ßo', price: 0, duration: '30 min' }];\n        updateData({ ...data, services: newServices });\n    };\n\n    const handleRemoveService = (index: number) => {\n        const newServices = [...data.services];\n        newServices.splice(index, 1);\n        updateData({ ...data, services: newServices });\n    };\n\n    const renderSectionContent = (id: string) => {\n        switch (id) {\n            case 'hero':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Hero (Capa)\" icon={LayoutTemplate}>\n                        <div className=\"space-y-3\">\n                            <p className=\"text-xs text-slate-500\">A se√ß√£o principal do seu site. Edite a imagem na aba \"Identidade Visual\".</p>\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">T√≠tulo Principal</Label>\n                                <Input\n                                    value={data.name || ''} // Usually name is used, or maybe separate hero_title\n                                    onChange={(e) => updateData({ ...data, name: e.target.value })}\n                                    placeholder=\"Nome da Barbearia\"\n                                    className=\"h-8 text-sm\"\n                                />\n                            </div>\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">Descri√ß√£o Curta</Label>\n                                <textarea\n                                    value={data.content.description || ''}\n                                    onChange={(e) => updateContent('description', e.target.value)}\n                                    placeholder=\"Uma breve descri√ß√£o sobre sua barbearia...\"\n                                    className=\"flex min-h-[60px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\"\n                                />\n                            </div>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'gallery':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Galeria de Fotos\" icon={ImageIcon}>\n                        <div className=\"space-y-3\">\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">T√≠tulo da Se√ß√£o</Label>\n                                <Input\n                                    value={data.content.gallery_title || ''}\n                                    onChange={(e) => updateContent('gallery_title', e.target.value)}\n                                    placeholder=\"Ex: Editorial Visual\"\n                                    className=\"h-8 text-sm\"\n                                />\n                            </div>\n                            <p className=\"text-xs text-slate-500\">Edite as fotos diretamente no Preview clicando sobre elas ou adicionando novas.</p>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'transformation':\n                // Only relevant for Modern? We show it anyway, maybe with a note.\n                return (\n                    <AccordionItem key={id} id={id} title=\"Transforma√ß√£o (Antes/Depois)\" icon={Sparkles}>\n                        <div className=\"space-y-3\">\n                            <p className=\"text-xs text-slate-500\">Se√ß√£o exclusiva do tema <strong>Modern</strong>. Compare o antes e depois.</p>\n                            <div className=\"p-3 bg-slate-50 rounded text-xs text-slate-400 text-center border border-dashed\">\n                                Edi√ß√£o de imagens dispon√≠vel apenas no Preview.\n                            </div>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'about':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Sobre & Diferenciais\" icon={Info}>\n                        <div className=\"space-y-3\">\n                            <p className=\"text-xs text-slate-500\">Se√ß√£o de destaque do tema <strong>Urban</strong>.</p>\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">T√≠tulo Sobre</Label>\n                                <Input\n                                    value={data.content.about_title_middle || ''}\n                                    onChange={(e) => updateContent('about_title_middle', e.target.value)}\n                                    placeholder=\"Ex: Aceitamos\"\n                                    className=\"h-8 text-sm\"\n                                />\n                            </div>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'contact':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Contato & Localiza√ß√£o\" icon={MapPin}>\n                        <div className=\"space-y-3\">\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">Endere√ßo</Label>\n                                <Input\n                                    value={data.contact.address}\n                                    onChange={(e) => updateContact('address', e.target.value)}\n                                    placeholder=\"Rua Exemplo, 123\"\n                                    className=\"h-8 text-sm\"\n                                />\n                            </div>\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">WhatsApp</Label>\n                                <div className=\"relative\">\n                                    <MessageCircle size={14} className=\"absolute left-2.5 top-2.5 text-slate-400\" />\n                                    <Input\n                                        value={data.contact.whatsapp}\n                                        onChange={(e) => updateContact('whatsapp', e.target.value)}\n                                        placeholder=\"5511999999999\"\n                                        className=\"h-8 text-sm pl-8\"\n                                    />\n                                </div>\n                            </div>\n                            <div className=\"space-y-1\">\n                                <Label className=\"text-xs\">Telefone</Label>\n                                <div className=\"relative\">\n                                    <Phone size={14} className=\"absolute left-2.5 top-2.5 text-slate-400\" />\n                                    <Input\n                                        value={data.contact.phone}\n                                        onChange={(e) => updateContact('phone', e.target.value)}\n                                        placeholder=\"(11) 3333-3333\"\n                                        className=\"h-8 text-sm pl-8\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'services':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Servi√ßos\" icon={Scissors}>\n                        <div className=\"space-y-4\">\n                            {data.services.map((service, index) => (\n                                <div key={index} className=\"space-y-2 p-3 bg-slate-50 rounded border border-slate-100 relative group\">\n                                    <button\n                                        onClick={() => handleRemoveService(index)}\n                                        className=\"absolute right-2 top-2 text-slate-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all\"\n                                        title=\"Remover servi√ßo\"\n                                    >\n                                        <Trash2 size={14} />\n                                    </button>\n                                    <div className=\"space-y-1\">\n                                        <Label className=\"text-xs\">Nome</Label>\n                                        <Input\n                                            value={service.name}\n                                            onChange={(e) => updateService(index, 'name', e.target.value)}\n                                            className=\"h-8 text-sm bg-white\"\n                                        />\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-2\">\n                                        <div className=\"space-y-1\">\n                                            <Label className=\"text-xs\">Pre√ßo (R$)</Label>\n                                            <Input\n                                                type=\"number\"\n                                                value={service.price}\n                                                onChange={(e) => updateService(index, 'price', Number(e.target.value))}\n                                                className=\"h-8 text-sm bg-white\"\n                                            />\n                                        </div>\n                                        <div className=\"space-y-1\">\n                                            <Label className=\"text-xs\">Dura√ß√£o</Label>\n                                            <Input\n                                                value={service.duration}\n                                                onChange={(e) => updateService(index, 'duration', e.target.value)}\n                                                className=\"h-8 text-sm bg-white\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                            <Button\n                                onClick={handleAddService}\n                                variant=\"outline\"\n                                className=\"w-full text-xs h-8 border-dashed\"\n                            >\n                                <Plus size={14} className=\"mr-1\" /> Adicionar Servi√ßo\n                            </Button>\n                        </div>\n                    </AccordionItem>\n                );\n            case 'products':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Loja de Produtos\" icon={ShoppingBag}>\n                        <div className=\"flex items-center justify-between p-2\">\n                            <div className=\"space-y-0.5\">\n                                <Label className=\"text-sm font-medium\">Exibir Produtos</Label>\n                                <p className=\"text-[10px] text-slate-500\">Mostre seus produtos √† venda na p√°gina inicial.</p>\n                            </div>\n                            <Switch\n                                checked={data.content.showProductsSection || false}\n                                onCheckedChange={() => toggleProductsSection(!data.content.showProductsSection)}\n                            />\n                        </div>\n                    </AccordionItem>\n                );\n            case 'reviews':\n                return (\n                    <AccordionItem key={id} id={id} title=\"Avalia√ß√µes\" icon={Star}>\n                        <div className=\"text-center py-2 space-y-3\">\n                            <p className=\"text-xs text-slate-500\">Gerencie os depoimentos dos seus clientes.</p>\n                            <Button\n                                onClick={() => toggleReviewsModal(true)}\n                                className=\"w-full h-8 text-xs bg-slate-900 text-white\"\n                            >\n                                Gerenciar Avalia√ß√µes\n                            </Button>\n                        </div>\n                    </AccordionItem>\n                );\n            default:\n                return null;\n        }\n    };\n\n    return (\n        <div className=\"space-y-6 pb-20\">\n            <div className=\"px-1\">\n                <h3 className=\"text-sm font-semibold text-slate-900 mb-4 px-2\">Gerenciar e Reordenar Se√ß√µes</h3>\n\n                <DndContext\n                    sensors={sensors}\n                    collisionDetection={closestCenter}\n                    onDragEnd={handleDragEnd}\n                >\n                    <SortableContext\n                        items={items}\n                        strategy={verticalListSortingStrategy}\n                    >\n                        <div className=\"space-y-3\">\n                            {items.map(id => renderSectionContent(id))}\n                        </div>\n                    </SortableContext>\n                </DndContext>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/loyalty/components/LoyaltyCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'loading' is defined but never used.","line":14,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'progress' is assigned a value but never used.","line":17,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { Star, Gift, CheckCircle2 } from 'lucide-react';\nimport { LoyaltyConfig, LoyaltyCard as LoyaltyCardType } from '../types';\nimport { cn } from '@/lib/utils';\n\ninterface LoyaltyCardProps {\n    config: LoyaltyConfig;\n    card?: LoyaltyCardType | null;\n    loading?: boolean;\n}\n\nexport default function LoyaltyCard({ config, card, loading }: LoyaltyCardProps) {\n    const points = card?.balance || 0;\n    const totalSlots = config.pointsRequired;\n    const progress = Math.min((points / totalSlots) * 100, 100);\n\n    if (!config.enabled) return null;\n\n    return (\n        <div className=\"w-full max-w-md mx-auto perspective-1000\">\n            <motion.div\n                initial={{ rotateX: 10 }}\n                whileHover={{ rotateX: 0 }}\n                transition={{ type: 'spring', stiffness: 300, damping: 20 }}\n                className={cn(\n                    \"relative overflow-hidden rounded-2xl shadow-xl border-t border-white/20\",\n                    \"bg-gradient-to-br from-[#1a1a1a] to-[#0a0a0a] p-6 text-white\"\n                )}\n            >\n                {/* Header */}\n                <div className=\"flex justify-between items-start mb-6\">\n                    <div>\n                        <h3 className=\"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-yellow-600\">\n                            Fidelidade VIP\n                        </h3>\n                        <p className=\"text-sm text-gray-400\">\n                            Junte {config.pointsRequired} selos e ganhe:\n                        </p>\n                        <p className=\"text-base font-medium text-yellow-500 mt-1\">\n                            {config.rewardName}\n                        </p>\n                    </div>\n                    <div className=\"bg-yellow-500/10 p-3 rounded-full border border-yellow-500/20\">\n                        <Gift className=\"text-yellow-500\" size={24} />\n                    </div>\n                </div>\n\n                {/* Grid de Selos */}\n                <div className=\"grid grid-cols-5 gap-3 mb-6\">\n                    {Array.from({ length: totalSlots }).map((_, i) => {\n                        const isCompleted = i < points;\n                        return (\n                            <motion.div\n                                key={i}\n                                initial={{ scale: 0.8, opacity: 0 }}\n                                animate={{ scale: 1, opacity: 1 }}\n                                transition={{ delay: i * 0.05 }}\n                                className={cn(\n                                    \"aspect-square rounded-full flex items-center justify-center border-2 border-dashed transition-all\",\n                                    isCompleted\n                                        ? \"bg-yellow-500 border-yellow-500 shadow-[0_0_15px_rgba(234,179,8,0.5)]\"\n                                        : \"border-gray-700 bg-gray-800/50\"\n                                )}\n                            >\n                                {isCompleted ? (\n                                    <motion.div\n                                        initial={{ scale: 0 }}\n                                        animate={{ scale: 1 }}\n                                        transition={{ type: \"spring\" }}\n                                    >\n                                        <Star size={16} className=\"text-black fill-black\" />\n                                    </motion.div>\n                                ) : (\n                                    <span className=\"text-xs text-gray-600 font-mono\">{i + 1}</span>\n                                )}\n                            </motion.div>\n                        );\n                    })}\n                </div>\n\n                {/* Footer / Status */}\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-800\">\n                    <span className=\"text-xs text-gray-500 font-mono\">\n                        ID: {card?.id?.slice(0, 8).toUpperCase() || 'NOVO'}\n                    </span>\n                    <div className=\"text-right\">\n                        <span className=\"text-2xl font-bold\">{points}</span>\n                        <span className=\"text-gray-400 text-sm\">/{totalSlots}</span>\n                    </div>\n                </div>\n\n                {/* Efeitos de Fundo */}\n                <div className=\"absolute top-0 right-0 w-32 h-32 bg-yellow-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2\" />\n                <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-blue-500/5 rounded-full blur-2xl translate-y-1/2 -translate-x-1/2\" />\n            </motion.div>\n\n            {/* Mensagem de Conclus√£o */}\n            {points >= totalSlots && (\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"mt-4 bg-green-500/10 border border-green-500/20 rounded-xl p-4 flex items-center gap-3 text-green-500\"\n                >\n                    <CheckCircle2 size={24} />\n                    <p className=\"font-medium text-sm\">\n                        Parab√©ns! Voc√™ j√° pode resgatar seu pr√™mio na pr√≥xima visita.\n                    </p>\n                </motion.div>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/loyalty/components/LoyaltyDashboardConfig.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/loyalty/hooks/useLoyalty.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1070,1073],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1070,1073],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1213,1216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1213,1216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchCard'. Either include it or remove the dependency array.","line":113,"column":8,"nodeType":"ArrayExpression","endLine":113,"endColumn":35,"suggestions":[{"desc":"Update the dependencies array to be: [userProfile, barbershopId, fetchCard]","fix":{"range":[4080,4107],"text":"[userProfile, barbershopId, fetchCard]"}}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { db } from '@/lib/firebase'; // Assuming centralized firebase export\nimport { collection, query, where, getDocs, doc, setDoc, updateDoc, increment, arrayUnion, Timestamp } from 'firebase/firestore';\nimport { LoyaltyCard, LoyaltyTransactionType } from '../types';\nimport { useAuth } from '@/features/auth/context/AuthContext';\n\nexport function useLoyalty(barbershopId: string) {\n    const { userProfile } = useAuth();\n    const [card, setCard] = useState<LoyaltyCard | null>(null);\n    const [loading, setLoading] = useState(false);\n\n    const fetchCard = async () => {\n        if (!userProfile?.uid || !barbershopId) return;\n\n        try {\n            setLoading(true);\n            const q = query(\n                collection(db, 'loyalty_cards'),\n                where('userId', '==', userProfile.uid),\n                where('barbershopId', '==', barbershopId)\n            );\n\n            const snapshot = await getDocs(q);\n\n            if (!snapshot.empty) {\n                const data = snapshot.docs[0].data() as any;\n                // Convert Firestore timestamps to Date objects if needed\n                const transactions = data.transactions?.map((t: any) => ({\n                    ...t,\n                    date: t.date?.toDate ? t.date.toDate() : new Date(t.date)\n                })) || [];\n\n                setCard({ ...data, id: snapshot.docs[0].id, transactions } as LoyaltyCard);\n            } else {\n                setCard(null);\n            }\n        } catch (error) {\n            console.error(\"Error fetching loyalty card:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const addPoints = async (points: number, description: string) => {\n        if (!userProfile?.uid || !barbershopId) return;\n\n        const transactionId = crypto.randomUUID();\n        const newTransaction = {\n            id: transactionId,\n            date: Timestamp.now(),\n            type: 'EARN' as LoyaltyTransactionType,\n            points,\n            description\n        };\n\n        try {\n            if (card) {\n                // Update existing card\n                const cardRef = doc(db, 'loyalty_cards', card.id);\n                await updateDoc(cardRef, {\n                    balance: increment(points),\n                    totalEarned: increment(points),\n                    lastUpdated: Timestamp.now(),\n                    transactions: arrayUnion(newTransaction)\n                });\n            } else {\n                // Create new card\n                const newCardId = `${userProfile.uid}_${barbershopId}`;\n                await setDoc(doc(db, 'loyalty_cards', newCardId), {\n                    userId: userProfile.uid,\n                    barbershopId,\n                    balance: points,\n                    totalEarned: points,\n                    lastUpdated: Timestamp.now(),\n                    transactions: [newTransaction]\n                });\n            }\n            fetchCard(); // Refresh local state\n        } catch (error) {\n            console.error(\"Error adding loyalty points:\", error);\n            throw error;\n        }\n    };\n\n    const redeemReward = async (cost: number, rewardName: string) => {\n        if (!card || card.balance < cost) throw new Error(\"Saldo insuficiente\");\n\n        const transactionId = crypto.randomUUID();\n        const newTransaction = {\n            id: transactionId,\n            date: Timestamp.now(),\n            type: 'REDEEM' as LoyaltyTransactionType,\n            points: -cost,\n            description: `Resgate: ${rewardName}`\n        };\n\n        try {\n            const cardRef = doc(db, 'loyalty_cards', card.id);\n            await updateDoc(cardRef, {\n                balance: increment(-cost),\n                lastUpdated: Timestamp.now(),\n                transactions: arrayUnion(newTransaction)\n            });\n            fetchCard();\n        } catch (error) {\n            console.error(\"Error redeeming reward:\", error);\n            throw error;\n        }\n    };\n\n    useEffect(() => {\n        fetchCard();\n    }, [userProfile, barbershopId]);\n\n    return {\n        card,\n        loading,\n        addPoints,\n        redeemReward,\n        refresh: fetchCard\n    };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/loyalty/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/AutomationConfig.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[237,240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[237,240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { Mail, MessageSquare, Smartphone, Calendar, Gift, Scissors } from 'lucide-react';\n\ninterface AutomationRule {\n    id: string;\n    title: string;\n    description: string;\n    icon: any;\n    enabled: boolean;\n    channels: {\n        email: boolean;\n        whatsapp: boolean;\n        sms: boolean;\n    };\n}\n\nexport default function AutomationConfig() {\n    const [rules, setRules] = useState<AutomationRule[]>([\n        {\n            id: 'welcome',\n            title: 'Boas-vindas',\n            description: 'Enviar mensagem quando um novo cliente se cadastrar.',\n            icon: Gift,\n            enabled: true,\n            channels: { email: true, whatsapp: true, sms: false },\n        },\n        {\n            id: 'reminder',\n            title: 'Lembrete de Corte',\n            description: 'Avisar 24h antes do agendamento.',\n            icon: Calendar,\n            enabled: true,\n            channels: { email: true, whatsapp: true, sms: true },\n        },\n        {\n            id: 'return',\n            title: 'Reconvoca√ß√£o',\n            description: 'Sugerir novo corte ap√≥s 30 dias sem visita.',\n            icon: Scissors,\n            enabled: false,\n            channels: { email: true, whatsapp: false, sms: false },\n        },\n        {\n            id: 'birthday',\n            title: 'Anivers√°rio',\n            description: 'Enviar parab√©ns e cupom de desconto.',\n            icon: Gift,\n            enabled: true,\n            channels: { email: true, whatsapp: true, sms: false },\n        },\n    ]);\n\n    const toggleRule = (id: string) => {\n        setRules(rules.map(rule =>\n            rule.id === id ? { ...rule, enabled: !rule.enabled } : rule\n        ));\n    };\n\n    const toggleChannel = (id: string, channel: 'email' | 'whatsapp' | 'sms') => {\n        setRules(rules.map(rule =>\n            rule.id === id ? {\n                ...rule,\n                channels: { ...rule.channels, [channel]: !rule.channels[channel] }\n            } : rule\n        ));\n    };\n\n    return (\n        <div className=\"grid grid-cols-1 gap-4\">\n            {rules.map((rule) => {\n                const Icon = rule.icon;\n                return (\n                    <div key={rule.id} className={`bg-slate-800 p-6 rounded-2xl border transition-all ${rule.enabled ? 'border-blue-900/50 shadow-sm' : 'border-slate-700 opacity-75'}`}>\n                        <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                            <div className=\"flex items-start gap-4\">\n                                <div className={`w-12 h-12 rounded-xl flex items-center justify-center shrink-0 ${rule.enabled ? 'bg-blue-500/10 text-blue-400' : 'bg-slate-700 text-slate-500'}`}>\n                                    <Icon size={24} />\n                                </div>\n                                <div>\n                                    <div className=\"flex items-center gap-3 mb-1\">\n                                        <h3 className=\"font-bold text-slate-100\">{rule.title}</h3>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={rule.enabled}\n                                                onChange={() => toggleRule(rule.id)}\n                                            />\n                                            <div className=\"w-9 h-5 bg-slate-600 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600\"></div>\n                                        </label>\n                                    </div>\n                                    <p className=\"text-sm text-slate-400\">{rule.description}</p>\n                                </div>\n                            </div>\n\n                            {rule.enabled && (\n                                <div className=\"flex items-center gap-2 pl-16 md:pl-0\">\n                                    <button\n                                        onClick={() => toggleChannel(rule.id, 'email')}\n                                        className={`p-2 rounded-lg border transition-colors ${rule.channels.email ? 'bg-blue-500/10 border-blue-500/20 text-blue-400' : 'bg-slate-700/50 border-slate-600 text-slate-500 hover:text-slate-300'}`}\n                                        title=\"Email\"\n                                    >\n                                        <Mail size={18} />\n                                    </button>\n                                    <button\n                                        onClick={() => toggleChannel(rule.id, 'whatsapp')}\n                                        className={`p-2 rounded-lg border transition-colors ${rule.channels.whatsapp ? 'bg-green-500/10 border-green-500/20 text-green-400' : 'bg-slate-700/50 border-slate-600 text-slate-500 hover:text-slate-300'}`}\n                                        title=\"WhatsApp\"\n                                    >\n                                        <MessageSquare size={18} />\n                                    </button>\n                                    <button\n                                        onClick={() => toggleChannel(rule.id, 'sms')}\n                                        className={`p-2 rounded-lg border transition-colors ${rule.channels.sms ? 'bg-purple-500/10 border-purple-500/20 text-purple-400' : 'bg-slate-700/50 border-slate-600 text-slate-500 hover:text-slate-300'}`}\n                                        title=\"SMS\"\n                                    >\n                                        <Smartphone size={18} />\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                );\n            })}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/ContactSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Mail' is defined but never used.","line":4,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":4,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Facebook' is defined but never used.","line":4,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { MapPin, Phone, Mail, Clock, Instagram, Facebook, MessageCircle, MessageSquare } from 'lucide-react';\nimport EditableText from '@/components/ui/EditableText';\n\ninterface ContactSectionProps {\n    contact: {\n        phone: string;\n        address: string;\n        instagram?: string;\n        whatsapp: string;\n        email?: string;\n    };\n    isEditing?: boolean;\n    onUpdate?: (field: 'phone' | 'address' | 'instagram' | 'whatsapp' | 'email', value: string) => void;\n}\n\nexport default function ContactSection({ contact, isEditing, onUpdate }: ContactSectionProps) {\n    const handleWhatsAppClick = () => {\n        if (isEditing) return;\n        const message = encodeURIComponent(\"Ol√°, gostaria de tirar uma d√∫vida.\");\n        window.open(`https://wa.me/${contact.whatsapp}?text=${message}`, '_blank');\n    };\n\n    return (\n\n        <section className=\"py-24 relative border-t border-[var(--color-primary)]/10\" style={{ backgroundColor: 'var(--color-bg)' }}>\n            <div className=\"container mx-auto px-6 max-w-5xl\">\n                <motion.div\n                    initial={{ opacity: 0, y: 20 }}\n                    whileInView={{ opacity: 1, y: 0 }}\n                    viewport={{ once: true }}\n                    className=\"text-center mb-16\"\n                >\n                    <h2 className=\"text-4xl md:text-5xl font-bold mb-4 text-[var(--color-primary)]\">Fale Conosco</h2>\n                    <p className=\"max-w-2xl mx-auto opacity-70 text-[var(--color-text)]\">\n                        Tem alguma d√∫vida ou precisa de mais informa√ß√µes? Entre em contato conosco atrav√©s de um dos canais abaixo.\n                    </p>\n                </motion.div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-12 items-center\">\n                    <motion.div\n                        initial={{ opacity: 0, x: -30 }}\n                        whileInView={{ opacity: 1, x: 0 }}\n                        viewport={{ once: true }}\n                        className=\"space-y-8\"\n                    >\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"w-12 h-12 rounded-full flex items-center justify-center text-[var(--color-bg)] bg-[var(--color-primary)]\">\n                                <Phone size={24} />\n                            </div>\n                            <div>\n                                <p className=\"text-sm font-medium opacity-60 text-[var(--color-text)]\">Telefone</p>\n                                <EditableText\n                                    as=\"p\"\n                                    isEditing={!!isEditing}\n                                    value={contact.phone}\n                                    onChange={(val) => onUpdate?.('phone', val)}\n                                    className=\"font-bold text-[var(--color-text)]\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"w-12 h-12 rounded-full flex items-center justify-center text-[var(--color-bg)] bg-[var(--color-primary)]\">\n                                <MapPin size={24} />\n                            </div>\n                            <div>\n                                <p className=\"text-sm font-medium opacity-60 text-[var(--color-text)]\">Endere√ßo</p>\n                                <EditableText\n                                    as=\"p\"\n                                    isEditing={!!isEditing}\n                                    value={contact.address}\n                                    onChange={(val) => onUpdate?.('address', val)}\n                                    className=\"font-bold text-[var(--color-text)]\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"w-12 h-12 rounded-full flex items-center justify-center text-[var(--color-bg)] bg-[var(--color-primary)]\">\n                                <Instagram size={24} />\n                            </div>\n                            <div>\n                                <p className=\"text-sm font-medium opacity-60 text-[var(--color-text)]\">Instagram</p>\n                                <div className=\"flex items-center font-bold text-[var(--color-text)]\">\n                                    @\n                                    <EditableText\n                                        as=\"span\"\n                                        isEditing={!!isEditing}\n                                        value={contact.instagram || ''}\n                                        onChange={(val) => onUpdate?.('instagram', val)}\n                                        placeholder=\"seu_instagram\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-4\">\n                            <div className=\"w-12 h-12 rounded-full flex items-center justify-center text-[var(--color-bg)] bg-[var(--color-primary)]\">\n                                <MessageSquare size={24} />\n                            </div>\n                            <div>\n                                <p className=\"text-sm font-medium opacity-60 text-[var(--color-text)]\">WhatsApp</p>\n                                <EditableText\n                                    as=\"p\"\n                                    isEditing={!!isEditing}\n                                    value={contact.whatsapp}\n                                    onChange={(val) => onUpdate?.('whatsapp', val)}\n                                    className=\"font-bold text-[var(--color-text)]\"\n                                />\n                            </div>\n                        </div>\n                    </motion.div>\n\n                    <motion.div\n                        initial={{ opacity: 0, x: 30 }}\n                        whileInView={{ opacity: 1, x: 0 }}\n                        viewport={{ once: true }}\n                        className=\"p-8 rounded-2xl border text-center border-[var(--color-primary)]/20 bg-[var(--color-text)]/5\"\n                    >\n                        <MessageCircle size={48} className=\"mx-auto mb-6 text-[var(--color-primary)]\" />\n                        <h3 className=\"text-2xl font-bold mb-4 text-[var(--color-text)]\">D√∫vidas R√°pidas?</h3>\n                        <p className=\"mb-8 opacity-70 text-[var(--color-text)]\">\n                            Fale diretamente conosco pelo WhatsApp. Respondemos o mais r√°pido poss√≠vel.\n                        </p>\n                        <button\n                            onClick={handleWhatsAppClick}\n                            disabled={isEditing}\n                            className={`\n                                w-full py-4 font-bold rounded-lg transition-colors flex items-center justify-center gap-2\n                                text-[var(--color-bg)] bg-[var(--color-primary)] hover:opacity-90\n                                ${isEditing ? 'opacity-50 cursor-not-allowed' : ''}\n                            `}\n                        >\n                            <MessageCircle size={20} />\n                            Chamar no WhatsApp\n                        </button>\n                    </motion.div>\n                </div>\n            </div>\n        </section>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/FAQSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/FeaturesMenu.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":81,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":81,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronDown, Check, Zap, Star, Briefcase, Scissors } from 'lucide-react';\nimport Link from 'next/link';\n\nexport default function FeaturesMenu() {\n    const [isOpen, setIsOpen] = useState(false);\n\n    const plans = [\n        {\n            name: 'Starter',\n            icon: Scissors,\n            color: 'text-slate-600',\n            bgColor: 'bg-slate-100',\n            features: [\n                'Site Profissional',\n                'Hospedagem Inclusa',\n                'Agendamento WhatsApp',\n                'Design Responsivo'\n            ]\n        },\n        {\n            name: 'Pro',\n            icon: Star,\n            color: 'text-blue-600',\n            bgColor: 'bg-blue-50',\n            features: [\n                'Agendamento Online',\n                'Gest√£o de Clientes',\n                'Lembretes Autom√°ticos',\n                'SEO Local Otimizado',\n                'Dom√≠nio Pr√≥prio'\n            ]\n        },\n        {\n            name: 'Empire',\n            icon: Briefcase,\n            color: 'text-purple-600',\n            bgColor: 'bg-purple-50',\n            features: [\n                'M√∫ltiplos Profissionais',\n                'Gest√£o Financeira',\n                'Venda de Produtos',\n                'Fidelidade Digital',\n                'Relat√≥rios Avan√ßados'\n            ]\n        }\n    ];\n\n    return (\n        <div\n            className=\"relative\"\n            onMouseEnter={() => setIsOpen(true)}\n            onMouseLeave={() => setIsOpen(false)}\n        >\n            <button\n                className=\"flex items-center gap-1 hover:text-blue-600 transition-colors py-4\"\n                onClick={() => setIsOpen(!isOpen)}\n            >\n                Funcionalidades\n                <ChevronDown\n                    size={16}\n                    className={`transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`}\n                />\n            </button>\n\n            <AnimatePresence>\n                {isOpen && (\n                    <motion.div\n                        initial={{ opacity: 0, y: 10 }}\n                        animate={{ opacity: 1, y: 0 }}\n                        exit={{ opacity: 0, y: 10 }}\n                        transition={{ duration: 0.2 }}\n                        className=\"absolute top-full left-1/2 -translate-x-1/2 w-[600px] bg-white rounded-xl shadow-xl border border-slate-100 p-6 z-50 overflow-hidden\"\n                    >\n                        <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-slate-200 via-blue-500 to-purple-500\"></div>\n\n                        <div className=\"grid grid-cols-3 gap-6\">\n                            {plans.map((plan, index) => (\n                                <div key={plan.name} className=\"space-y-4\">\n                                    <div className=\"flex items-center gap-2 mb-2\">\n                                        <div className={`w-8 h-8 rounded-lg ${plan.bgColor} ${plan.color} flex items-center justify-center`}>\n                                            <plan.icon size={16} />\n                                        </div>\n                                        <h3 className=\"font-bold text-slate-900\">{plan.name}</h3>\n                                    </div>\n\n                                    <ul className=\"space-y-2\">\n                                        {plan.features.map((feature, i) => (\n                                            <li key={i} className=\"flex items-start gap-2 text-xs text-slate-500\">\n                                                <Check size={12} className=\"text-green-500 mt-0.5\" />\n                                                <span>{feature}</span>\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            ))}\n                        </div>\n\n                        <div className=\"mt-6 pt-4 border-t border-slate-100 flex justify-between items-center\">\n                            <div className=\"text-xs text-slate-400\">\n                                <span className=\"font-medium text-slate-600\">Dica:</span> Compare todos os planos na se√ß√£o de pre√ßos.\n                            </div>\n                            <Link href=\"/register\" className=\"text-xs font-bold text-blue-600 hover:text-blue-700 flex items-center gap-1\">\n                                Ver tabela completa <Zap size={12} />\n                            </Link>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/FeaturesSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Store' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Smartphone' is defined but never used.","line":4,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Crown' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":4,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":4,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":51,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":51,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1899,1902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1899,1902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { motion } from 'framer-motion';\nimport { Store, Smartphone, Crown, TrendingUp, Zap, Shield, Calendar, Bell, Package, CircleDollarSign } from 'lucide-react';\n\nexport default function FeaturesSection() {\n    const features = [\n        {\n            icon: Calendar,\n            title: \"Agenda Inteligente\",\n            description: \"Seu cliente marca, voc√™ recebe. Sem conflito de hor√°rios.\",\n            delay: 0.1\n        },\n        {\n            icon: Bell,\n            title: \"Notifica√ß√µes Autom√°ticas\",\n            description: \"Reduza faltas com lembretes autom√°ticos no WhatsApp.\",\n            delay: 0.2\n        },\n        {\n            icon: Package,\n            title: \"Controle de Estoque\",\n            description: \"Saiba exatamente quando repor pomadas e shampoos.\",\n            delay: 0.3\n        },\n        {\n            icon: CircleDollarSign,\n            title: \"Custo Acess√≠vel\",\n            description: \"O sistema mais completo pelo melhor custo-benef√≠cio do mercado.\",\n            delay: 0.4\n        }\n    ];\n\n    return (\n        <section id=\"features\" className=\"w-full py-24 bg-slate-950 relative overflow-hidden\">\n            {/* Background Gradients */}\n            <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-blue-900/20 rounded-full blur-[128px] pointer-events-none\"></div>\n            <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-900/10 rounded-full blur-[128px] pointer-events-none\"></div>\n\n            <div className=\"container mx-auto px-6 relative z-10\">\n                <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n                    {features.map((feature, index) => (\n                        <FeatureCard key={index} {...feature} />\n                    ))}\n                </div>\n            </div>\n        </section>\n    );\n}\n\nfunction FeatureCard({ icon: Icon, title, description, delay }: { icon: any, title: string, description: string, delay: number }) {\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            whileInView={{ opacity: 1, y: 0 }}\n            viewport={{ once: true }}\n            transition={{ duration: 0.5, delay }}\n            whileHover={{ y: -5 }}\n            className=\"group p-8 rounded-3xl bg-slate-900/50 backdrop-blur-sm border border-white/10 hover:border-blue-500/30 hover:bg-slate-900/80 transition-all duration-300 shadow-xl\"\n        >\n            <div className=\"w-14 h-14 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-blue-500/20 group-hover:scale-110 transition-transform duration-300\">\n                <Icon size={28} className=\"text-white\" />\n            </div>\n\n            <h3 className=\"text-xl font-bold text-white mb-4 group-hover:text-blue-400 transition-colors\">\n                {title}\n            </h3>\n\n            <p className=\"text-slate-400 leading-relaxed group-hover:text-slate-300 transition-colors\">\n                {description}\n            </p>\n        </motion.div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/Footer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { BarbershopData } from '@/types/barbershop';\nimport { MapPin, Phone, Instagram } from 'lucide-react';\nimport EditableText from '@/components/ui/EditableText';\nimport { clsx } from 'clsx';\n\ninterface FooterProps {\n    data: BarbershopData;\n    isEditing?: boolean;\n    onUpdate?: (data: BarbershopData) => void;\n    templateId?: string;\n}\n\nexport default function Footer({ data, isEditing, onUpdate, templateId = 'classic' }: FooterProps) {\n    const { name, contact } = data;\n    const isModern = templateId === 'modern';\n    const isUrban = templateId === 'urban';\n\n    // Handler for updating nested contact info\n    const updateContact = (field: keyof typeof contact, value: string) => {\n        if (onUpdate) {\n            onUpdate({\n                ...data,\n                contact: {\n                    ...contact,\n                    [field]: value\n                }\n            });\n        }\n    };\n\n    // --- CLASSIC FOOTER ---\n    if (!isModern && !isUrban) {\n        return (\n            <footer className=\"bg-black py-20 px-6 border-t border-[var(--color-primary)]/30 font-serif\">\n                <div className=\"container mx-auto max-w-4xl text-center\">\n                    <h2 className=\"text-3xl font-serif text-[var(--color-primary)] mb-8\">{name}</h2>\n\n                    <div className=\"flex flex-col md:flex-row justify-center gap-12 mb-12 text-white/80 font-sans tracking-wide\">\n                        <div className=\"flex items-center justify-center gap-3\">\n                            <Phone className=\"w-5 h-5 text-[var(--color-primary)]\" />\n                            <EditableText\n                                as=\"span\"\n                                isEditing={!!isEditing}\n                                value={contact.phone}\n                                onChange={(val) => updateContact('phone', val)}\n                            />\n                        </div>\n                        <div className=\"flex items-center justify-center gap-3\">\n                            <MapPin className=\"w-5 h-5 text-[var(--color-primary)]\" />\n                            <EditableText\n                                as=\"span\"\n                                isEditing={!!isEditing}\n                                value={contact.address}\n                                onChange={(val) => updateContact('address', val)}\n                            />\n                        </div>\n                        <div className=\"flex items-center justify-center gap-3\">\n                            <Instagram className=\"w-5 h-5 text-[var(--color-primary)]\" />\n                            <span>@{(name || \"barbearia\").replace(/\\s+/g, '').toLowerCase()}</span>\n                        </div>\n                    </div>\n\n                    <p className=\"text-[var(--color-primary)]/30 text-xs tracking-widest uppercase\">\n                        ¬© {new Date().getFullYear()} {name}. All rights reserved.\n                    </p>\n                </div>\n            </footer>\n        );\n    }\n\n    // --- URBAN FOOTER ---\n    if (isUrban) {\n        return (\n            <footer id=\"location\" className=\"bg-[#080808] border-t border-[var(--color-text)]/5 pt-24 pb-12 px-6 font-mono\">\n                <div className=\"container mx-auto\">\n                    <div className=\"grid md:grid-cols-2 gap-16 mb-24\">\n                        <div>\n                            <h2 className=\"text-4xl font-black text-[var(--color-text)] uppercase mb-8\">\n                                <span className=\"text-[var(--color-primary)]\">‚ö°</span> {name}\n                            </h2>\n                            <p className=\"text-gray-400 max-w-sm mb-12\">\n                                O ponto de encontro para quem busca excel√™ncia, estilo e uma experi√™ncia √∫nica.\n                            </p>\n                            <div className=\"space-y-4\">\n                                <div className=\"flex items-center gap-4 text-gray-300\">\n                                    <MapPin className=\"text-[var(--color-primary)]\" />\n                                    <EditableText\n                                        as=\"span\"\n                                        isEditing={!!isEditing}\n                                        value={contact.address}\n                                        onChange={(val) => updateContact('address', val)}\n                                    />\n                                </div>\n                                <div className=\"flex items-center gap-4 text-gray-300\">\n                                    <Phone className=\"text-[var(--color-primary)]\" />\n                                    <EditableText\n                                        as=\"span\"\n                                        isEditing={!!isEditing}\n                                        value={contact.phone}\n                                        onChange={(val) => updateContact('phone', val)}\n                                    />\n                                </div>\n                                <div className=\"flex items-center gap-4 text-gray-300\">\n                                    <Instagram className=\"text-[var(--color-primary)]\" />\n                                    <div className=\"flex\">\n                                        <span>@</span>\n                                        <EditableText\n                                            as=\"span\"\n                                            isEditing={!!isEditing}\n                                            value={contact.instagram ?? \"barbearia\"}\n                                            onChange={(val) => updateContact('instagram', val)}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div className=\"flex items-center justify-center md:justify-end\">\n                            <div className=\"text-center\">\n                                <h3 className=\"text-2xl font-bold text-[var(--color-text)] mb-6 uppercase\">Pronto para Mudar?</h3>\n                                {/* Simple Call to Action removed for simplicity or add functionality if needed */}\n                                <div className=\"bg-[var(--color-primary)] text-black font-black uppercase tracking-wider py-4 px-8 inline-block select-none cursor-not-allowed opacity-80\">\n                                    Agende Online\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"border-t border-white/5 pt-8 text-center text-gray-600 text-sm\">\n                        <p>&copy; {new Date().getFullYear()} {name}. Todos os direitos reservados.</p>\n                    </div>\n                </div>\n            </footer>\n        );\n    }\n\n    // --- MODERN FOOTER ---\n    return (\n        <footer id=\"location\" className=\"bg-black text-white pt-24 pb-12 px-6 font-sans\">\n            <div className=\"max-w-[1800px] mx-auto flex flex-col items-center text-center\">\n                <div className=\"mb-12\">\n                    <h2 className=\"text-3xl font-bold tracking-tight mb-2\">{name}</h2>\n                    <p className=\"text-gray-500 text-sm tracking-widest uppercase\">Barbearia Premium</p>\n                </div>\n\n                <div className=\"flex flex-col md:flex-row gap-12 md:gap-24 mb-24\">\n                    <div className=\"flex flex-col items-center gap-2\">\n                        <div className=\"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center mb-2\">\n                            <MapPin size={20} />\n                        </div>\n                        <h3 className=\"text-xs font-bold uppercase tracking-widest text-gray-500\">Endere√ßo</h3>\n                        <EditableText\n                            as=\"span\"\n                            isEditing={!!isEditing}\n                            value={contact.address}\n                            onChange={(val) => updateContact('address', val)}\n                            className=\"text-lg\"\n                        />\n                    </div>\n\n                    <div className=\"flex flex-col items-center gap-2\">\n                        <div className=\"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center mb-2\">\n                            <Phone size={20} />\n                        </div>\n                        <h3 className=\"text-xs font-bold uppercase tracking-widest text-gray-500\">Contato</h3>\n                        <EditableText\n                            as=\"span\"\n                            isEditing={!!isEditing}\n                            value={contact.phone}\n                            onChange={(val) => updateContact('phone', val)}\n                            className=\"text-lg\"\n                        />\n                    </div>\n\n                    <div className=\"flex flex-col items-center gap-2\">\n                        <div className=\"w-12 h-12 rounded-full bg-white/10 flex items-center justify-center mb-2\">\n                            <Instagram size={20} />\n                        </div>\n                        <h3 className=\"text-xs font-bold uppercase tracking-widest text-gray-500\">Social</h3>\n                        <div className=\"text-lg\">\n                            @{contact.instagram || 'barbearia'}\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"text-xs text-gray-700 uppercase tracking-widest\">\n                    ¬© {new Date().getFullYear()} {name}. Powered by BarberSaaS.\n                </div>\n            </div>\n        </footer>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/FooterSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/HeroSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/HeroSectionParallax.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[436,439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[436,439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useRef } from 'react';\nimport { motion, useScroll, useTransform } from 'framer-motion';\nimport { ArrowRight } from 'lucide-react';\nimport EditableText from '@/components/ui/EditableText';\nimport EditableImage from '@/components/ui/EditableImage';\n\ninterface HeroSectionParallaxProps {\n    name: string;\n    description: string;\n    heroImage: string;\n    isEditing: boolean;\n    onUpdate: (field: string, value: any) => void;\n    onBooking: () => void;\n    enableParallax?: boolean;\n}\n\nexport default function HeroSectionParallax({\n    name,\n    description,\n    heroImage,\n    isEditing,\n    onUpdate,\n    onBooking,\n    enableParallax = true\n}: HeroSectionParallaxProps) {\n    const ref = useRef(null);\n    const { scrollYProgress } = useScroll({\n        target: ref,\n        offset: [\"start start\", \"end start\"]\n    });\n\n    // Refined Parallax Speeds: Background moves slower (20%), Foreground moves faster (100% relative to scroll)\n    // If enableParallax is false, we set the range to [\"0%\", \"0%\"] to disable movement\n    const backgroundY = useTransform(scrollYProgress, [0, 1], [\"0%\", enableParallax ? \"20%\" : \"0%\"]);\n    const textY = useTransform(scrollYProgress, [0, 1], [\"0%\", enableParallax ? \"50%\" : \"0%\"]);\n\n    return (\n        <div ref={ref} className=\"relative h-screen overflow-hidden flex items-center justify-center bg-black\">\n            {/* Parallax Background */}\n            <motion.div\n                style={{ y: backgroundY }}\n                className=\"absolute inset-0 z-0 will-change-transform\"\n            >\n                <div className=\"absolute inset-0 bg-gradient-to-b from-black/70 via-black/50 to-black/90 z-10 pointer-events-none\" />\n                <EditableImage\n                    src={heroImage}\n                    alt=\"Hero Background\"\n                    onUpload={(url) => onUpdate('hero_image', url)}\n                    isEditing={isEditing}\n                    className=\"w-full h-[120%] object-cover opacity-80\"\n                    containerClassName=\"w-full h-full\"\n                />\n            </motion.div>\n\n            {/* Content */}\n            <div className=\"relative z-20 container mx-auto px-6 text-center text-white\">\n                <motion.div\n                    initial={{ opacity: 0, y: 100 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ duration: 1.5, ease: \"easeOut\" }}\n                    style={{ y: textY }}\n                    className=\"will-change-transform\"\n                >\n                    <div className=\"mb-6 flex justify-center\">\n                        <div className=\"w-24 h-1 bg-[var(--color-primary)]\" />\n                    </div>\n\n                    <div className=\"relative inline-block mb-6\">\n                        <EditableText\n                            as=\"h1\"\n                            isEditing={isEditing}\n                            value={name}\n                            onChange={(val) => onUpdate('name', val)}\n                            className=\"text-5xl md:text-8xl font-serif font-bold tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-[var(--color-primary)] via-white to-[var(--color-primary)] bg-[length:200%_auto] animate-shine\"\n                        />\n                    </div>\n\n                    <EditableText\n                        as=\"p\"\n                        isEditing={isEditing}\n                        value={description}\n                        onChange={(val) => onUpdate('description', val)}\n                        className=\"text-xl md:text-2xl font-light tracking-widest uppercase mb-12 max-w-3xl mx-auto text-gray-200\"\n                    />\n\n                    <motion.button\n                        whileHover={{ scale: 1.05, filter: \"brightness(1.1)\" }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={onBooking}\n                        disabled={isEditing}\n                        className={`\n                            bg-[var(--color-primary)] text-black px-10 py-4 text-sm font-bold uppercase tracking-[0.2em] \n                            transition-all duration-300 border border-[var(--color-primary)] shadow-[0_0_20px_rgba(255,255,255,0.1)]\n                            ${isEditing ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\n                        `}\n                    >\n                        Agendar Hor√°rio\n                    </motion.button>\n                </motion.div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/MarketingStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/MobileMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/PricingSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/ServiceCard3D.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/ServiceCardClassic.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/ServiceCardGlass.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/components/TemplatesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/hooks/useFeatureAccess.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/schemas/campaignSchema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/marketing/services/campaignService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2084,2087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2084,2087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport { Client } from \"@/features/crm/types\";\nimport { CampaignFormValues } from \"../schemas/campaignSchema\";\n\n// Use the inferred type from Zod schema directly for arguments\nexport type CampaignData = CampaignFormValues;\n\nexport interface TriggerResponse {\n    success: boolean;\n    message: string;\n    id?: string;\n}\n\nexport const triggerCampaign = async (\n    campaign: CampaignData,\n    recipients: Client[]\n): Promise<TriggerResponse> => {\n    // This URL would typically come from an environment variable\n    // e.g. process.env.NEXT_PUBLIC_CAMPAIGN_WEBHOOK_URL\n    const WEBHOOK_URL = process.env.NEXT_PUBLIC_CAMPAIGN_WEBHOOK_URL || \"https://hook.n8n.cloud/webhook/test-campaign-trigger\";\n\n    const payload = {\n        campaign: {\n            ...campaign,\n            triggeredAt: new Date().toISOString(),\n            recipientCount: recipients.length\n        },\n        recipients: recipients.map(client => ({\n            id: client.id,\n            name: client.name,\n            phone: client.phone,\n            status: client.status,\n            totalSpend: client.totalSpend,\n            lastVisit: client.lastVisit ? client.lastVisit.toISOString() : null\n        }))\n    };\n\n    try {\n        const response = await fetch(WEBHOOK_URL, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(payload)\n        });\n\n        if (!response.ok) {\n            // Even if the webhook fails (404 etc), we might want to handle it gracefully\n            // or throw to show an error to the user.\n            console.warn(`Webhook responded with status ${response.status}`);\n            // For now, let's treat non-2xx as error\n            throw new Error(`Falha ao disparar campanha: ${response.statusText}`);\n        }\n\n        const data = await response.json().catch(() => ({ success: true })); // Handle empty responses\n\n        return {\n            success: true,\n            message: \"Campanha disparada com sucesso!\",\n            id: data.id\n        };\n\n    } catch (error: any) {\n        console.error(\"Error triggering campaign:\", error);\n        return {\n            success: false,\n            message: error.message || \"Erro desconhecido ao conectar com o servi√ßo de disparos.\"\n        };\n    }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/hooks/useNotificationSettings.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'z' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":11},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2626,2629],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2626,2629],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3436,3439],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3436,3439],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport { NotificationSettings, NotificationSettingsSchema } from \"../types\";\nimport { z } from \"zod\";\n\nconst DEFAULT_SETTINGS: NotificationSettings = {\n    channels: { whatsapp: true, email: true },\n    triggers: {\n        reminder24h: true,\n        birthday: true,\n        winBack: { enabled: true, daysInactive: 30 }\n    }\n};\n\nexport const useNotificationSettings = (barberId: string | undefined) => {\n    const [settings, setSettings] = useState<NotificationSettings | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        if (!barberId) {\n            setLoading(false);\n            return;\n        }\n\n        const fetchSettings = async () => {\n            try {\n                setLoading(true);\n                const docRef = doc(db, \"barbershops\", barberId);\n                const docSnap = await getDoc(docRef);\n\n                if (docSnap.exists()) {\n                    const data = docSnap.data();\n                    // Extract only notification settings if nested, assuming root for now based on req\n                    // Adjusting based on requirement \"Interface NotificationSettings (dentro do documento do Barbeiro)\"\n                    // It's likely a field 'notificationSettings' inside the barber document or mixed fields.\n                    // Let's assume it's stored in a field called 'notificationSettings' for cleaner separation,\n                    // OR we can assume the barber document *implements* it.\n                    // Given constraints, I'll look for a 'notificationSettings' field, or fallback to default.\n\n                    const settingsData = data.notificationSettings || {};\n\n                    // Validate and parse, falling back to defaults for missing fields\n                    const result = NotificationSettingsSchema.safeParse({\n                        ...DEFAULT_SETTINGS,\n                        ...settingsData\n                    });\n\n                    if (result.success) {\n                        setSettings(result.data);\n                    } else {\n                        console.error(\"Invalid notification settings:\", result.error);\n                        setSettings(DEFAULT_SETTINGS); // Fallback safe\n                    }\n                } else {\n                    // Barber not found? Or just no settings yet.\n                    setSettings(DEFAULT_SETTINGS);\n                }\n            } catch (err: any) {\n                setError(err.message || \"Failed to load settings\");\n                setSettings(DEFAULT_SETTINGS);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchSettings();\n    }, [barberId]);\n\n    const updateSettings = async (newSettings: Partial<NotificationSettings>) => {\n        if (!barberId || !settings) return;\n\n        try {\n            const mergedSettings = { ...settings, ...newSettings };\n            const result = NotificationSettingsSchema.parse(mergedSettings); // Strict check before save\n\n            const docRef = doc(db, \"barbershops\", barberId);\n            await updateDoc(docRef, {\n                notificationSettings: result\n            });\n\n            setSettings(result);\n            return true;\n        } catch (err: any) {\n            console.error(\"Failed to update settings:\", err);\n            setError(err.message || \"Failed to update settings\");\n            return false;\n        }\n    };\n\n    return { settings, loading, error, updateSettings };\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/providers/ConsoleProvider.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":111,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":114,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[285,288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[285,288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":124,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":127,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[298,301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[298,301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[488,491],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[488,491],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NotificationChannel } from \"../types\";\nimport { NotificationProvider } from \"./NotificationProvider\";\n\nexport class ConsoleProvider implements NotificationProvider {\n    async send(to: string, message: string, channel: NotificationChannel): Promise<{ success: boolean; data?: any; error?: any }> {\n        console.log(`[ConsoleProvider] [${channel.toUpperCase()}] To: ${to} | Message: \"${message}\"`);\n        return { success: true };\n    }\n\n    async generateAiMessage(context: any): Promise<string> {\n        console.log(`[ConsoleProvider] Generating AI message with context:`, context);\n        return `[AI Generated] Hello ${context.customerName || 'Customer'}, this is a generated message.`;\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/providers/NotificationProvider.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":105,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":108,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[447,450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[447,450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":118,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":121,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[460,463],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[460,463],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[694,697],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[694,697],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NotificationChannel } from \"../types\";\n\nexport interface NotificationProvider {\n    /**\n     * Sends a message to a specific recipient.\n     * @param to The recipient's identifier (phone number, email, etc.)\n     * @param message The content of the message\n     * @param channel The channel to use ('whatsapp', 'email', etc.)\n     */\n    send(to: string, message: string, channel: NotificationChannel): Promise<{ success: boolean; data?: any; error?: any }>;\n\n    /**\n     * Generates a message using AI based on the provided context.\n     * @param context Contextual data for the AI to generate the message (e.g., customer name, service, date)\n     */\n    generateAiMessage?(context: any): Promise<string>;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/providers/WhatsAppProvider.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":111,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":114,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[624,627],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[624,627],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":124,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":127,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[637,640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[637,640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1588,1591],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1588,1591],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NotificationChannel } from \"../types\";\nimport { NotificationProvider } from \"./NotificationProvider\";\n\nexport class WhatsAppProvider implements NotificationProvider {\n    private apiUrl: string;\n    private apiKey: string;\n\n    constructor() {\n        // In a real scenario, these would come from environment variables or database config\n        this.apiUrl = process.env.WHATSAPP_API_URL || \"https://api.evolution-api.com/v1\";\n        this.apiKey = process.env.WHATSAPP_API_KEY || \"mock-api-key\";\n    }\n\n    async send(to: string, message: string, channel: NotificationChannel): Promise<{ success: boolean; data?: any; error?: any }> {\n        if (channel !== 'whatsapp') {\n            return { success: false, error: \"WhatsAppProvider only supports 'whatsapp' channel\" };\n        }\n\n        console.log(`[WhatsAppProvider] Preparing request to ${this.apiUrl}...`);\n\n        // Mocking the external API call\n        // In reality, this would be:\n        // const response = await fetch(`${this.apiUrl}/message/sendText`, {\n        //     method: 'POST',\n        //     headers: { 'apikey': this.apiKey, 'Content-Type': 'application/json' },\n        //     body: JSON.stringify({ number: to, text: message })\n        // });\n\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                console.log(`[WhatsAppProvider] üöÄ Sent to ${to}: \"${message}\"`);\n                resolve({ success: true, data: { status: \"SENT\", messageId: \"mock-id-123\" } });\n            }, 500); // Simulate network delay\n        });\n    }\n\n    async generateAiMessage(context: any): Promise<string> {\n        // Could integrate with OpenAI here in the future\n        return `Ol√° ${context.customerName}, aqui √© da Barbearia! Seu hor√°rio de ${context.serviceName} est√° confirmado para ${context.date}.`;\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/services/NotificationDispatcher.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":60,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2287,2290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2287,2290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from \"@/lib/firebase\";\nimport { collection, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { NotificationChannel, NotificationType } from \"../types\";\nimport { NotificationProvider } from \"../providers/NotificationProvider\";\nimport { ConsoleProvider } from \"../providers/ConsoleProvider\";\nimport { WhatsAppProvider } from \"../providers/WhatsAppProvider\";\n\nexport class NotificationDispatcher {\n    private providers: Record<NotificationChannel, NotificationProvider>;\n\n    constructor() {\n        // Initialize providers\n        // In the future, this could be dynamic based on feature flags or environment\n        this.providers = {\n            whatsapp: new WhatsAppProvider(),\n            email: new ConsoleProvider(), // Using Console for email for now as it wasn't requested in detail yet\n        };\n\n        // Allow overriding with ConsoleProvider for dev/testing if needed\n        if (process.env.NEXT_PUBLIC_USE_MOCK_NOTIFICATIONS === 'true') {\n            const consoleProvider = new ConsoleProvider();\n            this.providers.whatsapp = consoleProvider;\n            this.providers.email = consoleProvider;\n        }\n    }\n\n    /**\n     * Dispatches a notification to the specified channel and logs the result.\n     */\n    async dispatch(\n        params: {\n            barberId: string;\n            customerId: string;\n            to: string;\n            message: string;\n            channel: NotificationChannel;\n            type: NotificationType;\n        }\n    ): Promise<{ success: boolean; logId?: string; error?: string }> {\n        const { barberId, customerId, to, message, channel, type } = params;\n        const provider = this.providers[channel];\n\n        if (!provider) {\n            console.error(`[NotificationDispatcher] No provider found for channel: ${channel}`);\n            return { success: false, error: `No provider for channel ${channel}` };\n        }\n\n        let status: 'sent' | 'failed' = 'sent';\n        let errorMsg: string | undefined = undefined;\n\n        try {\n            // 1. Send via Provider\n            const result = await provider.send(to, message, channel);\n\n            if (!result.success) {\n                status = 'failed';\n                errorMsg = result.error;\n            }\n\n        } catch (err: any) {\n            console.error(`[NotificationDispatcher] Error sending notification:`, err);\n            status = 'failed';\n            errorMsg = err.message || 'Unknown error';\n        }\n\n        // 2. Log to Firestore\n        let logId: string | undefined;\n        try {\n            const docRef = await addDoc(collection(db, \"notification_logs\"), {\n                barberId,\n                customerId,\n                type,\n                channel,\n                sentAt: serverTimestamp(), // Uses server timestamp for consistency\n                status,\n                error: errorMsg || null,\n                // Metadata for easier debugging/tracking\n                recipient: to,\n                messageSnippet: message.slice(0, 50) + (message.length > 50 ? '...' : '')\n            });\n            logId = docRef.id;\n            console.log(`[NotificationDispatcher] Logged notification ${logId} with status ${status}`);\n\n        } catch (logErr) {\n            console.error(`[NotificationDispatcher] CRITICAL: Failed to log notification to Firestore`, logErr);\n            // We don't fail the whole operation just because logging failed, but this is critical for the requirement\n        }\n\n        return { success: status === 'sent', logId, error: errorMsg };\n    }\n}\n\n// Export a singleton instance for easier usage\nexport const notificationDispatcher = new NotificationDispatcher();\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/services/TemplateService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/services/settingsService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateDoc' is defined but never used.","line":1,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":40},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'db' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { doc, getDoc, setDoc, updateDoc } from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport { getNotificationSettingsRef } from \"@/lib/firebase/collections\";\nimport { NotificationSettings, NotificationSettingsSchema } from \"../types\";\n\nexport const DEFAULT_SETTINGS: NotificationSettings = {\n    channels: {\n        whatsapp: false,\n        email: false,\n    },\n    triggers: {\n        reminder24h: false,\n        birthday: false,\n        winBack: {\n            enabled: false,\n            daysInactive: 30,\n        },\n    },\n};\n\nexport class SettingsService {\n    /**\n     * Fetches notification settings for a specific barber.\n     * Returns default conservative settings if not found.\n     */\n    static async getSettings(barberId: string): Promise<NotificationSettings> {\n        try {\n            const docRef = doc(getNotificationSettingsRef(), barberId);\n            const docSnap = await getDoc(docRef);\n\n            if (docSnap.exists()) {\n                // Parse and validate with Zod to ensure type safety\n                const data = docSnap.data();\n                const result = NotificationSettingsSchema.safeParse(data);\n\n                if (result.success) {\n                    return result.data;\n                } else {\n                    console.warn(`[SettingsService] Invalid settings schema for ${barberId}, returning default.`, result.error);\n                    return DEFAULT_SETTINGS;\n                }\n            } else {\n                return DEFAULT_SETTINGS;\n            }\n        } catch (error) {\n            console.error(`[SettingsService] Error fetching settings for ${barberId}:`, error);\n            // Fail safe\n            return DEFAULT_SETTINGS;\n        }\n    }\n\n    /**\n     * Updates notification settings for a specific barber.\n     * Merges with existing data.\n     */\n    static async updateSettings(barberId: string, settings: Partial<NotificationSettings>): Promise<void> {\n        try {\n            // Validate the partial structure if possible, but Zod parse handles full objects well.\n            // For partial updates, we might need a partial schema or just trust the merge.\n            // A better approach for \"update\" is often to get current, merge, validate, then save.\n\n            // However, Firestore setDoc with merge: true handles deep merges.\n            // Let's validate the specific fields being sent if they are complete sub-objects, \n            // but for partial deep updates it's tricky. \n            // Simpler approach: We assume 'settings' passed here matches the Partial<NotificationSettings>\n            // and we rely on the implementation to be correct.\n\n            // To ensure we don't save garbage, let's try to validate loosely or just save.\n\n            const docRef = doc(getNotificationSettingsRef(), barberId);\n            await setDoc(docRef, settings, { merge: true });\n\n        } catch (error) {\n            console.error(`[SettingsService] Error updating settings for ${barberId}:`, error);\n            throw error;\n        }\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/test-dispatcher.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":32,"column":5,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":32,"endColumn":67,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1144,1206],"text":"// @ts-expect-error - Forcing invalid channel to test error handling"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1350,1353],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1350,1353],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notificationDispatcher } from \"./services/NotificationDispatcher\";\n\n// This file is intended to be run manually or imported in a temporary test route\nexport async function runTest() {\n    console.log(\"Starting Notification Dispatcher Test...\");\n\n    // Test 1: Send WhatsApp Message (Mock)\n    console.log(\"\\n--- Test 1: WhatsApp Mock ---\");\n    const result1 = await notificationDispatcher.dispatch({\n        barberId: \"barber_123\",\n        customerId: \"customer_456\",\n        to: \"5511999999999\",\n        message: \"Ol√°! Teste de integra√ß√£o do Dispatcher.\",\n        channel: \"whatsapp\",\n        type: \"reminder_24h\"\n    });\n    console.log(\"Result 1:\", result1);\n\n    // Test 2: Send Email (Console Provider)\n    console.log(\"\\n--- Test 2: Email Console ---\");\n    const result2 = await notificationDispatcher.dispatch({\n        barberId: \"barber_123\",\n        customerId: \"customer_456\",\n        to: \"cliente@email.com\",\n        message: \"Email de teste.\",\n        channel: \"email\",\n        type: \"win_back\"\n    });\n    console.log(\"Result 2:\", result2);\n\n    console.log(\"\\nUnknown Provider Test (Validating error handling):\");\n    // @ts-ignore - Forcing invalid channel to test error handling\n    const result3 = await notificationDispatcher.dispatch({\n        barberId: \"b1\", customerId: \"c1\", to: \"x\", message: \"x\", channel: \"sms\" as any, type: \"reminder_24h\"\n    });\n    console.log(\"Result 3:\", result3);\n\n    console.log(\"\\nTest Completed.\");\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/test-foundation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/notifications/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/orders/services/orderService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'doc' is defined but never used.","line":10,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'runTransaction' is defined but never used.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'OrderItem' is defined but never used.","line":13,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from \"@/lib/firebase\";\nimport {\n    collection,\n    addDoc,\n    query,\n    where,\n    getDocs,\n    serverTimestamp,\n    Timestamp,\n    doc,\n    runTransaction\n} from \"firebase/firestore\";\nimport { Order, OrderItem } from \"../types\";\n\nconst COLLECTION_NAME = \"orders\";\n\nexport const orderService = {\n    /**\n     * Creates a new order in Firestore.\n     * Use this when you are NOT in a transaction.\n     */\n    createOrder: async (orderData: Omit<Order, \"id\" | \"createdAt\">): Promise<Order> => {\n        try {\n            const docRef = await addDoc(collection(db, COLLECTION_NAME), {\n                ...orderData,\n                createdAt: serverTimestamp(),\n            });\n\n            return {\n                id: docRef.id,\n                ...orderData,\n                createdAt: new Date(),\n            };\n        } catch (error) {\n            console.error(\"Error creating order:\", error);\n            throw new Error(\"Failed to create order.\");\n        }\n    },\n\n    /**\n     * Gets orders for a specific barber.\n     */\n    getOrdersByBarber: async (barberId: string): Promise<Order[]> => {\n        try {\n            const q = query(\n                collection(db, COLLECTION_NAME),\n                where(\"barberId\", \"==\", barberId)\n            );\n\n            const querySnapshot = await getDocs(q);\n            const orders: Order[] = [];\n\n            querySnapshot.forEach((docSnap) => {\n                const data = docSnap.data();\n                const createdAt = data.createdAt instanceof Timestamp\n                    ? data.createdAt.toDate()\n                    : new Date();\n\n                orders.push({\n                    id: docSnap.id,\n                    barberId: data.barberId,\n                    customerEmail: data.customerEmail,\n                    customerName: data.customerName,\n                    items: data.items,\n                    total: data.total,\n                    status: data.status,\n                    stripeSessionId: data.stripeSessionId,\n                    createdAt: createdAt,\n                } as Order);\n            });\n\n            return orders.sort((a, b) => b.createdAt.getTime() - a.createdAt.getTime());\n        } catch (error) {\n            console.error(`Error fetching orders for barber ${barberId}:`, error);\n            throw new Error(\"Failed to fetch orders.\");\n        }\n    }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/orders/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/payments/services/paymentService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":8,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[261,264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[261,264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3342,3345],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3342,3345],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { stripe } from \"@/lib/stripe\";\nimport { dbAdmin } from \"@/lib/firebase-admin\"; // Server-side admin SDK\nimport { Timestamp, FieldValue } from \"firebase-admin/firestore\";\n\ninterface BarbershopData {\n    slug: string;\n    name: string;\n    [key: string]: any;\n}\n\nexport class PaymentService {\n    /**\n     * Verifies a Stripe session and creates a barbershop if payment is successful.\n     * This method is idempotent-ish: if the session was already processed, it should handle it (though strictly we rely on Stripe status).\n     */\n    static async verifyPaymentAndCreateBarbershop(sessionId: string) {\n        // 1. Validate Input\n        if (!sessionId) {\n            throw new Error(\"Session ID is required\");\n        }\n\n        // 2. Retrieve & Verify Stripe Session\n        // We strictly trust ONLY Stripe's API response, not client-provided data.\n        const session = await stripe.checkout.sessions.retrieve(sessionId);\n\n        if (session.payment_status !== \"paid\") {\n            throw new Error(`Payment not completed. Status: ${session.payment_status}`);\n        }\n\n        // 3. Extract Metadata\n        const userId = session.metadata?.userId;\n        const barbershopDataString = session.metadata?.barbershopData;\n\n        if (!userId || !barbershopDataString) {\n            throw new Error(\"Missing critical metadata in Stripe session\");\n        }\n\n        const barbershopData: BarbershopData = JSON.parse(barbershopDataString);\n\n        if (!barbershopData.slug) {\n            throw new Error(\"Invalid barbershop data: missing slug\");\n        }\n\n        // 4. Transactional Creation in Firestore\n        // We use runTransaction to ensure we don't overwrite if it already exists or handle specific logic.\n        // For simplicity in this logical block, we'll verify slug uniqueness inside the transaction if needed,\n        // or just rely on the fact that if payment passed, we *should* provision.\n\n        try {\n            const barbershopRef = dbAdmin.collection(\"barbershops\").doc(); // Auto-ID\n\n            // Check for existing slug to avoid duplicates (though simple unique check might be enough)\n            const slugQuery = await dbAdmin.collection(\"barbershops\")\n                .where(\"slug\", \"==\", barbershopData.slug)\n                .get();\n\n            let finalSlug = barbershopData.slug;\n            if (!slugQuery.empty) {\n                // Determine if this is a retry or a conflict. \n                // For now, as per original logic, append suffix to ensure provision success.\n                finalSlug = `${barbershopData.slug}-${Math.floor(Math.random() * 10000)}`;\n            }\n\n            const barbershopToSave = {\n                ...barbershopData,\n                slug: finalSlug,\n                id: barbershopRef.id,\n                ownerId: userId,\n                createdAt: FieldValue.serverTimestamp(),\n                status: \"active\",\n                stripeSessionId: sessionId,\n                isPublished: false,\n                products: barbershopData.products || [],\n                updatedAt: FieldValue.serverTimestamp(),\n            };\n\n            await barbershopRef.set(barbershopToSave);\n\n            return {\n                success: true,\n                barbershopId: barbershopRef.id,\n                slug: finalSlug\n            };\n\n        } catch (error: any) {\n            console.error(\"Firestore provisioning error:\", error);\n            throw new Error(\"Failed to provision barbershop in database\");\n        }\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/ImageUpload.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/ProductForm.tsx","messages":[{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/ProductForm.tsx:57:28\n  55 |                 <label className=\"text-sm font-medium text-slate-200\">Imagem do Produto</label>\n  56 |                 <ImageUpload\n> 57 |                     value={form.watch(\"imageUrl\")}\n     |                            ^^^^ React Hook Form's `useForm()` API returns a `watch()` function which cannot be memoized safely.\n  58 |                     onChange={(url) => form.setValue(\"imageUrl\", url)}\n  59 |                     disabled={isPending}\n  60 |                 />","line":57,"column":28,"nodeType":null,"endLine":57,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { productSchema, ProductFormValues } from \"../../schemas/productSchema\";\nimport { ImageUpload } from \"./ImageUpload\";\nimport { Loader2 } from \"lucide-react\";\nimport { useProductSubmit } from \"../../hooks/useProductSubmit\";\n\n// Simplified Toast for now - assume parent or global toast provider, or basic alert\n// Ideally use a UI library toast. I see \"Toast.tsx\" in context files, might use that later.\n\ninterface ProductFormProps {\n    initialData?: ProductFormValues & { id?: string };\n    barberId: string;\n    onSuccess?: () => void;\n}\n\nexport function ProductForm({ initialData, barberId, onSuccess }: ProductFormProps) {\n    const form = useForm<ProductFormValues>({\n        resolver: zodResolver(productSchema),\n        defaultValues: initialData || {\n            name: \"\",\n            description: \"\",\n            price: 0,\n            stock: 0,\n            imageUrl: \"\",\n            active: true,\n            category: \"Geral\",\n            barberId: barberId,\n        },\n    });\n\n    const { isPending, submitProduct } = useProductSubmit({\n        onSuccess: () => {\n            // Reset form only on creation, or handle logically. \n            // If editing, we might want to keep data or close modal.\n            // For now, mirroring previous behavior:\n            if (!initialData?.id) {\n                form.reset();\n            }\n            if (onSuccess) onSuccess();\n        },\n        initialDataId: initialData?.id\n    });\n\n    const onSubmit = (data: ProductFormValues) => {\n        submitProduct(data);\n    };\n\n    return (\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n            {/* Image Upload */}\n            <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-slate-200\">Imagem do Produto</label>\n                <ImageUpload\n                    value={form.watch(\"imageUrl\")}\n                    onChange={(url) => form.setValue(\"imageUrl\", url)}\n                    disabled={isPending}\n                />\n                {form.formState.errors.imageUrl && (\n                    <p className=\"text-sm text-red-500\">{form.formState.errors.imageUrl.message}</p>\n                )}\n            </div>\n\n            <div className=\"grid grid-cols-1 gap-6 md:grid-cols-2\">\n                {/* Name */}\n                <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium text-slate-200\">Nome</label>\n                    <input\n                        {...form.register(\"name\")}\n                        disabled={isPending}\n                        className=\"w-full rounded-md border border-slate-800 bg-slate-950 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                        placeholder=\"Ex: Pomada Modeladora\"\n                    />\n                    {form.formState.errors.name && (\n                        <p className=\"text-sm text-red-500\">{form.formState.errors.name.message}</p>\n                    )}\n                </div>\n\n                {/* Price */}\n                <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium text-slate-200\">Pre√ßo (R$)</label>\n                    <input\n                        type=\"number\"\n                        step=\"0.01\"\n                        {...form.register(\"price\", { valueAsNumber: true })}\n                        disabled={isPending}\n                        className=\"w-full rounded-md border border-slate-800 bg-slate-950 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                        placeholder=\"0.00\"\n                    />\n                    {form.formState.errors.price && (\n                        <p className=\"text-sm text-red-500\">{form.formState.errors.price.message}</p>\n                    )}\n                </div>\n\n                {/* Stock */}\n                <div className=\"space-y-2\">\n                    <label className=\"text-sm font-medium text-slate-200\">Estoque</label>\n                    <input\n                        type=\"number\"\n                        {...form.register(\"stock\", { valueAsNumber: true })}\n                        disabled={isPending}\n                        className=\"w-full rounded-md border border-slate-800 bg-slate-950 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                        placeholder=\"0\"\n                    />\n                    {form.formState.errors.stock && (\n                        <p className=\"text-sm text-red-500\">{form.formState.errors.stock.message}</p>\n                    )}\n                </div>\n\n                {/* Active Toggle */}\n                <div className=\"flex items-center space-x-3 space-y-2 pt-6\">\n                    <label className=\"relative inline-flex cursor-pointer items-center\">\n                        <input\n                            type=\"checkbox\"\n                            className=\"peer sr-only\"\n                            {...form.register(\"active\")}\n                            disabled={isPending}\n                        />\n                        <div className=\"peer h-6 w-11 rounded-full bg-slate-800 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300\"></div>\n                        <span className=\"ml-3 text-sm font-medium text-slate-200\">Produto Ativo</span>\n                    </label>\n                </div>\n            </div>\n\n            {/* Description */}\n            <div className=\"space-y-2\">\n                <label className=\"text-sm font-medium text-slate-200\">Descri√ß√£o</label>\n                <textarea\n                    {...form.register(\"description\")}\n                    disabled={isPending}\n                    rows={4}\n                    className=\"w-full rounded-md border border-slate-800 bg-slate-950 px-3 py-2 text-sm text-white placeholder:text-slate-400 focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600\"\n                    placeholder=\"Detalhes do produto...\"\n                />\n                {form.formState.errors.description && (\n                    <p className=\"text-sm text-red-500\">{form.formState.errors.description.message}</p>\n                )}\n            </div>\n\n            <button\n                type=\"submit\"\n                disabled={isPending}\n                className=\"w-full rounded-md bg-blue-600 py-2 text-sm font-semibold text-white shadow-lg shadow-blue-900/20 transition-all hover:bg-blue-700 disabled:opacity-50\"\n            >\n                {isPending ? (\n                    <span className=\"flex items-center justify-center gap-2\">\n                        <Loader2 className=\"h-4 w-4 animate-spin\" />\n                        {initialData?.id ? \"Salvando...\" : \"Criando...\"}\n                    </span>\n                ) : (\n                    initialData?.id ? \"Salvar Altera√ß√µes\" : \"Criar Produto\"\n                )}\n            </button>\n        </form>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/ProductList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/ProductManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'products' is assigned a value but never used.","line":19,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":62,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":76,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Product } from \"../../types\";\nimport { ProductForm } from \"./ProductForm\";\nimport { Modal } from \"@/components/ui/Modal\";\nimport ConfirmationModal from \"@/components/ui/ConfirmationModal\";\nimport { productService } from \"../../services/productService\"; // Client Service\nimport { Edit, Plus, Trash2, Package, AlertTriangle, RefreshCcw } from \"lucide-react\";\nimport Image from \"next/image\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\ninterface ProductManagerProps {\n    initialProducts: Product[];\n    barberId: string;\n}\n\nexport function ProductManager({ initialProducts, barberId }: ProductManagerProps) {\n    const [products, setProducts] = useState<Product[]>(initialProducts);\n\n    // Update local state when prop changes (e.g. after parent re-fetch)\n    useEffect(() => {\n        setProducts(initialProducts);\n    }, [initialProducts]);\n\n    const [isFormOpen, setIsFormOpen] = useState(false);\n    const [editingProduct, setEditingProduct] = useState<Product | undefined>(undefined);\n    const [deletingId, setDeletingId] = useState<string | null>(null);\n    const [isRestoring, setIsRestoring] = useState(false);\n    const { toast } = useToast();\n\n    const handleCreate = () => {\n        setEditingProduct(undefined);\n        setIsFormOpen(true);\n    };\n\n    const handleEdit = (product: Product) => {\n        setEditingProduct(product);\n        setIsFormOpen(true);\n    };\n\n    const handleDeleteClick = (id: string) => {\n        setDeletingId(id);\n    };\n\n    const refreshProducts = async () => {\n        try {\n            const latest = await productService.getProductsByBarberId(barberId);\n            setProducts(latest);\n        } catch (error) {\n            console.error(\"Failed to refresh products\", error);\n        }\n    };\n\n    const handleRestore = async () => {\n        if (confirm(\"Tem certeza? Isso ir√° adicionar os produtos padr√£o novamente.\")) {\n            setIsRestoring(true);\n            try {\n                await productService.seedProducts(barberId);\n                await refreshProducts();\n                toast({ title: \"Sucesso\", description: \"Produtos restaurados!\" });\n            } catch (error) {\n                toast({ title: \"Erro\", description: \"Falha ao restaurar produtos.\", variant: \"destructive\" });\n            } finally {\n                setIsRestoring(false);\n            }\n        }\n    };\n\n    const confirmDelete = async () => {\n        if (deletingId) {\n            try {\n                await productService.deleteProduct(deletingId);\n                setProducts((prev) => prev.filter((p) => p.id !== deletingId));\n                toast({ title: \"Sucesso\", description: \"Produto exclu√≠do!\" });\n            } catch (error) {\n                toast({ title: \"Erro\", description: \"Falha ao excluir produto.\", variant: \"destructive\" });\n            } finally {\n                setDeletingId(null);\n            }\n        }\n    };\n\n    const onFormSuccess = () => {\n        setIsFormOpen(false);\n        refreshProducts(); // Refresh list after create/update\n        toast({ title: \"Sucesso\", description: editingProduct ? \"Produto atualizado!\" : \"Produto criado!\" });\n    };\n\n    return (\n        <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-white\">Gerenciar Produtos</h2>\n                <div className=\"flex gap-3\">\n                    <button\n                        onClick={handleRestore}\n                        disabled={isRestoring}\n                        className=\"flex items-center gap-2 rounded-md border border-slate-700 bg-slate-800 px-4 py-2 text-sm font-semibold text-slate-300 transition-all hover:bg-slate-700 hover:text-white disabled:opacity-50\"\n                    >\n                        <RefreshCcw className={`h-4 w-4 ${isRestoring ? 'animate-spin' : ''}`} />\n                        Restaurar Padr√µes\n                    </button>\n\n                    <button\n                        onClick={handleCreate}\n                        className=\"flex items-center gap-2 rounded-md bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-blue-900/20 transition-all hover:bg-blue-700\"\n                    >\n                        <Plus className=\"h-4 w-4\" />\n                        Novo Produto\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"rounded-xl border border-slate-800 bg-slate-900 overflow-hidden shadow-xl\">\n                {initialProducts.length === 0 ? (\n                    <div className=\"flex flex-col items-center justify-center py-20 text-slate-500\">\n                        <Package className=\"h-16 w-16 mb-4 opacity-50\" />\n                        <p className=\"text-lg\">Nenhum produto cadastrado.</p>\n                    </div>\n                ) : (\n                    <div className=\"overflow-x-auto\">\n                        <table className=\"w-full text-left text-sm text-slate-400\">\n                            <thead className=\"bg-slate-950 uppercase text-slate-200 font-medium border-b border-slate-800\">\n                                <tr>\n                                    <th className=\"px-6 py-4\">Produto</th>\n                                    <th className=\"px-6 py-4\">Pre√ßo</th>\n                                    <th className=\"px-6 py-4\">Estoque</th>\n                                    <th className=\"px-6 py-4\">Status</th>\n                                    <th className=\"px-6 py-4 text-right\">A√ß√µes</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"divide-y divide-slate-800\">\n                                {initialProducts.map((product) => (\n                                    <tr key={product.id} className=\"hover:bg-slate-800/30 transition-colors\">\n                                        <td className=\"px-6 py-4\">\n                                            <div className=\"flex items-center gap-4\">\n                                                <div className=\"relative h-12 w-12 flex-shrink-0 overflow-hidden rounded-lg bg-slate-800\">\n                                                    {product.imageUrl ? (\n                                                        <Image src={product.imageUrl} alt={product.name} fill className=\"object-cover\" />\n                                                    ) : (\n                                                        <div className=\"flex h-full w-full items-center justify-center text-slate-600\">\n                                                            <Package className=\"h-6 w-6\" />\n                                                        </div>\n                                                    )}\n                                                </div>\n                                                <div>\n                                                    <div className=\"font-semibold text-white\">{product.name}</div>\n                                                    <div className=\"text-xs text-slate-500 max-w-[200px] truncate\">{product.description}</div>\n                                                </div>\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4 font-medium text-slate-200\">\n                                            {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(product.price)}\n                                        </td>\n                                        <td className=\"px-6 py-4\">\n                                            <div className=\"flex items-center gap-2\">\n                                                <span className={`font-medium ${product.stock < 5 ? 'text-red-500' : 'text-slate-200'}`}>\n                                                    {product.stock}\n                                                </span>\n                                                {product.stock < 5 && (\n                                                    <span className=\"flex items-center gap-1 rounded-full bg-red-500/10 px-2 py-0.5 text-xs text-red-500\">\n                                                        <AlertTriangle className=\"h-3 w-3\" /> Baixo\n                                                    </span>\n                                                )}\n                                            </div>\n                                        </td>\n                                        <td className=\"px-6 py-4\">\n                                            <span className={`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${product.active ? 'bg-emerald-500/10 text-emerald-500' : 'bg-slate-500/10 text-slate-500'\n                                                }`}>\n                                                {product.active ? 'Ativo' : 'Inativo'}\n                                            </span>\n                                        </td>\n                                        <td className=\"px-6 py-4 text-right\">\n                                            <div className=\"flex items-center justify-end gap-2\">\n                                                <button\n                                                    onClick={() => handleEdit(product)}\n                                                    className=\"rounded-lg p-2 text-slate-400 hover:bg-cyan-500/10 hover:text-cyan-500 transition-colors\"\n                                                    title=\"Editar\"\n                                                >\n                                                    <Edit className=\"h-4 w-4\" />\n                                                </button>\n                                                <button\n                                                    onClick={() => handleDeleteClick(product.id)}\n                                                    className=\"rounded-lg p-2 text-slate-400 hover:bg-red-500/10 hover:text-red-500 transition-colors\"\n                                                    title=\"Excluir\"\n                                                >\n                                                    <Trash2 className=\"h-4 w-4\" />\n                                                </button>\n                                            </div>\n                                        </td>\n                                    </tr>\n                                ))}\n                            </tbody>\n                        </table>\n                    </div>\n                )}\n            </div>\n\n            <Modal\n                isOpen={isFormOpen}\n                onClose={() => setIsFormOpen(false)}\n                title={editingProduct ? \"Editar Produto\" : \"Novo Produto\"}\n            >\n                <ProductForm\n                    initialData={editingProduct}\n                    barberId={barberId}\n                    onSuccess={onFormSuccess}\n                />\n            </Modal>\n\n            <ConfirmationModal\n                isOpen={!!deletingId}\n                onCancel={() => setDeletingId(null)}\n                onConfirm={confirmDelete}\n                title=\"Excluir Produto\"\n                description=\"Tem certeza que deseja excluir este produto? Esta a√ß√£o n√£o pode ser desfeita.\"\n                confirmLabel=\"Sim, excluir\"\n                cancelLabel=\"Cancelar\"\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/columns.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4893,4896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4893,4896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport { ColumnDef } from \"@tanstack/react-table\"\nimport { Product } from \"../../types\"\nimport { Checkbox } from \"@/components/ui/checkbox\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger, DropdownMenuLabel, DropdownMenuSeparator } from \"@/components/ui/dropdown-menu\"\nimport { MoreHorizontal, ArrowUpDown, Edit, Trash2, AlertTriangle, Package } from \"lucide-react\"\nimport Image from \"next/image\"\n\nexport const columns: ColumnDef<Product>[] = [\n    {\n        id: \"select\",\n        header: ({ table }) => (\n            <Checkbox\n                checked={table.getIsAllPageRowsSelected() || (table.getIsSomePageRowsSelected() && \"indeterminate\")}\n                onCheckedChange={(value) => table.toggleAllPageRowsSelected(!!value)}\n                aria-label=\"Select all\"\n            />\n        ),\n        cell: ({ row }) => (\n            <Checkbox\n                checked={row.getIsSelected()}\n                onCheckedChange={(value) => row.toggleSelected(!!value)}\n                aria-label=\"Select row\"\n            />\n        ),\n        enableSorting: false,\n        enableHiding: false,\n    },\n    {\n        accessorKey: \"name\",\n        header: \"Produto\",\n        cell: ({ row }) => {\n            const product = row.original;\n            return (\n                <div className=\"flex items-center gap-4 min-w-[200px]\">\n                    <div className=\"relative h-10 w-10 flex-shrink-0 overflow-hidden rounded-lg bg-slate-800\">\n                        {product.imageUrl ? (\n                            <Image src={product.imageUrl} alt={product.name} fill className=\"object-cover\" />\n                        ) : (\n                            <div className=\"flex h-full w-full items-center justify-center text-slate-600\">\n                                <Package className=\"h-5 w-5\" />\n                            </div>\n                        )}\n                    </div>\n                    <div>\n                        <div className=\"font-semibold text-white\">{product.name}</div>\n                        <div className=\"text-xs text-slate-500 max-w-[150px] truncate\">{product.description}</div>\n                    </div>\n                </div>\n            )\n        }\n    },\n    {\n        accessorKey: \"price\",\n        header: ({ column }) => {\n            return (\n                <Button\n                    variant=\"ghost\"\n                    onClick={() => column.toggleSorting(column.getIsSorted() === \"asc\")}\n                    className=\"hover:bg-transparent pl-0\"\n                >\n                    Pre√ßo\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                </Button>\n            )\n        },\n        cell: ({ row }) => {\n            const price = parseFloat(row.getValue(\"price\"))\n            const formatted = new Intl.NumberFormat(\"pt-BR\", {\n                style: \"currency\",\n                currency: \"BRL\",\n            }).format(price)\n\n            return <div className=\"font-medium\">{formatted}</div>\n        },\n    },\n    {\n        accessorKey: \"stock\",\n        header: ({ column }) => {\n            return (\n                <Button\n                    variant=\"ghost\"\n                    onClick={() => column.toggleSorting(column.getIsSorted() === \"asc\")}\n                    className=\"hover:bg-transparent pl-0\"\n                >\n                    Estoque\n                    <ArrowUpDown className=\"ml-2 h-4 w-4\" />\n                </Button>\n            )\n        },\n        cell: ({ row }) => {\n            const stock = row.getValue(\"stock\") as number;\n            return (\n                <div className=\"flex items-center gap-2\">\n                    <span className={`font-medium ${stock < 5 ? 'text-red-500' : 'text-slate-200'}`}>\n                        {stock}\n                    </span>\n                    {stock < 5 && (\n                        <span className=\"flex items-center gap-1 rounded-full bg-red-500/10 px-2 py-0.5 text-[10px] text-red-500 whitespace-nowrap\">\n                            <AlertTriangle className=\"h-3 w-3\" /> Baixo\n                        </span>\n                    )}\n                </div>\n            )\n        }\n    },\n    {\n        accessorKey: \"active\",\n        header: \"Status\",\n        cell: ({ row }) => {\n            const isActive = row.getValue(\"active\") as boolean;\n            return (\n                <Badge variant=\"outline\" className={`${isActive ? 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20' : 'bg-slate-500/10 text-slate-500 border-slate-700'}`}>\n                    {isActive ? 'Ativo' : 'Inativo'}\n                </Badge>\n            )\n        }\n    },\n    {\n        id: \"actions\",\n        cell: ({ row, table }) => {\n            const product = row.original\n            const meta = table.options.meta as any; // We will pass handlers via meta\n\n            return (\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" className=\"h-8 w-8 p-0\">\n                            <span className=\"sr-only\">Open menu</span>\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\" className=\"bg-slate-900 border-slate-800 text-slate-200\">\n                        <DropdownMenuLabel>A√ß√µes</DropdownMenuLabel>\n                        <DropdownMenuItem\n                            onClick={() => meta?.onEdit(product)}\n                            className=\"hover:bg-slate-800 focus:bg-slate-800 cursor-pointer\"\n                        >\n                            <Edit className=\"mr-2 h-4 w-4\" /> Editar\n                        </DropdownMenuItem>\n                        <DropdownMenuSeparator className=\"bg-slate-800\" />\n                        <DropdownMenuItem\n                            onClick={() => meta?.onDelete(product.id)}\n                            className=\"text-red-500 hover:bg-slate-800 focus:bg-slate-800 cursor-pointer\"\n                        >\n                            <Trash2 className=\"mr-2 h-4 w-4\" /> Excluir\n                        </DropdownMenuItem>\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            )\n        },\n    },\n]\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/data-table.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PowerOff' is defined but never used.","line":29,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":30,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":15},{"ruleId":"react-hooks/incompatible-library","severity":1,"message":"Compilation Skipped: Use of incompatible library\n\nThis API returns functions which cannot be memoized without leading to stale UI. To prevent this, by default React Compiler will skip memoizing this component/hook. However, you may see issues if values from this API are passed to other components/hooks that are memoized.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Admin/data-table.tsx:52:19\n  50 |     const [rowSelection, setRowSelection] = React.useState<RowSelectionState>({})\n  51 |\n> 52 |     const table = useReactTable({\n     |                   ^^^^^^^^^^^^^ TanStack Table's `useReactTable()` API returns functions that cannot be memoized safely\n  53 |         data,\n  54 |         columns,\n  55 |         onSortingChange: setSorting,","line":52,"column":19,"nodeType":null,"endLine":52,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2465,2468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2465,2468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\n\nimport * as React from \"react\"\nimport {\n    ColumnDef,\n    ColumnFiltersState,\n    SortingState,\n    VisibilityState,\n    flexRender,\n    getCoreRowModel,\n    getFilteredRowModel,\n    getPaginationRowModel,\n    getSortedRowModel,\n    useReactTable,\n    RowSelectionState\n} from \"@tanstack/react-table\"\n\nimport {\n    Table,\n    TableBody,\n    TableCell,\n    TableHead,\n    TableHeader,\n    TableRow,\n} from \"@/components/ui/table\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { DropdownMenu, DropdownMenuCheckboxItem, DropdownMenuContent, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport { ChevronDown, Trash2, PowerOff, Filter } from \"lucide-react\"\nimport { Badge } from \"@/components/ui/badge\"\n\ninterface DataTableProps<TData, TValue> {\n    columns: ColumnDef<TData, TValue>[]\n    data: TData[]\n    onEdit: (data: TData) => void\n    onDelete: (id: string) => void\n    onBulkDelete?: (ids: string[]) => void\n}\n\nexport function DataTable<TData, TValue>({\n    columns,\n    data,\n    onEdit,\n    onDelete,\n    onBulkDelete\n}: DataTableProps<TData, TValue>) {\n    const [sorting, setSorting] = React.useState<SortingState>([])\n    const [columnFilters, setColumnFilters] = React.useState<ColumnFiltersState>([])\n    const [columnVisibility, setColumnVisibility] = React.useState<VisibilityState>({})\n    const [rowSelection, setRowSelection] = React.useState<RowSelectionState>({})\n\n    const table = useReactTable({\n        data,\n        columns,\n        onSortingChange: setSorting,\n        onColumnFiltersChange: setColumnFilters,\n        getCoreRowModel: getCoreRowModel(),\n        getPaginationRowModel: getPaginationRowModel(),\n        getSortedRowModel: getSortedRowModel(),\n        getFilteredRowModel: getFilteredRowModel(),\n        onColumnVisibilityChange: setColumnVisibility,\n        onRowSelectionChange: setRowSelection,\n        state: {\n            sorting,\n            columnFilters,\n            columnVisibility,\n            rowSelection,\n        },\n        meta: {\n            onEdit,\n            onDelete\n        }\n    })\n\n    // Bulk Actions\n    const selectedRows = table.getFilteredSelectedRowModel().rows;\n    const hasSelection = selectedRows.length > 0;\n\n    const handleBulkDelete = () => {\n        if (onBulkDelete) {\n            // Assume 'id' exists on TData (weak types here but pragmatic)\n            const ids = selectedRows.map(r => (r.original as any).id);\n            onBulkDelete(ids);\n            setRowSelection({});\n        }\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between gap-4\">\n                <div className=\"flex items-center gap-2 flex-1\">\n                    <Input\n                        placeholder=\"Filtrar por nome...\"\n                        value={(table.getColumn(\"name\")?.getFilterValue() as string) ?? \"\"}\n                        onChange={(event) =>\n                            table.getColumn(\"name\")?.setFilterValue(event.target.value)\n                        }\n                        className=\"max-w-sm bg-slate-900 border-slate-700 text-white\"\n                    />\n\n                    {/* Simple faceted filter for Status - could be expanded */}\n                    <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                            <Button variant=\"outline\" className=\"ml-auto md:ml-0 bg-slate-900 border-slate-700 text-slate-300\">\n                                <Filter className=\"mr-2 h-4 w-4\" /> Status\n                            </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"start\" className=\"bg-slate-900 border-slate-800\">\n                            <DropdownMenuCheckboxItem\n                                checked={(table.getColumn(\"active\")?.getFilterValue() as boolean) === true}\n                                onCheckedChange={(val) => {\n                                    // Toggle filter logic needs care for boolean\n                                    if (val) table.getColumn(\"active\")?.setFilterValue(true);\n                                    else table.getColumn(\"active\")?.setFilterValue(undefined); // Clear filter\n                                }}\n                                className=\"text-slate-300\"\n                            >\n                                Ativo\n                            </DropdownMenuCheckboxItem>\n                            <DropdownMenuCheckboxItem\n                                checked={(table.getColumn(\"active\")?.getFilterValue() as boolean) === false}\n                                onCheckedChange={(val) => {\n                                    if (val) table.getColumn(\"active\")?.setFilterValue(false);\n                                    else table.getColumn(\"active\")?.setFilterValue(undefined);\n                                }}\n                                className=\"text-slate-300\"\n                            >\n                                Inativo\n                            </DropdownMenuCheckboxItem>\n                        </DropdownMenuContent>\n                    </DropdownMenu>\n                </div>\n\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button variant=\"outline\" className=\"bg-slate-900 border-slate-700 text-slate-300 ml-auto\">\n                            Colunas <ChevronDown className=\"ml-2 h-4 w-4\" />\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\" className=\"bg-slate-900 border-slate-800\">\n                        {table\n                            .getAllColumns()\n                            .filter((column) => column.getCanHide())\n                            .map((column) => {\n                                return (\n                                    <DropdownMenuCheckboxItem\n                                        key={column.id}\n                                        className=\"capitalize text-slate-300\"\n                                        checked={column.getIsVisible()}\n                                        onCheckedChange={(value) =>\n                                            column.toggleVisibility(!!value)\n                                        }\n                                    >\n                                        {column.id}\n                                    </DropdownMenuCheckboxItem>\n                                )\n                            })}\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            </div>\n\n            {/* BULK ACTIONS BAR */}\n            {hasSelection && (\n                <div className=\"flex items-center justify-between p-2 bg-slate-800/80 border border-slate-700 rounded-lg animate-in fade-in slide-in-from-top-2\">\n                    <span className=\"text-sm text-slate-300 px-2\">{selectedRows.length} item(s) selecionado(s)</span>\n                    <div className=\"flex items-center gap-2\">\n                        <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            onClick={handleBulkDelete}\n                            className=\"h-8\"\n                        >\n                            <Trash2 className=\"mr-2 h-3 w-3\" /> Excluir Selecionados\n                        </Button>\n                    </div>\n                </div>\n            )}\n\n            <div className=\"rounded-md border border-slate-800 bg-slate-900/50\">\n                <Table>\n                    <TableHeader className=\"bg-slate-800/50\">\n                        {table.getHeaderGroups().map((headerGroup) => (\n                            <TableRow key={headerGroup.id} className=\"border-slate-800 hover:bg-transparent\">\n                                {headerGroup.headers.map((header) => {\n                                    return (\n                                        <TableHead key={header.id} className=\"text-slate-300\">\n                                            {header.isPlaceholder\n                                                ? null\n                                                : flexRender(\n                                                    header.column.columnDef.header,\n                                                    header.getContext()\n                                                )}\n                                        </TableHead>\n                                    )\n                                })}\n                            </TableRow>\n                        ))}\n                    </TableHeader>\n                    <TableBody>\n                        {table.getRowModel().rows?.length ? (\n                            table.getRowModel().rows.map((row) => (\n                                <TableRow\n                                    key={row.id}\n                                    data-state={row.getIsSelected() && \"selected\"}\n                                    className=\"border-slate-800 hover:bg-slate-800/30 data-[state=selected]:bg-slate-800/50\"\n                                >\n                                    {row.getVisibleCells().map((cell) => (\n                                        <TableCell key={cell.id} className=\"text-slate-400\">\n                                            {flexRender(\n                                                cell.column.columnDef.cell,\n                                                cell.getContext()\n                                            )}\n                                        </TableCell>\n                                    ))}\n                                </TableRow>\n                            ))\n                        ) : (\n                            <TableRow>\n                                <TableCell\n                                    colSpan={columns.length}\n                                    className=\"h-24 text-center text-slate-500\"\n                                >\n                                    Nenhum resultado encontrado.\n                                </TableCell>\n                            </TableRow>\n                        )}\n                    </TableBody>\n                </Table>\n            </div>\n\n            <div className=\"flex items-center justify-end space-x-2 py-4\">\n                <div className=\"flex-1 text-sm text-muted-foreground\">\n                    {table.getFilteredSelectedRowModel().rows.length} de{\" \"}\n                    {table.getFilteredRowModel().rows.length} linha(s) selecionada(s).\n                </div>\n                <div className=\"space-x-2\">\n                    <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => table.previousPage()}\n                        disabled={!table.getCanPreviousPage()}\n                        className=\"bg-slate-900 border-slate-700 text-slate-300\"\n                    >\n                        Anterior\n                    </Button>\n                    <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => table.nextPage()}\n                        disabled={!table.getCanNextPage()}\n                        className=\"bg-slate-900 border-slate-700 text-slate-300\"\n                    >\n                        Pr√≥ximo\n                    </Button>\n                </div>\n            </div>\n        </div>\n    )\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Public/CartDrawer.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":82,"column":41,"nodeType":"JSXOpeningElement","endLine":86,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect } from 'react';\nimport { X, Trash2, ShoppingBag } from 'lucide-react';\nimport { useCartStore } from '../../stores/useCartStore';\nimport { cn } from '@/lib/utils';\nimport { createPortal } from 'react-dom';\n\nexport const CartDrawer = () => {\n    const { items, isOpen, closeCart, updateQuantity, removeItem, getCartTotal } = useCartStore();\n\n    // Close on escape key\n    useEffect(() => {\n        const handleEsc = (e: KeyboardEvent) => {\n            if (e.key === 'Escape') closeCart();\n        };\n        if (isOpen) window.addEventListener('keydown', handleEsc);\n        return () => window.removeEventListener('keydown', handleEsc);\n    }, [isOpen, closeCart]);\n\n    // Prevent background scroll when open\n    useEffect(() => {\n        if (isOpen) {\n            document.body.style.overflow = 'hidden';\n        } else {\n            document.body.style.overflow = 'unset';\n        }\n        return () => {\n            document.body.style.overflow = 'unset';\n        };\n    }, [isOpen]);\n\n    if (!isOpen) return null;\n\n    return createPortal(\n        <div className=\"fixed inset-0 z-[100] flex justify-end\">\n            {/* Backdrop */}\n            <div\n                className=\"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity\"\n                onClick={closeCart}\n            />\n\n            {/* Drawer */}\n            <div className={cn(\n                \"relative z-10 w-full max-w-md bg-white shadow-xl dark:bg-zinc-900 flex flex-col h-full animate-in slide-in-from-right duration-300\"\n            )}>\n                {/* Header */}\n                <div className=\"flex items-center justify-between border-b px-6 py-4 dark:border-zinc-800\">\n                    <div className=\"flex items-center gap-2\">\n                        <ShoppingBag className=\"h-5 w-5 text-primary\" />\n                        <h2 className=\"text-lg font-bold\">Seu Carrinho</h2>\n                        <span className=\"ml-2 rounded-full bg-primary/10 px-2.5 py-0.5 text-xs font-medium text-primary\">\n                            {items.length} itens\n                        </span>\n                    </div>\n                    <button\n                        onClick={closeCart}\n                        className=\"rounded-full p-2 hover:bg-gray-100 dark:hover:bg-zinc-800\"\n                    >\n                        <X className=\"h-5 w-5\" />\n                    </button>\n                </div>\n\n                {/* Items List */}\n                <div className=\"flex-1 overflow-y-auto p-6\">\n                    {items.length === 0 ? (\n                        <div className=\"flex h-full flex-col items-center justify-center text-center text-gray-500\">\n                            <ShoppingBag className=\"mb-4 h-16 w-16 opacity-20\" />\n                            <p className=\"text-lg font-medium\">Seu carrinho est√° vazio</p>\n                            <p className=\"text-sm\">Adicione produtos para ver eles aqui.</p>\n                            <button\n                                onClick={closeCart}\n                                className=\"mt-6 rounded-lg border px-6 py-2 text-sm font-medium hover:bg-gray-50 dark:border-zinc-700 dark:hover:bg-zinc-800\"\n                            >\n                                Continuar comprando\n                            </button>\n                        </div>\n                    ) : (\n                        <div className=\"space-y-6\">\n                            {items.map((item) => (\n                                <div key={item.id} className=\"flex gap-4\">\n                                    {/* Thumbnail */}\n                                    <div className=\"h-20 w-20 shrink-0 overflow-hidden rounded-lg border dark:border-zinc-800\">\n                                        <img\n                                            src={item.imageUrl}\n                                            alt={item.name}\n                                            className=\"h-full w-full object-cover\"\n                                        />\n                                    </div>\n\n                                    {/* Info */}\n                                    <div className=\"flex flex-1 flex-col justify-between\">\n                                        <div>\n                                            <h3 className=\"line-clamp-1 font-medium\">{item.name}</h3>\n                                            <p className=\"text-sm text-gray-500\">{new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(item.price)}</p>\n                                        </div>\n\n                                        <div className=\"flex items-center justify-between\">\n                                            <div className=\"flex items-center w-24 rounded-lg border dark:border-zinc-700\">\n                                                <button\n                                                    onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                                                    className=\"flex h-7 w-8 items-center justify-center hover:bg-gray-100 dark:hover:bg-zinc-800\"\n                                                >\n                                                    -\n                                                </button>\n                                                <span className=\"flex-1 text-center text-xs font-medium\">\n                                                    {item.quantity}\n                                                </span>\n                                                <button\n                                                    onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                                                    className=\"flex h-7 w-8 items-center justify-center hover:bg-gray-100 dark:hover:bg-zinc-800\"\n                                                >\n                                                    +\n                                                </button>\n                                            </div>\n\n                                            <button\n                                                onClick={() => removeItem(item.id)}\n                                                className=\"text-gray-400 hover:text-red-500 transition-colors\"\n                                            >\n                                                <Trash2 className=\"h-4 w-4\" />\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer / Summary */}\n                {items.length > 0 && (\n                    <div className=\"border-t bg-gray-50 p-6 dark:bg-zinc-800/50 dark:border-zinc-800\">\n                        <div className=\"mb-4 flex items-center justify-between\">\n                            <span className=\"text-base font-medium\">Subtotal</span>\n                            <span className=\"text-xl font-bold\">\n                                {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(getCartTotal())}\n                            </span>\n                        </div>\n\n                        <button\n                            onClick={() => {\n                                const total = getCartTotal();\n                                const formattedTotal = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(total);\n\n                                let message = `*Novo Pedido - BarberSaaS*%0A%0A`;\n                                items.forEach(item => {\n                                    message += `‚Ä¢ ${item.quantity}x ${item.name} - ${new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(item.price)}%0A`;\n                                });\n                                message += `%0A*Total: ${formattedTotal}*`;\n\n                                // Replace with actual barber phone from context/props if available, currently mocking or prompting user to update\n                                const phoneNumber = \"5511999999999\";\n                                window.open(`https://wa.me/${phoneNumber}?text=${message}`, '_blank');\n                            }}\n                            className=\"w-full rounded-xl bg-primary py-3.5 text-center font-bold text-primary-foreground shadow-lg shadow-primary/25 transition-all hover:brightness-110 active:scale-[0.98]\"\n                        >\n                            Finalizar Pedido via WhatsApp\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>,\n        document.body\n    );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Public/CartFloatButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Public/ProductCard.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":47,"column":17,"nodeType":"JSXOpeningElement","endLine":51,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Minus, Plus, ShoppingBag } from 'lucide-react';\nimport { Product } from '../../types';\nimport { useCartStore } from '../../stores/useCartStore';\nimport { cn } from '@/lib/utils'; // Assuming this exists, typical in shadcn/ui. If not, I'll fallback or check.\n\ninterface ProductCardProps {\n    product: Product;\n    className?: string; // For adaptable themes\n}\n\nexport const ProductCard = ({ product, className }: ProductCardProps) => {\n    const { items, addItem, updateQuantity } = useCartStore();\n    const cartItem = items.find((item) => item.id === product.id);\n    const quantity = cartItem?.quantity || 0;\n\n    const handleAdd = () => {\n        addItem(product);\n    };\n\n    const handleIncrement = () => {\n        updateQuantity(product.id, quantity + 1);\n    };\n\n    const handleDecrement = () => {\n        if (quantity > 0) {\n            updateQuantity(product.id, quantity - 1);\n        }\n    };\n\n    // ... Inside component\n    const isOutOfStock = product.stock === 0;\n\n    // Volt style hover effect: Scale up slightly and add a glow\n    return (\n        <div\n            className={cn(\n                \"group relative flex flex-col overflow-hidden rounded-xl bg-white border border-transparent transition-all duration-300 ease-out\",\n                \"hover:scale-[1.02] hover:border-primary/50 hover:shadow-[0_0_20px_rgba(var(--primary-rgb),0.2)]\",\n                \"dark:bg-zinc-900 dark:border-zinc-800\",\n                className,\n                isOutOfStock && \"opacity-75\"\n            )}\n        >\n            {/* Image Container */}\n            <div className=\"relative aspect-square overflow-hidden bg-gray-100 dark:bg-zinc-800\">\n                <img\n                    src={product.imageUrl}\n                    alt={product.name}\n                    className=\"h-full w-full object-cover transition-transform duration-500 group-hover:scale-110\"\n                />\n                {isOutOfStock && (\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black/50 font-bold text-white uppercase tracking-widest backdrop-blur-[2px]\">\n                        Esgotado\n                    </div>\n                )}\n            </div>\n\n            {/* Content */}\n            <div className=\"flex flex-1 flex-col p-4\">\n                <div className=\"mb-2\">\n                    <h3 className=\"line-clamp-1 text-lg font-bold text-gray-900 dark:text-white\">\n                        {product.name}\n                    </h3>\n                    <p className=\"mt-1 line-clamp-2 text-sm text-gray-500 dark:text-gray-400\">\n                        {product.category} ‚Ä¢ {product.description}\n                    </p>\n                </div>\n\n                <div className=\"mt-auto flex items-center justify-between\">\n                    <span className=\"text-lg font-semibold text-primary\">\n                        {new Intl.NumberFormat('pt-BR', {\n                            style: 'currency',\n                            currency: 'BRL',\n                        }).format(product.price)}\n                    </span>\n\n                    {/* Logic: \n                        1. If Out of Stock -> Disabled Button\n                        2. If In Stock & Qty 0 -> Add Button\n                        3. If In Stock & Qty > 0 -> Counter\n                    */}\n\n                    {isOutOfStock ? (\n                        <button\n                            disabled\n                            className=\"flex items-center gap-2 rounded-lg bg-gray-200 px-4 py-2 text-sm font-medium text-gray-500 cursor-not-allowed dark:bg-zinc-800\"\n                        >\n                            Indispon√≠vel\n                        </button>\n                    ) : quantity === 0 ? (\n                        <button\n                            onClick={handleAdd}\n                            className={cn(\n                                \"flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground transition-colors\",\n                                \"hover:bg-primary/90 active:scale-95\"\n                            )}\n                        >\n                            <ShoppingBag className=\"h-4 w-4\" />\n                            Adicionar\n                        </button>\n                    ) : (\n                        <div className=\"flex items-center gap-3 rounded-lg bg-secondary/50 p-1\">\n                            <button\n                                onClick={handleDecrement}\n                                className=\"rounded-md p-1 hover:bg-white/50 hover:text-red-500 transition-colors dark:hover:bg-black/50\"\n                            >\n                                <Minus className=\"h-4 w-4\" />\n                            </button>\n                            <span className=\"w-4 text-center text-sm font-medium tabular-nums\">\n                                {quantity}\n                            </span>\n                            <button\n                                onClick={handleIncrement}\n                                className=\"rounded-md p-1 hover:bg-white/50 hover:text-green-500 transition-colors dark:hover:bg-black/50\"\n                            >\n                                <Plus className=\"h-4 w-4\" />\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/components/Public/ProductGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/data/seed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/hooks/useProductSubmit.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":70,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2644,2647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2644,2647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useTransition } from \"react\";\nimport { useToast } from \"@/components/ui/use-toast\";\nimport { ProductFormValues } from \"../schemas/productSchema\";\nimport { useRouter } from \"next/navigation\";\nimport { productService } from \"../services/productService\";\nimport { checkProductLimit, PlanLimitExceededError } from \"@/features/subscription/utils/checkProductLimit\";\n\ninterface UseProductSubmitProps {\n    onSuccess?: () => void;\n    initialDataId?: string;\n}\n\nexport function useProductSubmit({ onSuccess, initialDataId }: UseProductSubmitProps) {\n    const [isPending, startTransition] = useTransition();\n    const router = useRouter();\n    const { toast } = useToast();\n\n    const submitProduct = (data: ProductFormValues) => {\n        startTransition(async () => {\n            try {\n                const barberId = data.barberId || \"current-user-uid\"; // Should come from auth context in real app\n\n                if (initialDataId) {\n                    // Update\n                    await productService.updateProduct(initialDataId, {\n                        name: data.name,\n                        description: data.description,\n                        price: data.price,\n                        stock: data.stock,\n                        imageUrl: data.imageUrl || \"\",\n                        active: data.active,\n                        category: data.category\n                    });\n\n                    toast({\n                        title: \"Sucesso!\",\n                        description: \"Produto atualizado com sucesso.\",\n                        variant: \"success\"\n                    });\n                } else {\n                    // Create\n                    // Check limit first\n                    await checkProductLimit(barberId);\n\n                    await productService.createProduct({\n                        name: data.name,\n                        description: data.description || \"\",\n                        price: data.price,\n                        stock: data.stock,\n                        imageUrl: data.imageUrl || \"\",\n                        active: data.active || true, // Default to true if undefined\n                        category: data.category,\n                        barberId: barberId\n                    });\n\n                    toast({\n                        title: \"Sucesso!\",\n                        description: \"Produto criado com sucesso.\",\n                        variant: \"success\"\n                    });\n                }\n\n                if (onSuccess) onSuccess();\n\n                // Refresh data\n                router.refresh();\n\n            } catch (error: any) {\n                console.error(error);\n\n                if (error instanceof PlanLimitExceededError || error.name === \"PlanLimitExceededError\") {\n                    toast({\n                        title: \"Limite Atingido\",\n                        description: error.message,\n                        variant: \"destructive\"\n                    });\n                } else {\n                    toast({\n                        title: \"Erro ao salvar\",\n                        description: error.message || \"Ocorreu um erro inesperado.\",\n                        variant: \"destructive\"\n                    });\n                }\n            }\n        });\n    };\n\n    return {\n        isPending,\n        submitProduct\n    };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/schemas/productSchema.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/services/productService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'id' is assigned a value but never used.","line":130,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":130,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { db } from \"@/lib/firebase\";\nimport {\n    collection,\n    addDoc,\n    updateDoc,\n    deleteDoc,\n    doc,\n    getDocs,\n    query,\n    where,\n    Timestamp,\n    serverTimestamp\n} from \"firebase/firestore\";\nimport { Product } from \"../types\";\n\nconst COLLECTION_NAME = \"products\";\n\nexport const productService = {\n    /**\n     * Creates a new product in Firestore.\n     * @param productData Omit<Product, \"id\" | \"createdAt\">\n     * @returns Promise<Product> The created product with generated ID.\n     */\n    createProduct: async (productData: Omit<Product, \"id\" | \"createdAt\">): Promise<Product> => {\n        try {\n            const docRef = await addDoc(collection(db, COLLECTION_NAME), {\n                ...productData,\n                createdAt: serverTimestamp(),\n            });\n\n            // We return a \"Client\" version of the product immediately\n            return {\n                id: docRef.id,\n                ...productData,\n                createdAt: new Date(),\n            };\n        } catch (error) {\n            console.error(\"Error creating product:\", error);\n            throw new Error(\"Failed to create product.\");\n        }\n    },\n\n    /**\n     * Updates an existing product.\n     * @param id Product ID\n     * @param updates Partial<Product>\n     */\n    updateProduct: async (id: string, updates: Partial<Omit<Product, \"id\" | \"createdAt\">>): Promise<void> => {\n        try {\n            const productRef = doc(db, COLLECTION_NAME, id);\n            await updateDoc(productRef, updates);\n        } catch (error) {\n            console.error(`Error updating product ${id}:`, error);\n            throw new Error(\"Failed to update product.\");\n        }\n    },\n\n    /**\n     * Deletes a product by ID.\n     * @param id Product ID\n     */\n    deleteProduct: async (id: string): Promise<void> => {\n        try {\n            const productRef = doc(db, COLLECTION_NAME, id);\n            await deleteDoc(productRef);\n        } catch (error) {\n            console.error(`Error deleting product ${id}:`, error);\n            throw new Error(\"Failed to delete product.\");\n        }\n    },\n\n    /**\n     * Fetches products for a specific barber (tenant).\n     * @param barberId string\n     * @returns Promise<Product[]>\n     */\n    getProductsByBarberId: async (barberId: string): Promise<Product[]> => {\n        try {\n            const q = query(collection(db, COLLECTION_NAME), where(\"barberId\", \"==\", barberId));\n            const querySnapshot = await getDocs(q);\n\n            const products: Product[] = [];\n            querySnapshot.forEach((docSnap) => {\n                const data = docSnap.data();\n                // Safely handle Timestamp conversion\n                const createdAt = data.createdAt instanceof Timestamp\n                    ? data.createdAt.toDate()\n                    : new Date();\n\n                products.push({\n                    id: docSnap.id,\n                    barberId: data.barberId,\n                    name: data.name,\n                    description: data.description,\n                    price: data.price,\n                    imageUrl: data.imageUrl,\n                    stock: data.stock,\n                    active: data.active,\n                    createdAt: createdAt,\n                } as Product);\n            });\n\n            return products;\n        } catch (error) {\n            console.error(`Error fetching products for barber ${barberId}:`, error);\n            throw new Error(\"Failed to fetch products.\");\n        }\n    },\n    // ... previous methods\n\n    /**\n     * Seeds the database with default products for a barber.\n     * @param barberId string\n     */\n    seedProducts: async (barberId: string): Promise<void> => {\n        try {\n            const { DEFAULT_PRODUCTS } = await import(\"../data/seed\");\n\n            // Using batch for atomicity (optional but good practice)\n            // Ideally we check if they exist, but this is a \"Restore/Init\" action so we might duplicate if not careful.\n            // The logic in the Page/Action ensures we only call this if list is empty or explicitly requested.\n\n            // Simple loop for now as createProduct handles timestamp logic\n            const promises = DEFAULT_PRODUCTS.map(product => {\n                // Remove ID to let Firestore generate one, or use the preset ID?\n                // If we use preset IDs, we might collide if multiple barbers share the same collection (multi-tenant in single collection).\n                // The Type definition says `id` is string.\n                // Generally in multi-tenant, we want unique IDs.\n                // Let's strip the ID from the seed and let Firestore generate a unique one.\n                const { id, ...rest } = product;\n                return productService.createProduct({\n                    ...rest,\n                    barberId,\n                    // Ensure we reset createdAt\n                });\n            });\n\n            await Promise.all(promises);\n            // In a real app, use writeBatch() for better performance and transaction safety.\n        } catch (error) {\n            console.error(`Error seeding products for barber ${barberId}:`, error);\n            throw new Error(\"Failed to seed products.\");\n        }\n    }\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/stores/useCartStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/products/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/promotions/components/CreatePromotionForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SubmitHandler' is defined but never used.","line":3,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarbershopData' is defined but never used.","line":12,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":49,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { CreatePromotionSchema, CreatePromotionInput } from '@/features/promotions/types';\nimport { createPromotion } from '@/app/actions/promotions';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { useState } from 'react';\nimport { BarbershopData, Service } from '@/types/barbershop';\nimport { Product } from '@/features/products/types';\nimport { Loader2 } from 'lucide-react';\nimport { useToast } from '@/components/ui/use-toast';\n\ninterface Props {\n    services: Service[];\n    products: Product[];\n    onSuccess?: () => void;\n}\n\nexport default function CreatePromotionForm({ services, products, onSuccess }: Props) {\n    const { user } = useAuth();\n    const { toast } = useToast();\n    const [isLoading, setIsLoading] = useState(false);\n\n    const form = useForm<CreatePromotionInput>({\n        resolver: zodResolver(CreatePromotionSchema),\n        defaultValues: {\n            active: true\n        }\n    });\n\n    const onSubmit = async (data: CreatePromotionInput) => {\n        if (!user) return;\n        setIsLoading(true);\n\n        try {\n            const result = await createPromotion(user.uid, data);\n\n            if (result.success) {\n                toast({ title: \"Promotion created!\", description: \"The promotion has been successfully created.\" });\n                form.reset();\n                onSuccess?.();\n            } else {\n                toast({ title: \"Error\", description: result.error || \"An error occurred\", variant: \"destructive\" });\n            }\n        } catch (error) {\n            toast({ title: \"Error\", description: \"Something went wrong\", variant: \"destructive\" });\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6 bg-white p-6 rounded-lg shadow-sm border border-slate-100\">\n            <div>\n                <Label>Promotion Title</Label>\n                <Input {...form.register('title')} placeholder=\"e.g. Combo Corte + Pomada\" />\n                {form.formState.errors.title && <span className=\"text-red-500 text-sm\">{form.formState.errors.title.message}</span>}\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                    <Label>When client books...</Label>\n                    <select\n                        {...form.register('trigger_service_ids.0')} // Simplification: Single trigger for MVP\n                        className=\"w-full border rounded-md p-2 text-sm\"\n                    >\n                        <option value=\"\">Select a Service</option>\n                        {services.map((s, i) => (\n                            // Fallback to name if ID missing, but schema expects string.\n                            // We really need IDs. Using index or name as fallback.\n                            // Assuming we updated Service to have ID or match by name.\n                            <option key={i} value={s.name}>{s.name} ({s.duration})</option>\n                        ))}\n                    </select>\n                    {form.formState.errors.trigger_service_ids && <span className=\"text-red-500 text-sm\">Select a service</span>}\n                </div>\n\n                <div>\n                    <Label>Offer this product...</Label>\n                    <select\n                        {...form.register('offered_product_id')}\n                        className=\"w-full border rounded-md p-2 text-sm\"\n                    >\n                        <option value=\"\">Select a Product</option>\n                        {products.map(p => (\n                            <option key={p.id} value={p.id}>{p.name} (Original: ${p.price})</option>\n                        ))}\n                    </select>\n                    {form.formState.errors.offered_product_id && <span className=\"text-red-500 text-sm\">{form.formState.errors.offered_product_id.message}</span>}\n                </div>\n            </div>\n\n            <div>\n                <Label>For the price of...</Label>\n                <div className=\"relative\">\n                    <span className=\"absolute left-3 top-2 text-gray-500\">$</span>\n                    <Input\n                        type=\"number\"\n                        step=\"0.01\"\n                        {...form.register('discounted_price', { valueAsNumber: true })}\n                        className=\"pl-8\"\n                        placeholder=\"0.00\"\n                    />\n                </div>\n                {form.formState.errors.discounted_price && <span className=\"text-red-500 text-sm\">{form.formState.errors.discounted_price.message}</span>}\n            </div>\n\n            <Button type=\"submit\" disabled={isLoading} className=\"w-full\">\n                {isLoading && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n                Create Offer\n            </Button>\n        </form>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/promotions/components/PromotionsList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/promotions/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/reviews/components/ReviewsManager.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":168,"column":106,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10895,10896],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10895,10896],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10895,10896],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10895,10896],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":168,"column":120,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[10909,10910],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[10909,10910],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[10909,10910],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[10909,10910],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Star, Trash2, Plus, User, MessageSquare } from 'lucide-react';\nimport { Review } from '@/features/reviews/types';\n\ninterface ReviewsManagerProps {\n    isOpen: boolean;\n    onClose: () => void;\n    reviews: Review[];\n    onUpdate: (reviews: Review[]) => void;\n}\n\nexport default function ReviewsManager({ isOpen, onClose, reviews, onUpdate }: ReviewsManagerProps) {\n    const [newReview, setNewReview] = useState<Partial<Review>>({\n        name: '',\n        text: '',\n        rating: 5\n    });\n\n    const handleAddReview = () => {\n        if (!newReview.name || !newReview.text) return;\n\n        const review: Review = {\n            id: Math.random().toString(36).substr(2, 9),\n            name: newReview.name,\n            text: newReview.text,\n            rating: newReview.rating || 5,\n            date: new Date().toLocaleDateString('pt-BR'),\n            avatar: newReview.avatar\n        };\n\n        onUpdate([...reviews, review]);\n        setNewReview({ name: '', text: '', rating: 5 });\n    };\n\n    const handleDeleteReview = (id: string) => {\n        onUpdate(reviews.filter(r => r.id !== id));\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <AnimatePresence>\n            {isOpen && (\n                <>\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        onClick={onClose}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]\"\n                    />\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                        className=\"fixed inset-0 z-[70] flex items-center justify-center p-4 pointer-events-none\"\n                    >\n                        <div className=\"bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden pointer-events-auto flex flex-col max-h-[85vh]\">\n                            <div className=\"p-4 border-b border-gray-100 flex justify-between items-center bg-white sticky top-0 z-10\">\n                                <h3 className=\"font-bold text-lg text-gray-900 flex items-center gap-2\">\n                                    <MessageSquare size={20} />\n                                    Gerenciar Avalia√ß√µes\n                                </h3>\n                                <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n                                    <X size={20} className=\"text-gray-500\" />\n                                </button>\n                            </div>\n\n                            <div className=\"flex-1 overflow-y-auto p-6 bg-gray-50\">\n                                {/* Add New Review Form */}\n                                <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8\">\n                                    <h4 className=\"font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                                        <Plus size={18} className=\"text-blue-600\" />\n                                        Adicionar Nova Avalia√ß√£o\n                                    </h4>\n                                    <div className=\"grid gap-4\">\n                                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Nome do Cliente</label>\n                                                <div className=\"relative\">\n                                                    <User className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" size={16} />\n                                                    <input\n                                                        type=\"text\"\n                                                        value={newReview.name}\n                                                        onChange={(e) => setNewReview({ ...newReview, name: e.target.value })}\n                                                        className=\"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none\"\n                                                        placeholder=\"Ex: Jo√£o Silva\"\n                                                    />\n                                                </div>\n                                            </div>\n                                            <div>\n                                                <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Nota</label>\n                                                <div className=\"flex gap-2\">\n                                                    {[1, 2, 3, 4, 5].map((star) => (\n                                                        <button\n                                                            key={star}\n                                                            onClick={() => setNewReview({ ...newReview, rating: star })}\n                                                            className={`p-2 rounded-lg transition-colors ${(newReview.rating || 0) >= star ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 bg-gray-50'\n                                                                }`}\n                                                        >\n                                                            <Star size={20} fill=\"currentColor\" />\n                                                        </button>\n                                                    ))}\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-xs font-bold text-gray-500 uppercase mb-1\">Depoimento</label>\n                                            <textarea\n                                                value={newReview.text}\n                                                onChange={(e) => setNewReview({ ...newReview, text: e.target.value })}\n                                                className=\"w-full p-4 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none min-h-[100px]\"\n                                                placeholder=\"O que o cliente disse...\"\n                                            />\n                                        </div>\n                                        <button\n                                            onClick={handleAddReview}\n                                            disabled={!newReview.name || !newReview.text}\n                                            className=\"bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\n                                        >\n                                            Adicionar Avalia√ß√£o\n                                        </button>\n                                    </div>\n                                </div>\n\n                                {/* List Reviews */}\n                                <div className=\"space-y-4\">\n                                    <h4 className=\"font-bold text-gray-800 mb-2\">Avalia√ß√µes Atuais ({reviews.length})</h4>\n                                    {reviews.length === 0 ? (\n                                        <div className=\"text-center py-12 text-gray-400 bg-white rounded-xl border border-dashed border-gray-200\">\n                                            <MessageSquare size={48} className=\"mx-auto mb-4 opacity-20\" />\n                                            <p>Nenhuma avalia√ß√£o cadastrada ainda.</p>\n                                        </div>\n                                    ) : (\n                                        reviews.map((review) => (\n                                            <motion.div\n                                                layout\n                                                key={review.id}\n                                                initial={{ opacity: 0, y: 20 }}\n                                                animate={{ opacity: 1, y: 0 }}\n                                                exit={{ opacity: 0, scale: 0.9 }}\n                                                className=\"bg-white p-4 rounded-xl border border-gray-100 shadow-sm flex gap-4 group\"\n                                            >\n                                                <div className=\"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center flex-shrink-0 text-gray-500 font-bold\">\n                                                    {review.name.charAt(0)}\n                                                </div>\n                                                <div className=\"flex-1\">\n                                                    <div className=\"flex justify-between items-start mb-1\">\n                                                        <div>\n                                                            <h5 className=\"font-bold text-gray-900\">{review.name}</h5>\n                                                            <div className=\"flex gap-1 text-yellow-400 text-xs\">\n                                                                {[...Array(5)].map((_, i) => (\n                                                                    <Star key={i} size={12} fill={i < review.rating ? \"currentColor\" : \"none\"} className={i >= review.rating ? \"text-gray-200\" : \"\"} />\n                                                                ))}\n                                                            </div>\n                                                        </div>\n                                                        <button\n                                                            onClick={() => handleDeleteReview(review.id)}\n                                                            className=\"text-red-500 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-50 rounded-lg\"\n                                                            title=\"Excluir\"\n                                                        >\n                                                            <Trash2 size={16} />\n                                                        </button>\n                                                    </div>\n                                                    <p className=\"text-gray-600 text-sm leading-relaxed\">\"{review.text}\"</p>\n                                                    {review.date && (\n                                                        <p className=\"text-xs text-gray-400 mt-2\">{review.date}</p>\n                                                    )}\n                                                </div>\n                                            </motion.div>\n                                        ))\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/reviews/components/ReviewsSection.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":83,"column":33,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3427,3461],"text":"\n                                &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3427,3461],"text":"\n                                &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3427,3461],"text":"\n                                &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3427,3461],"text":"\n                                &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":83,"column":47,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3474,3504],"text":"&quot;\n                            "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3474,3504],"text":"&ldquo;\n                            "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3474,3504],"text":"&#34;\n                            "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3474,3504],"text":"&rdquo;\n                            "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":89,"column":41,"nodeType":"JSXOpeningElement","endLine":89,"endColumn":138}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Review } from '@/features/reviews/types';\nimport { Star, User, Quote } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface ReviewsSectionProps {\n    reviews: Review[];\n    templateId: string;\n}\n\nexport default function ReviewsSection({ reviews, templateId }: ReviewsSectionProps) {\n    if (!reviews || reviews.length === 0) return null;\n\n    const getStyles = () => {\n        switch (templateId) {\n            case 'classic':\n                return {\n                    section: 'bg-[#0f0f0f] py-20',\n                    card: 'bg-[#1a1a1a] border border-[#d4af37]/20',\n                    text: 'text-gray-300',\n                    name: 'text-[#d4af37]',\n                    star: 'text-[#d4af37]',\n                    heading: 'text-[#d4af37] font-serif'\n                };\n            case 'urban':\n                return {\n                    section: 'bg-zinc-900 py-20',\n                    card: 'bg-zinc-800 border-2 border-black shadow-[4px_4px_0px_0px_#ffff00]',\n                    text: 'text-white',\n                    name: 'text-[#ffff00] uppercase tracking-wider font-black',\n                    star: 'text-[#ffff00]',\n                    heading: 'text-white uppercase tracking-tighter'\n                };\n            case 'modern':\n            default:\n                return {\n                    section: 'bg-slate-50 py-20',\n                    card: 'bg-white shadow-sm border border-slate-100',\n                    text: 'text-slate-600',\n                    name: 'text-slate-900 font-semibold',\n                    star: 'text-yellow-400',\n                    heading: 'text-slate-900'\n                };\n        }\n    };\n\n    const styles = getStyles();\n\n    return (\n        <section className={styles.section}>\n            <div className=\"container mx-auto px-4\">\n                <div className=\"text-center mb-12\">\n                    <h2 className={`text-3xl md:text-4xl font-bold mb-4 ${styles.heading}`}>\n                        O que dizem nossos clientes\n                    </h2>\n                    <div className=\"w-20 h-1 bg-current mx-auto opacity-20\" />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                    {reviews.map((review, index) => (\n                        <motion.div\n                            key={review.id}\n                            initial={{ opacity: 0, y: 20 }}\n                            whileInView={{ opacity: 1, y: 0 }}\n                            viewport={{ once: true }}\n                            transition={{ delay: index * 0.1 }}\n                            className={`p-6 rounded-xl relative ${styles.card}`}\n                        >\n                            <Quote size={24} className={`absolute top-6 right-6 opacity-10 ${styles.star}`} />\n\n                            <div className=\"flex gap-1 mb-4\">\n                                {[...Array(5)].map((_, i) => (\n                                    <Star\n                                        key={i}\n                                        size={16}\n                                        className={`${i < review.rating ? styles.star : 'text-gray-300/20'} fill-current`}\n                                    />\n                                ))}\n                            </div>\n\n                            <p className={`mb-6 leading-relaxed ${styles.text}`}>\n                                \"{review.text}\"\n                            </p>\n\n                            <div className=\"flex items-center gap-3\">\n                                <div className={`w-10 h-10 rounded-full flex items-center justify-center ${templateId === 'urban' ? 'bg-[#ffff00] text-black' : 'bg-gray-200 text-gray-500'}`}>\n                                    {review.avatar ? (\n                                        <img src={review.avatar} alt={review.name} className=\"w-full h-full rounded-full object-cover\" />\n                                    ) : (\n                                        <User size={20} />\n                                    )}\n                                </div>\n                                <div>\n                                    <p className={`text-sm ${styles.name}`}>{review.name}</p>\n                                    {review.date && (\n                                        <p className=\"text-xs opacity-50\">{review.date}</p>\n                                    )}\n                                </div>\n                            </div>\n                        </motion.div>\n                    ))}\n                </div>\n            </div>\n        </section>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/reviews/components/SocialProofWidget.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":65,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2804,2834],"text":"\n                            &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2804,2834],"text":"\n                            &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2804,2834],"text":"\n                            &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2804,2834],"text":"\n                            &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":65,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2868,2894],"text":"&quot;\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2868,2894],"text":"&ldquo;\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2868,2894],"text":"&#34;\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2868,2894],"text":"&rdquo;\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Star, Quote, User } from 'lucide-react';\nimport { useState, useEffect } from 'react';\n\nimport { Review } from '@/features/reviews/types';\n\ninterface SocialProofWidgetProps {\n    templateId: string;\n    reviews?: Review[];\n}\n\nconst DEFAULT_REVIEWS = [\n    { name: 'Carlos Silva', text: 'Melhor corte da regi√£o! Atendimento top.', rating: 5 },\n    { name: 'Jo√£o Souza', text: 'Ambiente incr√≠vel e profissionais qualificados.', rating: 5 },\n    { name: 'Pedro Santos', text: 'Sempre saio satisfeito. Recomendo muito!', rating: 5 },\n    { name: 'Lucas Oliveira', text: 'Barba e cabelo na r√©gua. Virei cliente fiel.', rating: 5 },\n];\n\nexport default function SocialProofWidget({ templateId, reviews }: SocialProofWidgetProps) {\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const activeReviews = reviews && reviews.length > 0 ? reviews : DEFAULT_REVIEWS;\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setCurrentIndex((prev) => (prev + 1) % activeReviews.length);\n        }, 5000);\n        return () => clearInterval(interval);\n    }, [activeReviews.length]);\n\n    const getStyles = () => {\n        switch (templateId) {\n            case 'classic':\n                return 'bg-[#0a0a0a] border border-[#d4af37] text-[#d4af37]';\n            case 'urban':\n                return 'bg-[#ffff00] border-2 border-black text-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]';\n            case 'modern':\n            default:\n                return 'bg-white/80 backdrop-blur-md border border-white/20 text-slate-800 shadow-lg';\n        }\n    };\n\n    return (\n        <div className=\"fixed bottom-24 left-6 z-40 max-w-xs md:max-w-sm\">\n            <AnimatePresence mode=\"wait\">\n                <motion.div\n                    key={currentIndex}\n                    initial={{ opacity: 0, y: 20, scale: 0.95 }}\n                    animate={{ opacity: 1, y: 0, scale: 1 }}\n                    exit={{ opacity: 0, y: -20, scale: 0.95 }}\n                    transition={{ duration: 0.5 }}\n                    className={`p-4 rounded-xl ${getStyles()} flex gap-3 items-start`}\n                >\n                    <div className={`p-2 rounded-full ${templateId === 'urban' ? 'bg-black text-[#ffff00]' : 'bg-current/10'}`}>\n                        <Quote size={16} className=\"fill-current\" />\n                    </div>\n                    <div>\n                        <div className=\"flex gap-1 mb-1\">\n                            {[...Array(5)].map((_, i) => (\n                                <Star key={i} size={14} className=\"fill-current text-current\" />\n                            ))}\n                        </div>\n                        <p className=\"text-sm font-medium mb-2 leading-snug\">\n                            \"{activeReviews[currentIndex].text}\"\n                        </p>\n                        <div className=\"flex items-center gap-2 text-xs opacity-80 font-bold uppercase tracking-wider\">\n                            <User size={12} />\n                            {activeReviews[currentIndex].name}\n                        </div>\n                    </div>\n                </motion.div>\n            </AnimatePresence>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/reviews/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/shop/components/ProductCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/shop/components/ShopSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/shop/hooks/useCheckout.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1380,1383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1380,1383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { CartItem } from '@/features/products/types';\n\ninterface CheckoutOptions {\n    items: CartItem[];\n    // We accept either ID or Slug, allowing flexibility for the API to resolve it.\n    barberId?: string;\n    slug?: string;\n}\n\nexport function useCheckout() {\n    const [isPending, setIsPending] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n\n    const checkout = async ({ items, barberId, slug }: CheckoutOptions) => {\n        setIsPending(true);\n        setError(null);\n\n        try {\n            const response = await fetch('/api/shop/checkout', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    items,\n                    barberId,\n                    slug, // Pass slug if available\n                }),\n            });\n\n            if (!response.ok) {\n                const data = await response.json();\n                throw new Error(data.error || 'Erro ao iniciar checkout.');\n            }\n\n            const data = await response.json();\n\n            if (data.url) {\n                window.location.href = data.url;\n            } else {\n                throw new Error('URL de redirecionamento n√£o encontrada.');\n            }\n        } catch (err: any) {\n            console.error('Checkout error:', err);\n            setError(err.message || 'Erro de conex√£o.');\n            // Here we could assume a toast trigger if passed as callback, \n            // but returning error state allows UI to handle it.\n            throw err;\n        } finally {\n            setIsPending(false);\n        }\n    };\n\n    return {\n        checkout,\n        isPending,\n        error\n    };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/components/PricingModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/components/UpgradeModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PlanTier' is defined but never used.","line":8,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { useSubscriptionContext } from '../context/SubscriptionContext';\nimport { X, Check } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { usePermission } from '@/hooks/usePermission';\nimport { VISIBLE_PLANS, PlanTier } from '@/config/plans';\nimport { cn } from '@/lib/utils';\n\nexport default function UpgradeModal() {\n    const { isUpgradeModalOpen, closeUpgradeModal, upgradePlan } = useSubscriptionContext();\n    const { plan: currentPlan } = usePermission();\n\n    const handleUpgrade = async (planId: string) => {\n        const plan = VISIBLE_PLANS.find(p => p.id === planId);\n        if (plan?.stripePriceId) {\n            await upgradePlan(plan.stripePriceId);\n        } else {\n            console.error(\"Price ID not found for plan:\", planId);\n        }\n    };\n\n    return (\n        <AnimatePresence>\n            {isUpgradeModalOpen && (\n                <>\n                    {/* Backdrop */}\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        exit={{ opacity: 0 }}\n                        className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]\"\n                        onClick={closeUpgradeModal}\n                    />\n\n                    {/* Modal */}\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.95, y: 20 }}\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\n                        exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                        className=\"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-[95vw] max-w-5xl max-h-[90vh] overflow-y-auto bg-slate-900 border border-slate-800 rounded-2xl shadow-2xl z-[101] p-6 md:p-8\"\n                    >\n                        <div className=\"flex justify-between items-start mb-8\">\n                            <div>\n                                <h2 className=\"text-3xl font-bold text-white mb-2\">Escolha seu Plano</h2>\n                                <p className=\"text-slate-400\">Desbloqueie todo o potencial da sua barbearia hoje mesmo.</p>\n                            </div>\n                            <button\n                                onClick={closeUpgradeModal}\n                                className=\"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors\"\n                            >\n                                <X size={24} />\n                            </button>\n                        </div>\n\n                        <div className=\"grid md:grid-cols-3 gap-6\">\n                            {VISIBLE_PLANS.filter(p => p.tier !== 'FREE').map((plan) => {\n                                const isCurrent = currentPlan === plan.tier;\n                                const isRecommended = plan.recommended;\n\n                                return (\n                                    <div\n                                        key={plan.id}\n                                        className={cn(\n                                            \"relative p-6 rounded-xl border flex flex-col h-full bg-slate-950/50\",\n                                            isCurrent ? \"border-slate-700 opacity-60 pointer-events-none grayscale\" :\n                                                isRecommended\n                                                    ? \"border-cyan-500 shadow-[0_0_20px_rgba(6,182,212,0.15)] bg-slate-900\"\n                                                    : \"border-slate-800 hover:border-slate-700\"\n                                        )}\n                                    >\n                                        {isRecommended && (\n                                            <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-cyan-500 text-black text-xs font-bold rounded-full uppercase tracking-wider animate-pulse\">\n                                                Recomendado\n                                            </div>\n                                        )}\n                                        {isCurrent && (\n                                            <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-slate-700 text-white text-xs font-bold rounded-full uppercase tracking-wider\">\n                                                Atual\n                                            </div>\n                                        )}\n\n                                        <div className=\"mb-6\">\n                                            <h3 className=\"text-xl font-bold text-white mb-2\">{plan.name}</h3>\n                                            <div className=\"flex items-baseline\">\n                                                <span className=\"text-3xl font-bold text-white\">R$ {(plan.price / 100).toFixed(0)}</span>\n                                                <span className=\"text-slate-400 ml-1\">/m√™s</span>\n                                            </div>\n                                        </div>\n\n                                        <ul className=\"space-y-3 mb-8 flex-1\">\n                                            {plan.features.map((feature, i) => (\n                                                <li key={i} className=\"flex items-start gap-3 text-slate-300 text-sm\">\n                                                    <Check className=\"w-4 h-4 text-cyan-500 shrink-0 mt-0.5\" />\n                                                    {feature}\n                                                </li>\n                                            ))}\n                                        </ul>\n\n                                        <Button\n                                            className={cn(\n                                                \"w-full font-bold\",\n                                                isRecommended ? \"bg-cyan-500 hover:bg-cyan-400 text-black\" : \"bg-white text-black hover:bg-slate-200\"\n                                            )}\n                                            onClick={() => handleUpgrade(plan.id)}\n                                            disabled={isCurrent}\n                                        >\n                                            {isCurrent ? \"Seu Plano Atual\" : \"Assinar Agora\"}\n                                        </Button>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </motion.div>\n                </>\n            )}\n        </AnimatePresence>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/context/SubscriptionContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'VISIBLE_PLANS' is defined but never used.","line":5,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1312,1315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1312,1315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":102,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":102,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3583,3586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3583,3586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'feature' is defined but never used.","line":113,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":113,"endColumn":33}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { createContext, useContext, useState, ReactNode, useEffect } from 'react';\nimport { useToast } from '@/components/ui/use-toast';\nimport { PlanTier, VISIBLE_PLANS } from '@/config/plans';\n// import { useAuth } from '@/components/providers/AuthProvider'; // Removed as we use firebase/auth directly\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport { db, auth } from '@/lib/firebase';\nimport { onAuthStateChanged } from 'firebase/auth';\n\ninterface SubscriptionContextType {\n    currentPlan: PlanTier;\n    loading: boolean;\n    upgradePlan: (priceId: string) => Promise<void>;\n    checkAccess: (feature: string) => boolean;\n    openUpgradeModal: () => void;\n    closeUpgradeModal: () => void;\n    isUpgradeModalOpen: boolean;\n    subscriptionStatus: string;\n}\n\nconst SubscriptionContext = createContext<SubscriptionContextType | undefined>(undefined);\n\nexport function SubscriptionProvider({ children }: { children: ReactNode }) {\n    const [currentPlan, setCurrentPlan] = useState<PlanTier>('FREE');\n    const [subscriptionStatus, setSubscriptionStatus] = useState<string>('inactive');\n    const [loading, setLoading] = useState(true);\n    const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false);\n    const { toast } = useToast();\n    const [user, setUser] = useState<any>(null);\n\n    useEffect(() => {\n        const unsubscribeAuth = onAuthStateChanged(auth, (currentUser) => {\n            setUser(currentUser);\n            if (!currentUser) {\n                setCurrentPlan('FREE');\n                setSubscriptionStatus('inactive');\n                setLoading(false);\n            }\n        });\n        return () => unsubscribeAuth();\n    }, []);\n\n    useEffect(() => {\n        if (!user) return;\n\n        const unsubscribeFirestore = onSnapshot(doc(db, 'users', user.uid), (docSnapshot) => {\n            if (docSnapshot.exists()) {\n                const userData = docSnapshot.data();\n                const sub = userData.subscription;\n\n                if (sub) {\n                    setCurrentPlan(sub.plan || 'FREE');\n                    setSubscriptionStatus(sub.status || 'inactive');\n                } else {\n                    setCurrentPlan('FREE');\n                    setSubscriptionStatus('inactive');\n                }\n            }\n            setLoading(false);\n        }, (error) => {\n            console.error(\"Error fetching subscription:\", error);\n            setLoading(false);\n        });\n\n        return () => unsubscribeFirestore();\n    }, [user]);\n\n    const upgradePlan = async (priceId: string) => {\n        if (!user) {\n            toast({\n                title: \"Erro\",\n                description: \"Voc√™ precisa estar logado para assinar.\",\n                variant: \"destructive\"\n            });\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const token = await user.getIdToken();\n            const response = await fetch('/api/checkout', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n                body: JSON.stringify({ priceId })\n            });\n\n            const data = await response.json();\n\n            if (!response.ok) {\n                throw new Error(data.error || 'Erro ao iniciar checkout');\n            }\n\n            if (data.url) {\n                window.location.href = data.url;\n            } else {\n                throw new Error(\"URL de checkout n√£o encontrada\");\n            }\n        } catch (error: any) {\n            console.error(\"Upgrade error:\", error);\n            toast({\n                title: \"Erro no Checkout\",\n                description: error.message,\n                variant: \"destructive\"\n            });\n            setLoading(false);\n        }\n    };\n\n    const checkAccess = (feature: string): boolean => {\n        if (currentPlan === 'BUSINESS') return true;\n        // Logic should match PLAN_FEATURES in config/plans.ts\n        // For now, simple fallback or you can import canUser helper\n        return true;\n    };\n\n    const openUpgradeModal = () => setIsUpgradeModalOpen(true);\n    const closeUpgradeModal = () => setIsUpgradeModalOpen(false);\n\n    return (\n        <SubscriptionContext.Provider value={{\n            currentPlan,\n            loading,\n            upgradePlan,\n            checkAccess,\n            openUpgradeModal,\n            closeUpgradeModal,\n            isUpgradeModalOpen,\n            subscriptionStatus\n        }}>\n            {children}\n        </SubscriptionContext.Provider>\n    );\n}\n\nexport function useSubscriptionContext() {\n    const context = useContext(SubscriptionContext);\n    if (context === undefined) {\n        throw new Error('useSubscriptionContext must be used within a SubscriptionProvider');\n    }\n    return context;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/hooks/useSubscription.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/middleware/subscriptionGuard.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'NextResponse' is defined but never used.","line":1,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'session' is assigned a value but never used.","line":19,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\n\n// This is a simplified guard. In a real middleware, you'd likely use\n// this logic inside your main middleware function.\n// Since we are using Firebase Auth (Client SDK usually) + Admin (Server),\n// middleware access control for Firebase is tricky because it requires verifying\n// the session cookie or ID token.\n\nexport async function checkSubscriptionAccess(req: NextRequest) {\n    // 1. Check if user is authenticated (e.g. via session cookie)\n    // 2. Check if user has required plan\n\n    // For this implementation, we will defer strict access control to the\n    // Layout or Page level (Server Components) where we can use `firebase-admin`\n    // to verify the session cookie if it exists, or just client-side redirection\n    // for a smoother UX if we are relying on Client Auth.\n\n    // If we assume a session cookie named 'session':\n    const session = req.cookies.get('session');\n\n    // If we want to blocking routing at middleware level, we'd need to verify this cookie.\n\n    return true; // Allow by default for now, strict checks in API/Page\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/services/stripeService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'headers' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import 'server-only';\nimport { stripe } from '@/lib/stripe';\nimport { headers } from 'next/headers';\n\nexport async function createCheckoutSession(\n    priceId: string,\n    userId: string,\n    customerEmail: string | undefined, // Pass email to pre-fill\n    returnUrl: string\n) {\n    try {\n        const session = await stripe.checkout.sessions.create({\n            mode: 'subscription',\n            payment_method_types: ['card'],\n            line_items: [\n                {\n                    price: priceId,\n                    quantity: 1,\n                },\n            ],\n            metadata: {\n                userId,\n            },\n            customer_email: customerEmail,\n            success_url: `${returnUrl}?session_id={CHECKOUT_SESSION_ID}`,\n            cancel_url: `${returnUrl}?canceled=true`,\n            subscription_data: {\n                metadata: {\n                    userId\n                }\n            }\n        });\n\n        return { sessionId: session.id, url: session.url };\n    } catch (error) {\n        console.error('Error creating checkout session:', error);\n        throw error;\n    }\n}\n\nexport async function constructWebhookEvent(body: string, signature: string) {\n    if (!process.env.STRIPE_WEBHOOK_SECRET) {\n        throw new Error('STRIPE_WEBHOOK_SECRET is not set');\n    }\n    return stripe.webhooks.constructEvent(body, signature, process.env.STRIPE_WEBHOOK_SECRET);\n}\n\nexport async function createPortalSession(\n    stripeCustomerId: string,\n    returnUrl: string\n) {\n    try {\n        const session = await stripe.billingPortal.sessions.create({\n            customer: stripeCustomerId,\n            return_url: returnUrl,\n        });\n\n        return { url: session.url };\n    } catch (error) {\n        console.error('Error creating portal session:', error);\n        throw error;\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/services/subscriptionService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SubscriptionStatus' is defined but never used.","line":3,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import 'server-only';\nimport { dbAdmin } from '@/lib/firebase-admin';\nimport { Subscription, PlanTier, SubscriptionStatus } from '../types';\nimport { STRIPE_PRICE_MAP } from '@/config/plans';\n\n/**\n * Updates the user's subscription status in Firestore based on Stripe webhook events.\n */\nexport async function updateUserSubscription(\n    stripeCustomerId: string,\n    data: Partial<Subscription>,\n    userId?: string\n) {\n    try {\n        let userDoc;\n\n        // 1. If explicit userId provided (e.g. from session metadata), use it first.\n        // This handles race conditions where stripeCustomerId might not be in Firestore yet.\n        if (userId) {\n            const docRef = dbAdmin.collection('users').doc(userId);\n            const docSnapshot = await docRef.get();\n            if (docSnapshot.exists) {\n                userDoc = docSnapshot;\n                // Ensure stripeCustomerId is set if missing\n                if (data.stripeCustomerId && docSnapshot.data()?.stripeCustomerId !== data.stripeCustomerId) {\n                    await docRef.update({ stripeCustomerId: data.stripeCustomerId });\n                }\n            }\n        }\n\n        // 2. If no userId found/provided, fallback to searching by stripeCustomerId\n        if (!userDoc) {\n            const usersRef = dbAdmin.collection('users');\n            const snapshot = await usersRef\n                .where('stripeCustomerId', '==', stripeCustomerId)\n                .limit(1)\n                .get();\n\n            if (!snapshot.empty) {\n                userDoc = snapshot.docs[0];\n            }\n        }\n\n        if (!userDoc) {\n            console.error(`[SubscriptionService] User not found for Stripe Customer ID: ${stripeCustomerId} (User ID provided: ${userId})`);\n            return { success: false, error: 'User not found' };\n        }\n\n        const finalUserId = userDoc.id;\n\n        // 3. Update user document\n        await userDoc.ref.update({\n            subscriptionStatus: data.status, // Root level field for easy querying\n            isPremium: data.status === 'active' || data.status === 'trialing',\n            subscription: {\n                ...data,\n                updatedAt: new Date().toISOString(),\n            },\n        });\n\n        // 4. Update Custom Claims\n        /* \n           This allows us to check \"request.auth.token.isPremium\" in Security Rules \n           and \"user.claims.isPremium\" in Client SDK. \n        */\n        const isPremium = data.status === 'active' || data.status === 'trialing';\n        await import('@/lib/firebase-admin').then(({ authAdmin }) =>\n            authAdmin.setCustomUserClaims(finalUserId, { isPremium, plan: data.plan })\n        );\n\n        console.log(`[SubscriptionService] Updated subscription for user ${finalUserId}. Premium: ${isPremium}`);\n        return { success: true };\n    } catch (error) {\n        console.error('[SubscriptionService] Error updating user subscription:', error);\n        throw error;\n    }\n}\n\n/**\n * Updates the user's Stripe Customer ID if it doesn't exist.\n */\nexport async function setStripeCustomerId(userId: string, stripeCustomerId: string) {\n    try {\n        await dbAdmin.collection('users').doc(userId).update({\n            stripeCustomerId: stripeCustomerId\n        });\n    } catch (error) {\n        console.error('Error setting stripe customer ID:', error);\n        throw error;\n    }\n}\n\n/**\n * Map Stripe Price ID to Plan Tier\n */\nexport function getPlanFromPriceId(priceId: string): PlanTier {\n    const plan = STRIPE_PRICE_MAP[priceId];\n    return plan || 'FREE';\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/types/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[554,557],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[554,557],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export type SubscriptionStatus =\n    | 'active'\n    | 'past_due'\n    | 'unpaid'\n    | 'canceled'\n    | 'incomplete'\n    | 'incomplete_expired'\n    | 'trialing';\n\nexport type PlanTier = 'FREE' | 'STARTER' | 'PRO' | 'BUSINESS';\n\nexport interface Subscription {\n    plan: PlanTier;\n    status: SubscriptionStatus;\n    currentPeriodEnd: number; // Unix timestamp\n    stripeCustomerId?: string;\n    stripeSubscriptionId?: string;\n    cancelAtPeriodEnd?: boolean;\n}\n\nexport interface StripeEvent {\n    id: string;\n    type: string;\n    data: {\n        object: any;\n    };\n}\n\nexport const PLAN_LIMITS = {\n    FREE: {\n        services: 3,\n        features: [],\n    },\n    STARTER: {\n        services: 10,\n        features: ['scheduling'],\n    },\n    PRO: {\n        services: 999,\n        features: ['scheduling', 'marketing', 'domain'],\n    },\n    BUSINESS: {\n        services: 999,\n        features: ['scheduling', 'marketing', 'domain', 'products', 'api'],\n    },\n};\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/subscription/utils/checkProductLimit.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/team/components/TeamManagement.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'where' is defined but never used.","line":5,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":10,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":10,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":10,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":10,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogTrigger' is defined but never used.","line":11,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":73},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":106,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":106,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":114,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":114,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":153,"column":45,"nodeType":"JSXOpeningElement","endLine":153,"endColumn":131},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":223,"column":37,"nodeType":"JSXOpeningElement","endLine":223,"endColumn":112}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { db } from '@/lib/firebase';\nimport { collection, addDoc, updateDoc, deleteDoc, doc, onSnapshot, query, where } from 'firebase/firestore';\nimport { Barber } from '../types';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';\n\nimport { Switch } from '@/components/ui/switch';\nimport { Trash2, Edit2, Plus, User as UserIcon, Users } from 'lucide-react';\nimport ImageUploader from '@/components/ui/ImageUploader'; // Using existing component\nimport { useToast } from '@/components/ui/use-toast';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface Props {\n    barbershopId: string;\n}\n\nexport default function TeamManagement({ barbershopId }: Props) {\n    const [barbers, setBarbers] = useState<Barber[]>([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isDialogOpen, setIsDialogOpen] = useState(false);\n    const [editingBarber, setEditingBarber] = useState<Barber | null>(null);\n    const { toast } = useToast();\n\n    // Form State\n    const [name, setName] = useState('');\n    const [specialty, setSpecialty] = useState('');\n    const [phone, setPhone] = useState('');\n    const [photoUrl, setPhotoUrl] = useState('');\n\n    useEffect(() => {\n        if (!barbershopId) return;\n\n        const q = query(\n            collection(db, 'barbershops', barbershopId, 'professionals')\n        );\n\n        const unsubscribe = onSnapshot(q, (snapshot) => {\n            const data = snapshot.docs.map(doc => ({\n                id: doc.id,\n                ...doc.data()\n            })) as Barber[];\n            setBarbers(data);\n            setIsLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, [barbershopId]);\n\n    const handleOpenDialog = (barber?: Barber) => {\n        if (barber) {\n            setEditingBarber(barber);\n            setName(barber.name);\n            setSpecialty(barber.specialty);\n            setPhone(barber.phone || '');\n            setPhotoUrl(barber.photoUrl || '');\n        } else {\n            setEditingBarber(null);\n            setName('');\n            setSpecialty('');\n            setPhone('');\n            setPhotoUrl('');\n        }\n        setIsDialogOpen(true);\n    };\n\n    const handleSave = async () => {\n        if (!name || !specialty) {\n            toast({ title: \"Erro\", description: \"Nome e especialidade s√£o obrigat√≥rios.\", variant: \"destructive\" });\n            return;\n        }\n\n        try {\n            const barberData = {\n                name,\n                specialty,\n                phone,\n                photoUrl,\n                active: true\n            };\n\n            if (editingBarber) {\n                await updateDoc(doc(db, 'barbershops', barbershopId, 'professionals', editingBarber.id), barberData);\n                toast({ title: \"Sucesso\", description: \"Profissional atualizado.\" });\n            } else {\n                await addDoc(collection(db, 'barbershops', barbershopId, 'professionals'), barberData);\n                toast({ title: \"Sucesso\", description: \"Profissional adicionado.\" });\n            }\n            setIsDialogOpen(false);\n        } catch (error) {\n            console.error(error);\n            toast({ title: \"Erro\", description: \"Falha ao salvar.\", variant: \"destructive\" });\n        }\n    };\n\n    const handleDelete = async (barberId: string) => {\n        if (!confirm(\"Tem certeza que deseja remover este profissional?\")) return;\n        try {\n            await deleteDoc(doc(db, 'barbershops', barbershopId, 'professionals', barberId));\n            toast({ title: \"Removido\", description: \"Profissional removido com sucesso.\" });\n        } catch (error) {\n            toast({ title: \"Erro\", description: \"Erro ao remover.\", variant: \"destructive\" });\n        }\n    };\n\n    const toggleActive = async (barber: Barber) => {\n        try {\n            await updateDoc(doc(db, 'barbershops', barbershopId, 'professionals', barber.id), { active: !barber.active });\n        } catch (error) {\n            toast({ title: \"Erro\", description: \"Falha ao atualizar status.\", variant: \"destructive\" });\n        }\n    };\n\n    return (\n        <div className=\"w-full space-y-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\n                <div>\n                    <h2 className=\"text-2xl font-bold text-white tracking-tight\">Equipe</h2>\n                    <p className=\"text-slate-400\">Gerencie os profissionais da sua barbearia.</p>\n                </div>\n                <motion.button\n                    whileHover={{ scale: 1.05 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => handleOpenDialog()}\n                    className=\"flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white px-5 py-2.5 rounded-xl font-medium shadow-lg shadow-blue-900/20 transition-colors\"\n                >\n                    <Plus size={20} />\n                    Adicionar Profissional\n                </motion.button>\n            </div>\n\n            <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\n                <AnimatePresence mode='popLayout'>\n                    {barbers.map((barber, index) => (\n                        <motion.div\n                            layout\n                            initial={{ opacity: 0, scale: 0.9, y: 20 }}\n                            animate={{ opacity: 1, scale: 1, y: 0 }}\n                            exit={{ opacity: 0, scale: 0.9, y: 20 }}\n                            transition={{ duration: 0.3, delay: index * 0.05 }}\n                            key={barber.id}\n                            className={`group relative overflow-hidden rounded-2xl border transition-all duration-300 ${!barber.active ? 'bg-slate-900/30 border-slate-800 opacity-60' : 'bg-slate-900 border-slate-800 hover:border-slate-700 hover:shadow-xl hover:shadow-black/20'}`}\n                        >\n                            <div className=\"p-6 flex flex-col items-center text-center\">\n                                <div className=\"relative mb-4\">\n                                    <div className=\"h-24 w-24 rounded-full overflow-hidden bg-slate-800 ring-4 ring-slate-800 group-hover:ring-slate-700 transition-all shadow-xl\">\n                                        {barber.photoUrl ? (\n                                            <img src={barber.photoUrl} alt={barber.name} className=\"h-full w-full object-cover\" />\n                                        ) : (\n                                            <div className=\"h-full w-full flex items-center justify-center text-slate-500\">\n                                                <UserIcon size={40} />\n                                            </div>\n                                        )}\n                                    </div>\n                                    <div className=\"absolute bottom-0 right-0\">\n                                        <Switch\n                                            checked={barber.active}\n                                            onCheckedChange={() => toggleActive(barber)}\n                                            className=\"data-[state=checked]:bg-green-500 ring-2 ring-slate-900\"\n                                        />\n                                    </div>\n                                </div>\n\n                                <h3 className=\"font-bold text-lg text-white mb-1 group-hover:text-blue-400 transition-colors\">{barber.name}</h3>\n                                <p className=\"text-sm font-medium text-slate-400 bg-slate-800/50 px-3 py-1 rounded-full\">{barber.specialty}</p>\n\n                                <div className=\"mt-6 flex items-center gap-2 w-full\">\n                                    <Button\n                                        variant=\"outline\"\n                                        className=\"flex-1 bg-transparent border-slate-700 hover:bg-slate-800 text-slate-300 hover:text-white\"\n                                        onClick={() => handleOpenDialog(barber)}\n                                    >\n                                        <Edit2 className=\"mr-2 h-4 w-4\" /> Editar\n                                    </Button>\n                                    <Button\n                                        variant=\"ghost\"\n                                        size=\"icon\"\n                                        className=\"text-red-400 hover:text-red-300 hover:bg-red-950/30\"\n                                        onClick={() => handleDelete(barber.id)}\n                                    >\n                                        <Trash2 className=\"h-4 w-4\" />\n                                    </Button>\n                                </div>\n                            </div>\n                        </motion.div>\n                    ))}\n                </AnimatePresence>\n\n                {barbers.length === 0 && !isLoading && (\n                    <motion.div\n                        initial={{ opacity: 0 }}\n                        animate={{ opacity: 1 }}\n                        className=\"col-span-full py-16 text-center rounded-3xl border-2 border-dashed border-slate-800 bg-slate-900/50 flex flex-col items-center justify-center gap-4\"\n                    >\n                        <div className=\"w-16 h-16 rounded-full bg-slate-800 flex items-center justify-center text-slate-500\">\n                            <Users size={32} />\n                        </div>\n                        <div className=\"space-y-1\">\n                            <h3 className=\"text-xl font-bold text-white\">Sua equipe est√° vazia</h3>\n                            <p className=\"text-slate-400 max-w-sm mx-auto\">Adicione barbeiros e profissionais para come√ßar a receber agendamentos.</p>\n                        </div>\n                        <Button onClick={() => handleOpenDialog()} variant=\"secondary\" className=\"mt-2\">\n                            Adicionar Primeiro Profissional\n                        </Button>\n                    </motion.div>\n                )}\n            </div>\n\n            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n                <DialogContent className=\"bg-slate-900 border-slate-800 text-white sm:max-w-[425px]\">\n                    <DialogHeader>\n                        <DialogTitle className=\"text-xl font-bold\">{editingBarber ? 'Editar Profissional' : 'Novo Profissional'}</DialogTitle>\n                    </DialogHeader>\n                    <div className=\"space-y-6 py-4\">\n                        <div className=\"flex flex-col items-center gap-4\">\n                            <div className=\"relative w-28 h-28 rounded-full overflow-hidden bg-slate-800 border-4 border-slate-800 shadow-xl group cursor-pointer\" onClick={() => (document.querySelector('.image-uploader-btn') as HTMLElement)?.click()}>\n                                {photoUrl ? (\n                                    <img src={photoUrl} alt=\"Preview\" className=\"w-full h-full object-cover\" />\n                                ) : (\n                                    <div className=\"w-full h-full flex items-center justify-center text-slate-600\">\n                                        <UserIcon size={48} />\n                                    </div>\n                                )}\n                                <div className=\"absolute inset-0 bg-black/50 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300\">\n                                    <ImageUploader\n                                        onUpload={(url) => setPhotoUrl(url)}\n                                        className=\"image-uploader-btn static bg-transparent p-0 text-white hover:bg-transparent\"\n                                        label=\"Alterar\"\n                                    />\n                                </div>\n                            </div>\n                            <span className=\"text-xs text-slate-500 font-medium uppercase tracking-wider\">Foto do Perfil</span>\n                        </div>\n\n                        <div className=\"space-y-4\">\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-slate-400\">Nome Completo</Label>\n                                <Input\n                                    value={name}\n                                    onChange={(e) => setName(e.target.value)}\n                                    placeholder=\"Ex: Jo√£o Silva\"\n                                    className=\"bg-slate-950 border-slate-800 focus:border-blue-600 focus:ring-1 focus:ring-blue-600 text-white placeholder:text-slate-600 h-11\"\n                                />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-slate-400\">Especialidade</Label>\n                                <Input\n                                    value={specialty}\n                                    onChange={(e) => setSpecialty(e.target.value)}\n                                    placeholder=\"Ex: Cortes Cl√°ssicos\"\n                                    className=\"bg-slate-950 border-slate-800 text-white placeholder:text-slate-600 h-11\"\n                                />\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <Label className=\"text-slate-400\">Telefone (Opcional)</Label>\n                                <Input\n                                    value={phone}\n                                    onChange={(e) => setPhone(e.target.value)}\n                                    placeholder=\"(00) 00000-0000\"\n                                    className=\"bg-slate-950 border-slate-800 text-white placeholder:text-slate-600 h-11\"\n                                />\n                            </div>\n                        </div>\n                    </div>\n                    <DialogFooter className=\"gap-2 sm:gap-0\">\n                        <Button variant=\"ghost\" onClick={() => setIsDialogOpen(false)} className=\"text-slate-400 hover:text-white hover:bg-slate-800\">Cancelar</Button>\n                        <Button onClick={handleSave} className=\"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/20\">Salvar Profissional</Button>\n                    </DialogFooter>\n                </DialogContent>\n            </Dialog>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/team/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/BeforeAfterSlider.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMotionValue' is defined but never used.","line":4,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTransform' is defined but never used.","line":4,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useSpring' is defined but never used.","line":4,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronsRight' is defined but never used.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronsLeft' is defined but never used.","line":5,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":53,"column":17,"nodeType":"JSXOpeningElement","endLine":57,"endColumn":19},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":68,"column":17,"nodeType":"JSXOpeningElement","endLine":72,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { motion, useMotionValue, useTransform, useSpring } from 'framer-motion';\nimport { ChevronsLeftRight, ChevronsRight, ChevronsLeft } from 'lucide-react';\n\ninterface BeforeAfterSliderProps {\n    beforeImage: string;\n    afterImage: string;\n    className?: string;\n}\n\nexport default function BeforeAfterSlider({ beforeImage, afterImage, className = '' }: BeforeAfterSliderProps) {\n    const [sliderPosition, setSliderPosition] = useState(50);\n    const [isDragging, setIsDragging] = useState(false);\n    const containerRef = useRef<HTMLDivElement>(null);\n\n    const handleMouseMove = (e: React.MouseEvent<HTMLDivElement>) => {\n        if (!isDragging || !containerRef.current) return;\n        const rect = containerRef.current.getBoundingClientRect();\n        const x = Math.max(0, Math.min(e.clientX - rect.left, rect.width));\n        setSliderPosition((x / rect.width) * 100);\n    };\n\n    const handleTouchMove = (e: React.TouchEvent<HTMLDivElement>) => {\n        if (!isDragging || !containerRef.current) return;\n        const rect = containerRef.current.getBoundingClientRect();\n        const touch = e.touches[0];\n        const x = Math.max(0, Math.min(touch.clientX - rect.left, rect.width));\n        setSliderPosition((x / rect.width) * 100);\n    };\n\n    const handleMouseDown = () => setIsDragging(true);\n    const handleMouseUp = () => setIsDragging(false);\n    const handleTouchStart = () => setIsDragging(true);\n    const handleTouchEnd = () => setIsDragging(false);\n\n    // Stop dragging if mouse leaves the container\n    const handleMouseLeave = () => setIsDragging(false);\n\n    return (\n        <div\n            ref={containerRef}\n            className={`relative w-full aspect-[4/5] md:aspect-video overflow-hidden rounded-xl cursor-ew-resize select-none ${className}`}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n            onMouseLeave={handleMouseLeave}\n            onTouchMove={handleTouchMove}\n            onTouchEnd={handleTouchEnd}\n        >\n            {/* Background Image (After) */}\n            <div className=\"absolute inset-0 w-full h-full\">\n                <img\n                    src={afterImage}\n                    alt=\"After\"\n                    className=\"w-full h-full object-cover pointer-events-none\"\n                />\n                <div className=\"absolute top-4 right-4 bg-black/50 backdrop-blur-md px-3 py-1 rounded-full text-white text-xs font-bold tracking-widest uppercase\">\n                    Depois\n                </div>\n            </div>\n\n            {/* Foreground Image (Before) - Clipped */}\n            <div\n                className=\"absolute inset-0 w-full h-full overflow-hidden\"\n                style={{ clipPath: `inset(0 ${100 - sliderPosition}% 0 0)` }}\n            >\n                <img\n                    src={beforeImage}\n                    alt=\"Before\"\n                    className=\"w-full h-full object-cover pointer-events-none\"\n                />\n                <div className=\"absolute top-4 left-4 bg-black/50 backdrop-blur-md px-3 py-1 rounded-full text-white text-xs font-bold tracking-widest uppercase\">\n                    Antes\n                </div>\n            </div>\n\n            {/* Slider Handle */}\n            <div\n                className=\"absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize z-10\"\n                style={{ left: `${sliderPosition}%` }}\n                onMouseDown={handleMouseDown}\n                onTouchStart={handleTouchStart}\n            >\n                <div className=\"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-lg text-black\">\n                    <ChevronsLeftRight size={20} />\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/ProductsSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChevronRight' is defined but never used.","line":3,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Card' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardContent' is defined but never used.","line":4,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardFooter' is defined but never used.","line":4,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":39},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":4,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { Product } from '@/types/barbershop';\nimport { ShoppingBag, ChevronRight } from 'lucide-react';\nimport { Card, CardContent, CardFooter, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport Image from 'next/image';\n\ninterface ProductsSectionProps {\n    products: Product[];\n}\n\nexport default function ProductsSection({ products }: ProductsSectionProps) {\n    if (!products || products.length === 0) return null;\n\n    const activeProducts = products.filter(p => p.active);\n\n    if (activeProducts.length === 0) return null;\n\n    return (\n        <section className=\"py-20 bg-[var(--color-bg)] text-[var(--color-text)] relative overflow-hidden\">\n            {/* Decorative Background Elements */}\n            <div className=\"absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none\">\n                <div className=\"absolute top-10 right-10 w-64 h-64 bg-[var(--color-primary)] rounded-full blur-3xl\"></div>\n                <div className=\"absolute bottom-10 left-10 w-48 h-48 bg-[var(--color-secondary)] rounded-full blur-3xl\"></div>\n            </div>\n\n            <div className=\"container mx-auto px-4 relative z-10\">\n                <div className=\"text-center mb-16 max-w-2xl mx-auto\">\n                    <Badge variant=\"outline\" className=\"mb-4 border-[var(--color-primary)] text-[var(--color-primary)]\">\n                        Shop\n                    </Badge>\n                    <h2 className=\"text-4xl md:text-5xl font-bold mb-4 tracking-tight\">\n                        Nossos <span className=\"text-[var(--color-primary)]\">Produtos</span>\n                    </h2>\n                    <p className=\"opacity-80 text-lg\">\n                        Leve a qualidade da barbearia para sua casa com nossa linha exclusiva.\n                    </p>\n                </div>\n\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8\">\n                    {activeProducts.map((product) => (\n                        <div\n                            key={product.id}\n                            className=\"group relative bg-white/5 border border-white/10 rounded-2xl overflow-hidden hover:border-[var(--color-primary)]/50 transition-all duration-300 hover:shadow-2xl hover:shadow-[var(--color-primary)]/10\"\n                            style={{\n                                backdropFilter: 'blur(10px)'\n                            }}\n                        >\n                            {/* Image Container */}\n                            <div className=\"relative aspect-square overflow-hidden bg-gray-100 dark:bg-gray-800\">\n                                {product.image ? (\n                                    <Image\n                                        src={product.image}\n                                        alt={product.name}\n                                        fill\n                                        className=\"object-cover group-hover:scale-110 transition-transform duration-500\"\n                                    />\n                                ) : (\n                                    <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                                        <ShoppingBag size={48} strokeWidth={1} />\n                                    </div>\n                                )}\n\n                                {/* Overlay Gradient */}\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\"></div>\n                            </div>\n\n                            {/* Content */}\n                            <div className=\"p-6\">\n                                <h3 className=\"text-xl font-bold mb-2 group-hover:text-[var(--color-primary)] transition-colors line-clamp-1\">\n                                    {product.name}\n                                </h3>\n\n                                {product.description && (\n                                    <p className=\"text-sm opacity-60 mb-4 line-clamp-2 h-10\">\n                                        {product.description}\n                                    </p>\n                                )}\n\n                                <div className=\"flex items-center justify-between mt-auto\">\n                                    <span className=\"text-lg font-bold\">\n                                        R$ {product.price.toFixed(2)}\n                                    </span>\n                                    <Button\n                                        size=\"icon\"\n                                        className=\"rounded-full bg-[var(--color-primary)] hover:bg-[var(--color-primary)]/80 text-white shadow-lg\"\n                                    >\n                                        <ShoppingBag size={18} />\n                                    </Button>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>\n\n                <div className=\"mt-12 text-center\">\n                    <Button\n                        variant=\"outline\"\n                        size=\"lg\"\n                        className=\"border-[var(--color-primary)] text-[var(--color-primary)] hover:bg-[var(--color-primary)] hover:text-white transition-all uppercase tracking-widest text-sm font-bold\"\n                    >\n                        Ver Todos os Produtos\n                    </Button>\n                </div>\n            </div>\n        </section>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateClassic.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":4,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Instagram' is defined but never used.","line":4,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle2' is defined but never used.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeroSectionParallax' is defined but never used.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'colors' is assigned a value but never used.","line":40,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateContact' is assigned a value but never used.","line":42,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":41},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":86,"column":21,"nodeType":"JSXOpeningElement","endLine":90,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { BarbershopData } from '@/types/barbershop';\nimport { MapPin, Phone, Instagram, CheckCircle2, X } from 'lucide-react';\nimport { useState } from 'react';\nimport { motion, useScroll, useTransform, AnimatePresence } from 'framer-motion';\nimport BookingModal from '@/features/booking/components/BookingModal';\nimport HeroSectionParallax from '@/features/marketing/components/HeroSectionParallax';\nimport EditableText from '@/components/ui/EditableText';\nimport EditableImage from '@/components/ui/EditableImage';\nimport ImageUploader from '@/components/ui/ImageUploader';\nimport ServiceCardClassic from '@/features/marketing/components/ServiceCardClassic';\nimport SectionHeading from '@/components/ui/SectionHeading';\nimport FloatingCTA from '@/components/ui/FloatingCTA';\nimport ReviewsSection from '@/features/reviews/components/ReviewsSection';\nimport { useTemplateEditor } from '@/features/templates/hooks/useTemplateEditor';\nimport { useDemoStore } from '@/store/useDemoStore';\nimport { Toast } from '@/components/ui/Toast';\nimport ProductsSection from './ProductsSection';\nimport Footer from '@/features/marketing/components/Footer';\nimport FAQSection from '@/features/marketing/components/FAQSection';\n\ninterface TemplateProps {\n    data: BarbershopData;\n    isEditing?: boolean;\n    onUpdate?: (data: BarbershopData) => void;\n}\n\nexport default function TemplateClassic({ data, isEditing = false, onUpdate }: TemplateProps) {\n    const [isBookingOpen, setIsBookingOpen] = useState(false);\n    const [toastMessage, setToastMessage] = useState<string | null>(null);\n    const { showBooking, showMap, enablePremiumEffects } = useDemoStore();\n\n    // Robust data extraction\n    const content = data.content || {};\n    const services = data.services || [];\n    const gallery = data.gallery || [];\n    const name = data.name || \"Minha Barbearia\";\n    const contact = data.contact || { phone: '', whatsapp: '', address: '', instagram: '' };\n    const colors = data.colors || {};\n\n    const { updateContent, updateContact, updateService, updateGallery } = useTemplateEditor({\n        data,\n        onUpdate\n    });\n\n    const { scrollY } = useScroll();\n    const heroOpacity = useTransform(scrollY, [0, 500], [1, 0]);\n    const heroY = useTransform(scrollY, [0, 500], [0, 200], { clamp: false });\n\n    const handleBookingClick = () => {\n        if (isEditing) return;\n        if (showBooking) {\n            setIsBookingOpen(true);\n        } else {\n            const message = encodeURIComponent(`Ol√°, gostaria de agendar um hor√°rio na ${name}.`);\n            window.open(`https://wa.me/${contact.whatsapp}?text=${message}`, '_blank');\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-classic-bg text-classic-cream font-serif selection:bg-classic-gold selection:text-black overflow-x-hidden\">\n            <BookingModal\n                isOpen={isBookingOpen}\n                onClose={() => setIsBookingOpen(false)}\n                barbershopId={data.id}\n                services={services}\n                themeColor=\"#D4AF37\"\n            />\n\n            <AnimatePresence>\n                {toastMessage && (\n                    <Toast message={toastMessage} onClose={() => setToastMessage(null)} />\n                )}\n            </AnimatePresence>\n\n            {!isEditing && <FloatingCTA onClick={handleBookingClick} />}\n\n            {/* HERO SECTION */}\n            <header className=\"relative h-[90vh] md:h-screen overflow-hidden flex items-center justify-center\">\n                <motion.div\n                    style={{ y: enablePremiumEffects ? heroY : 0, opacity: enablePremiumEffects ? heroOpacity : 1 }}\n                    className=\"absolute inset-0 z-0 bg-black\"\n                >\n                    <div className=\"absolute inset-0 bg-gradient-to-b from-black/80 via-black/40 to-classic-bg z-10\" />\n                    <img\n                        src={content.hero_image}\n                        alt=\"Hero\"\n                        className=\"w-full h-full object-cover object-center opacity-60\"\n                    />\n                    {isEditing && (\n                        <div className=\"absolute top-4 right-4 z-50\">\n                            <ImageUploader onUpload={(url) => updateContent('hero_image', url)} />\n                        </div>\n                    )}\n                </motion.div>\n\n                <div className=\"relative z-20 text-center px-4 max-w-4xl mx-auto\">\n                    <motion.div\n                        initial={{ opacity: 0, scale: 0.9 }}\n                        animate={{ opacity: 1, scale: 1 }}\n                        transition={{ duration: 1 }}\n                        className=\"mb-6 flex justify-center\"\n                    >\n                        {/* Optional Logo Placeholder if exists, otherwise ornamental line */}\n                        <div className=\"h-[2px] w-24 bg-classic-gold\" />\n                    </motion.div>\n\n                    <EditableText\n                        as=\"h1\"\n                        isEditing={isEditing}\n                        value={name}\n                        onChange={(val) => onUpdate && onUpdate({ ...data, name: val })}\n                        className=\"text-4xl sm:text-5xl md:text-7xl lg:text-8xl font-bold text-classic-gold mb-6 tracking-wide drop-shadow-lg\"\n                    />\n\n                    <EditableText\n                        as=\"p\"\n                        isEditing={isEditing}\n                        value={content.description}\n                        onChange={(val) => updateContent('description', val)}\n                        className=\"text-base sm:text-lg md:text-2xl text-white/90 font-sans font-light tracking-[0.2em] uppercase mb-12\"\n                    />\n\n\n                    <motion.div\n                        role=\"button\"\n                        tabIndex={0}\n                        whileHover={{ scale: 1.05 }}\n                        whileTap={{ scale: 0.95 }}\n                        onClick={handleBookingClick}\n                        className=\"\n                            bg-transparent border border-classic-gold text-classic-gold cursor-pointer\n                            px-8 py-3 md:px-10 md:py-3 text-xs md:text-sm md:text-base font-bold uppercase tracking-[0.25em] relative overflow-hidden group\n                            hover:text-black transition-colors duration-500 w-full sm:w-auto\n                        \"\n                    >\n                        <span className=\"relative z-10 block min-w-[120px]\">\n                            <EditableText\n                                as=\"span\"\n                                isEditing={isEditing}\n                                value={content.cta_text || \"Agendar Agora\"}\n                                onChange={(val) => updateContent('cta_text', val)}\n                                className=\"text-inherit whitespace-nowrap block w-full text-center cursor-text\"\n                            />\n                        </span>\n                        <div className=\"absolute inset-0 bg-classic-gold transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left -z-0\"></div>\n                    </motion.div>\n                </div>\n            </header>\n\n            {/* SERVICES SECTION */}\n            <section className=\"py-24 px-6 md:px-12 relative overflow-hidden\">\n                {/* Background Pattern */}\n                <div className=\"absolute inset-0 opacity-[0.03] pointer-events-none\"\n                    style={{ backgroundImage: `repeating-linear-gradient(45deg, #D4AF37 0, #D4AF37 1px, transparent 0, transparent 50%)`, backgroundSize: '20px 20px' }}\n                />\n\n                <div className=\"container mx-auto max-w-4xl relative z-10\">\n                    <SectionHeading\n                        title={content.services_title || \"Nossos Servi√ßos\"}\n                        subtitle={content.services_subtitle || \"Experi√™ncia & Tradi√ß√£o\"}\n                        isEditing={isEditing}\n                        onTitleChange={(val) => updateContent('services_title', val)}\n                        onSubtitleChange={(val) => updateContent('services_subtitle', val)}\n                    />\n\n                    <div className=\"grid grid-cols-1 gap-6\">\n                        {services.map((service, index) => (\n                            <motion.div\n                                key={index}\n                                initial={enablePremiumEffects ? { opacity: 0, y: 20 } : { opacity: 1 }}\n                                whileInView={{ opacity: 1, y: 0 }}\n                                viewport={{ once: true, margin: \"-50px\" }}\n                                transition={{ delay: index * 0.1 }}\n                            >\n                                <ServiceCardClassic\n                                    onClick={handleBookingClick}\n                                    serviceName={\n                                        <EditableText\n                                            as=\"span\"\n                                            isEditing={isEditing}\n                                            value={service.name}\n                                            onChange={(val) => updateService(index, 'name', val)}\n                                        />\n                                    }\n                                    duration={\n                                        <EditableText\n                                            as=\"span\"\n                                            isEditing={isEditing}\n                                            value={service.duration}\n                                            onChange={(val) => updateService(index, 'duration', val)}\n                                        />\n                                    }\n                                    price={\n                                        <EditableText\n                                            as=\"span\"\n                                            isEditing={isEditing}\n                                            value={service.price.toString()}\n                                            onChange={(val) => updateService(index, 'price', parseFloat(val) || 0)}\n                                        />\n                                    }\n                                />\n                            </motion.div>\n                        ))}\n                    </div>\n                </div>\n            </section>\n\n            {/* GALLERY SECTION */}\n            <section className=\"py-24 bg-[#080505]\">\n                <div className=\"container mx-auto px-6\">\n                    <SectionHeading\n                        title={content.gallery_title || \"O Ambiente\"}\n                        subtitle={content.gallery_subtitle || \"Nossa Casa\"}\n                        isEditing={isEditing}\n                        onTitleChange={(val) => updateContent('gallery_title', val)}\n                        onSubtitleChange={(val) => updateContent('gallery_subtitle', val)}\n                    />\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 auto-rows-[250px]\">\n                        {gallery.map((img, i) => (\n                            <motion.div\n                                key={i}\n                                initial={enablePremiumEffects ? { opacity: 0, y: 50 } : { opacity: 1, y: 0 }}\n                                whileInView={{ opacity: 1, y: 0 }}\n                                viewport={{ once: true }}\n                                transition={{ delay: i * 0.1 }}\n                                className={`relative group cursor-pointer overflow-hidden rounded-lg ${gallery.length === 1 ? 'aspect-[16/9]' :\n                                    gallery.length === 3 && i === 0 ? 'md:col-span-2 md:row-span-2 aspect-[4/3]' :\n                                        'aspect-square'\n                                    }`}\n                            >\n                                <div className=\"absolute inset-0 border border-[var(--color-primary)] opacity-30 translate-x-4 translate-y-4 group-hover:translate-x-2 group-hover:translate-y-2 transition-transform duration-500 pointer-events-none\"></div>\n                                <div className=\"relative w-full h-full overflow-hidden grayscale group-hover:grayscale-0 transition-all duration-700\">\n                                    <EditableImage\n                                        src={img}\n                                        alt={`Gallery ${i}`}\n                                        isEditing={isEditing}\n                                        onUpload={(url) => updateGallery(i, url)}\n                                        className=\"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700\"\n                                        containerClassName=\"w-full h-full\"\n                                    />\n                                    {isEditing && (\n                                        <div className=\"absolute top-2 right-2 z-20\">\n                                            <button\n                                                onClick={(e) => {\n                                                    e.stopPropagation();\n                                                    if (!onUpdate) return;\n                                                    const newGallery = gallery.filter((_, index) => index !== i);\n                                                    onUpdate({ ...data, gallery: newGallery });\n                                                }}\n                                                className=\"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors\"\n                                            >\n                                                <X size={16} />\n                                            </button>\n                                        </div>\n                                    )}\n                                </div>\n                            </motion.div>\n                        ))}\n                        {isEditing && gallery.length < 6 && (\n                            <div className=\"flex items-center justify-center border border-dashed border-classic-gold/30 bg-classic-gold/5\">\n                                <ImageUploader\n                                    onUpload={(url) => {\n                                        if (!onUpdate) return;\n                                        onUpdate({ ...data, gallery: [...gallery, url] });\n                                    }}\n                                    label=\"Adicionar Foto\"\n                                />\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </section>\n\n            {/* PRODUCTS SECTION (Optional) */}\n            {content.showProductsSection && (\n                <section className=\"bg-classic-bg border-t border-classic-gold/10\">\n                    <ProductsSection products={data.products || []} />\n                </section>\n            )}\n\n            {/* REVIEWS SECTION */}\n            <div className=\"border-t border-classic-gold/10 bg-classic-bg\">\n                <ReviewsSection reviews={data.reviews || []} templateId=\"classic\" />\n            </div>\n\n            {/* FOOTER */}\n            {/* FOOTER */}\n            {data.faq && data.faq.length > 0 && (\n                <FAQSection\n                    faq={data.faq}\n                    isEditing={isEditing}\n                    onUpdate={(index, field, value) => {\n                        const newFaq = [...(data.faq || [])];\n                        newFaq[index] = { ...newFaq[index], [field]: value };\n                        // We need a wrapper to call onUpdate with full data\n                        if (onUpdate) {\n                            onUpdate({ ...data, faq: newFaq });\n                        }\n                    }}\n                    onAdd={() => {\n                        const newFaq = [...(data.faq || []), { question: \"Nova Pergunta\", answer: \"Nova Resposta\" }];\n                        if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                    }}\n                    onRemove={(index) => {\n                        const newFaq = [...(data.faq || [])];\n                        newFaq.splice(index, 1);\n                        if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                    }}\n                    templateId=\"classic\"\n                />\n            )}\n\n            {showMap && (\n                <Footer\n                    data={data}\n                    isEditing={isEditing}\n                    onUpdate={onUpdate}\n                    templateId=\"classic\"\n                />\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateModern.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Instagram' is defined but never used.","line":5,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":5,"column":73,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":79},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clsx' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateContact' is assigned a value but never used.","line":46,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":41},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":210,"column":41,"nodeType":"JSXOpeningElement","endLine":214,"endColumn":43},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":339,"column":45,"nodeType":"JSXOpeningElement","endLine":343,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useRef } from 'react';\nimport { motion, AnimatePresence, useScroll, useTransform } from 'framer-motion';\nimport { Phone, Instagram, ArrowRight, Menu, X, ArrowUpRight, Scissors, MapPin } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { BarbershopData } from '@/types/barbershop';\nimport BookingModal from '@/features/booking/components/BookingModal';\nimport EditableText from '@/components/ui/EditableText';\nimport ImageUploader from '@/components/ui/ImageUploader';\nimport ReviewsSection from '@/features/reviews/components/ReviewsSection';\nimport { useDemoStore } from '@/store/useDemoStore';\nimport { useTemplateEditor } from '@/features/templates/hooks/useTemplateEditor';\nimport { Toast } from '@/components/ui/Toast';\nimport BeforeAfterSlider from './BeforeAfterSlider';\nimport Footer from '@/features/marketing/components/Footer';\nimport FAQSection from '@/features/marketing/components/FAQSection';\nimport ProductsSection from './ProductsSection';\n\ninterface TemplateProps {\n    data: BarbershopData;\n    isEditing?: boolean;\n    onUpdate?: (data: BarbershopData) => void;\n}\n\nexport default function TemplateModern({ data, isEditing = false, onUpdate }: TemplateProps) {\n    const [isBookingOpen, setIsBookingOpen] = useState(false);\n    const [toastMessage, setToastMessage] = useState<string | null>(null);\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n\n    // Smooth Scroll / Parallax\n    const containerRef = useRef<HTMLDivElement>(null);\n    const { scrollYProgress } = useScroll({ target: containerRef });\n    const heroImageY = useTransform(scrollYProgress, [0, 0.5], [0, 100]);\n\n    const { showBooking, showMap } = useDemoStore();\n\n    // Robust data extraction\n    const content = data.content || {};\n    const services = data.services || [];\n    const gallery = data.gallery || [];\n    const name = data.name || \"Minha Barbearia\";\n    const contact = data.contact || { phone: '', whatsapp: '', address: '', instagram: '' };\n    const colors = data.colors || {};\n\n    const { updateContent, updateContact, updateService, updateGallery } = useTemplateEditor({\n        data,\n        onUpdate\n    });\n\n    const handleBookingClick = () => {\n        if (isEditing) return;\n        if (showBooking) {\n            setIsBookingOpen(true);\n        } else {\n            const message = encodeURIComponent(`Ol√°, gostaria de agendar um hor√°rio na ${name}.`);\n            window.open(`https://wa.me/${contact.whatsapp}?text=${message}`, '_blank');\n        }\n    };\n\n    // Minimalist Palette: Light Gray items, deeply dark text.\n    const cssVariables = {\n        '--color-accent': colors.secondary || '#111111',\n        '--color-bg': '#FAFAFA', // Always light for this theme\n        '--color-text': '#111111',\n        '--color-secondary-bg': '#F4F4F5',\n    } as React.CSSProperties;\n\n    return (\n        <div ref={containerRef} style={cssVariables} className=\"min-h-screen bg-[var(--color-bg)] text-[var(--color-text)] font-sans antialiased selection:bg-black selection:text-white\">\n            <BookingModal\n                isOpen={isBookingOpen}\n                onClose={() => setIsBookingOpen(false)}\n                barbershopId={data.id}\n                services={services}\n                themeColor={colors.secondary || '#111'}\n            />\n\n            <AnimatePresence>\n                {toastMessage && (\n                    <Toast message={toastMessage} onClose={() => setToastMessage(null)} />\n                )}\n            </AnimatePresence>\n\n            {/* HEADER / NAV - Minimalist Sticky */}\n            <motion.nav\n                initial={{ y: -100 }}\n                animate={{ y: 0 }}\n                className=\"fixed top-0 left-0 right-0 z-50 bg-[var(--color-bg)]/80 backdrop-blur-md border-b border-black/5\"\n            >\n                <div className=\"max-w-[1800px] mx-auto px-6 h-20 flex justify-between items-center\">\n                    <div className=\"text-xl font-bold tracking-tight uppercase flex items-center gap-2\">\n                        <Scissors size={18} />\n                        <EditableText\n                            as=\"span\"\n                            isEditing={isEditing}\n                            value={name}\n                            onChange={(val) => onUpdate && onUpdate({ ...data, name: val })}\n                        />\n                    </div>\n\n                    {/* Desktop Menu */}\n                    <div className=\"hidden md:flex gap-8 text-sm font-medium tracking-wide uppercase text-gray-500\">\n                        <a href=\"#services\" className=\"hover:text-black transition-colors\">Servi√ßos</a>\n                        <a href=\"#transformation\" className=\"hover:text-black transition-colors\">Transforma√ß√£o</a>\n                        <a href=\"#gallery\" className=\"hover:text-black transition-colors\">Galeria</a>\n                        <a href=\"#location\" className=\"hover:text-black transition-colors\">Local</a>\n                    </div>\n\n                    <div className=\"hidden md:block\">\n                        <button\n                            onClick={handleBookingClick}\n                            className=\"bg-black text-white px-6 py-2.5 text-xs font-bold uppercase tracking-wider hover:bg-gray-800 transition-colors\"\n                        >\n                            Agendar\n                        </button>\n                    </div>\n\n                    <button\n                        onClick={() => setIsMenuOpen(!isMenuOpen)}\n                        className=\"md:hidden\"\n                    >\n                        {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\n                    </button>\n                </div>\n            </motion.nav>\n\n            {/* Mobile Menu */}\n            <AnimatePresence>\n                {isMenuOpen && (\n                    <motion.div\n                        initial={{ opacity: 0, height: 0 }}\n                        animate={{ opacity: 1, height: 'auto' }}\n                        exit={{ opacity: 0, height: 0 }}\n                        className=\"fixed top-20 left-0 right-0 z-40 bg-[var(--color-bg)] border-b border-black/5 overflow-hidden md:hidden\"\n                    >\n                        <div className=\"p-6 flex flex-col gap-6 text-center text-sm font-bold uppercase tracking-widest\">\n                            <a href=\"#services\" onClick={() => setIsMenuOpen(false)}>Servi√ßos</a>\n                            <a href=\"#transformation\" onClick={() => setIsMenuOpen(false)}>Transforma√ß√£o</a>\n                            <a href=\"#gallery\" onClick={() => setIsMenuOpen(false)}>Galeria</a>\n                            <button onClick={handleBookingClick} className=\"bg-black text-white py-4 w-full mt-4\">Agendar Agora</button>\n                        </div>\n                    </motion.div>\n                )}\n            </AnimatePresence>\n\n            {/* HERO SECTION - Split Layout */}\n            {/* Note: Header/Nav is fixed. Hero is usually first but can be reordered if user really wants, \n                but keeping it conceptually separate from 'sections' list might be safer? \n                Actually, let's include it in the map for full flexibility as requested.\n            */}\n\n            {/* DYNAMIC SECTIONS RENDER */}\n            {(content.sections || ['hero', 'services', 'transformation', 'gallery', 'products', 'reviews', 'contact']).map((sectionId) => {\n                switch (sectionId) {\n                    case 'hero':\n                        return (\n                            <header key={sectionId} className=\"relative pt-20 min-h-screen flex flex-col md:flex-row\">\n                                {/* Left: Content */}\n                                <div className=\"w-full md:w-1/2 flex items-center justify-center p-6 md:p-24 relative z-10\">\n                                    <div className=\"max-w-xl\">\n                                        <motion.div\n                                            initial={{ opacity: 0, y: 30 }}\n                                            whileInView={{ opacity: 1, y: 0 }}\n                                            viewport={{ once: true }}\n                                            transition={{ duration: 0.8 }}\n                                        >\n                                            <h2 className=\"text-sm font-bold tracking-[0.2em] uppercase text-gray-400 mb-6\">Barbearia Premium</h2>\n\n                                            <div className=\"text-6xl md:text-8xl font-black tracking-tighter leading-[0.9] mb-8 text-[var(--color-text)]\">\n                                                <span className=\"block\">NOVO</span>\n                                                <span className=\"block text-transparent bg-clip-text bg-gradient-to-br from-black to-gray-400\">\n                                                    CONCEITO\n                                                </span>\n                                            </div>\n\n                                            <EditableText\n                                                as=\"p\"\n                                                isEditing={isEditing}\n                                                value={content.description}\n                                                onChange={(val) => updateContent('description', val)}\n                                                className=\"text-lg md:text-xl text-gray-500 font-light leading-relaxed mb-10 max-w-md\"\n                                            />\n\n                                            <div className=\"flex flex-col sm:flex-row gap-4\">\n                                                <button\n                                                    onClick={handleBookingClick}\n                                                    className=\"px-8 py-4 bg-black text-white text-sm font-bold uppercase tracking-widest hover:bg-gray-800 transition-all flex items-center justify-center gap-2 group\"\n                                                >\n                                                    Agendar Agora\n                                                    <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                                                </button>\n                                                <a\n                                                    href=\"#services\"\n                                                    className=\"px-8 py-4 bg-gray-100 text-black text-sm font-bold uppercase tracking-widest hover:bg-gray-200 transition-all flex items-center justify-center\"\n                                                >\n                                                    Ver Servi√ßos\n                                                </a>\n                                            </div>\n                                        </motion.div>\n                                    </div>\n                                </div>\n\n                                {/* Right: Image (Full height on Desktop, Aspect ratio on mobile) */}\n                                <div className=\"w-full md:w-1/2 h-[50vh] md:h-screen relative bg-gray-100 overflow-hidden\">\n                                    <motion.div\n                                        style={{ y: heroImageY }}\n                                        className=\"absolute inset-0 w-full h-[120%]\" // slightly larger for parallax\n                                    >\n                                        <img\n                                            src={content.hero_image}\n                                            alt=\"Hero\"\n                                            className=\"w-full h-full object-cover\"\n                                        />\n                                        <div className=\"absolute inset-0 bg-black/5\" />\n                                    </motion.div>\n\n                                    {isEditing && (\n                                        <div className=\"absolute top-6 right-6 z-20\">\n                                            <ImageUploader onUpload={(url) => updateContent('hero_image', url)} />\n                                        </div>\n                                    )}\n                                </div>\n                            </header>\n                        );\n\n                    case 'services':\n                        return (\n                            <section key={sectionId} id=\"services\" className=\"py-24 px-6 md:px-24 bg-white\">\n                                <div className=\"max-w-[1800px] mx-auto\">\n                                    <motion.div\n                                        initial={{ opacity: 0, y: 20 }}\n                                        whileInView={{ opacity: 1, y: 0 }}\n                                        viewport={{ once: true }}\n                                        className=\"flex flex-col md:flex-row justify-between items-end mb-20 pb-4 border-b border-gray-100\"\n                                    >\n                                        <h2 className=\"text-4xl md:text-5xl font-bold tracking-tight text-[var(--color-text)]\">\n                                            Menu de Servi√ßos\n                                        </h2>\n                                        <p className=\"text-gray-400 mt-4 md:mt-0 font-light uppercase tracking-widest text-sm\">\n                                            Experi√™ncia & Precis√£o\n                                        </p>\n                                    </motion.div>\n\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-12 gap-y-16\">\n                                        {services.map((service, index) => (\n                                            <motion.div\n                                                key={index}\n                                                initial={{ opacity: 0, y: 20 }}\n                                                whileInView={{ opacity: 1, y: 0 }}\n                                                viewport={{ once: true }}\n                                                transition={{ delay: index * 0.1 }}\n                                                onClick={handleBookingClick}\n                                                className=\"group cursor-pointer\"\n                                            >\n                                                <div className=\"flex justify-between items-baseline mb-3\">\n                                                    <EditableText\n                                                        as=\"h3\"\n                                                        isEditing={isEditing}\n                                                        value={service.name}\n                                                        onChange={(val) => updateService(index, 'name', val)}\n                                                        className=\"text-2xl font-medium group-hover:underline decoration-1 underline-offset-4\"\n                                                    />\n                                                    <div className=\"text-xl font-bold\">\n                                                        <span className=\"text-xs align-top mr-1\">R$</span>\n                                                        <EditableText\n                                                            as=\"span\"\n                                                            isEditing={isEditing}\n                                                            value={service.price.toString()}\n                                                            onChange={(val) => updateService(index, 'price', parseFloat(val) || 0)}\n                                                        />\n                                                    </div>\n                                                </div>\n                                                <div className=\"flex justify-between items-center text-gray-400 text-sm\">\n                                                    <EditableText\n                                                        as=\"span\"\n                                                        isEditing={isEditing}\n                                                        value={service.duration}\n                                                        onChange={(val) => updateService(index, 'duration', val)}\n                                                    />\n                                                    <ArrowUpRight className=\"opacity-0 group-hover:opacity-100 transition-opacity w-4 h-4\" />\n                                                </div>\n                                            </motion.div>\n                                        ))}\n                                    </div>\n                                </div>\n                            </section>\n                        );\n\n                    case 'transformation':\n                        return (\n                            <section key={sectionId} id=\"transformation\" className=\"py-24 px-6 md:px-24 bg-[var(--color-secondary-bg)]\">\n                                <div className=\"max-w-[1400px] mx-auto grid md:grid-cols-12 gap-12 items-center\">\n                                    <div className=\"md:col-span-5 order-2 md:order-1\">\n                                        <div className=\"p-4 bg-white shadow-xl rounded-sm\">\n                                            <BeforeAfterSlider\n                                                beforeImage=\"https://images.unsplash.com/photo-1599351431202-6e0000a28382?q=80&w=1000&auto=format&fit=crop\"\n                                                afterImage=\"https://images.unsplash.com/photo-1621605815971-fbc98d665033?q=80&w=1000&auto=format&fit=crop\"\n                                                className=\"aspect-[4/5]\"\n                                            />\n                                        </div>\n                                    </div>\n\n                                    <div className=\"md:col-span-7 order-1 md:order-2 md:pl-12\">\n                                        <h2 className=\"text-xs font-bold tracking-[0.2em] uppercase text-gray-400 mb-6\">Resultado Real</h2>\n                                        <h3 className=\"text-5xl md:text-7xl font-bold mb-8 tracking-tighter\">\n                                            Mais que um corte, <br /> uma declara√ß√£o.\n                                        </h3>\n                                        <p className=\"text-xl text-gray-500 font-light mb-8 max-w-lg leading-relaxed\">\n                                            Acreditamos que a verdadeira eleg√¢ncia est√° nos detalhes. Confira a transforma√ß√£o que elevamos ao status de arte.\n                                        </p>\n                                    </div>\n                                </div>\n                            </section>\n                        );\n\n                    case 'gallery':\n                        return (\n                            <section key={sectionId} id=\"gallery\" className=\"py-24 px-6 md:px-24 bg-white\">\n                                <motion.h2\n                                    initial={{ opacity: 0 }}\n                                    whileInView={{ opacity: 1 }}\n                                    viewport={{ once: true }}\n                                    className=\"text-center text-4xl font-bold tracking-tight mb-16\"\n                                >\n                                    Editorial Visual\n                                </motion.h2>\n\n                                <div className=\"max-w-[1800px] mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                                    {gallery.map((img, i) => (\n                                        <motion.div\n                                            key={i}\n                                            initial={{ opacity: 0, scale: 0.95 }}\n                                            whileInView={{ opacity: 1, scale: 1 }}\n                                            viewport={{ once: true }}\n                                            transition={{ delay: i * 0.1 }}\n                                            className={`relative group overflow-hidden bg-gray-100 aspect-[3/4] ${i === 0 ? 'md:col-span-2 md:row-span-2 aspect-[3/3.3]' : ''}`}\n                                        >\n                                            <img\n                                                src={img}\n                                                alt={`Gallery ${i}`}\n                                                className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\n                                            />\n                                            {isEditing && (\n                                                <ImageUploader onUpload={(url) => updateGallery(i, url)} />\n                                            )}\n                                        </motion.div>\n                                    ))}\n                                </div>\n                            </section>\n                        );\n\n                    case 'products':\n                        if (!content.showProductsSection) return null;\n                        return (\n                            <section key={sectionId} className=\"bg-white\">\n                                <ProductsSection products={data.products || []} />\n                            </section>\n                        );\n\n                    case 'reviews':\n                        return (\n                            <section key={sectionId} className=\"bg-[var(--color-secondary-bg)] py-12\">\n                                <ReviewsSection reviews={data.reviews || []} templateId=\"modern\" />\n                            </section>\n                        );\n\n                    case 'contact':\n                        // Contact often doubles as Footer in this design, but if 'contact' is separate, we'd render it. \n                        // However, TemplateModern uses the Footer for contact info. \n                        // If we move 'contact' via drag drop, ideally the footer moves? \n                        // Or we render a contact section. \n                        // For now, let's treat the Footer as the Contact section.\n                        if (!showMap) return null;\n                        return (\n                            <Footer\n                                key={sectionId}\n                                data={data}\n                                isEditing={isEditing}\n                                onUpdate={onUpdate}\n                                templateId=\"modern\"\n                            />\n                        );\n\n                    case 'faq':\n                        if (!data.faq || data.faq.length === 0) return null;\n                        return (\n                            <FAQSection\n                                key={sectionId}\n                                faq={data.faq}\n                                isEditing={isEditing}\n                                onUpdate={(index, field, value) => {\n                                    const newFaq = [...(data.faq || [])];\n                                    newFaq[index] = { ...newFaq[index], [field]: value };\n                                    if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                                }}\n                                onAdd={() => {\n                                    const newFaq = [...(data.faq || []), { question: \"Nova Pergunta\", answer: \"Nova Resposta\" }];\n                                    if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                                }}\n                                onRemove={(index) => {\n                                    const newFaq = [...(data.faq || [])];\n                                    newFaq.splice(index, 1);\n                                    if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                                }}\n                                templateId=\"modern\"\n                            />\n                        );\n\n                    default:\n                        return null;\n                }\n            })}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MapPin' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Phone' is defined but never used.","line":5,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Instagram' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":5,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Info' is defined but never used.","line":5,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ReviewsSection' is defined but never used.","line":11,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'enablePremiumEffects' is assigned a value but never used.","line":29,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1586,1589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1586,1589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateContact' is assigned a value but never used.","line":43,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateGallery' is assigned a value but never used.","line":43,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":43,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SectionHeader' is assigned a value but never used.","line":68,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":24},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:136:26\n  134 |\n  135 |                     <div className=\"hidden md:block\">\n> 136 |                         <PrimaryButton onClick={handleBookingClick} className=\"!py-2 !px-6 text-sm\">\n      |                          ^^^^^^^^^^^^^ This component is created during render\n  137 |                             Agendar\n  138 |                         </PrimaryButton>\n  139 |                     </div>\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:75:27\n  73 |     );\n  74 |\n> 75 |     const PrimaryButton = ({ children, onClick, className }: { children: React.ReactNode, onClick: () => void, className?: string }) => (\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 76 |         <button\n     | ^^^^^^^^^^^^^^^\n> 77 |             onClick={onClick}\n     ‚Ä¶\n     | ^^^^^^^^^^^^^^^\n> 85 |         </button>\n     | ^^^^^^^^^^^^^^^\n> 86 |     );\n     | ^^^^^^ The component is created during render here\n  87 |\n  88 |     const OutlinedButton = ({ children, onClick }: { children: React.ReactNode, onClick?: () => void }) => (\n  89 |         <button","line":136,"column":26,"nodeType":null,"endLine":136,"endColumn":39},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:180:34\n  178 |                                     Local\n  179 |                                 </a>\n> 180 |                                 <PrimaryButton onClick={() => { handleBookingClick(); setIsMobileMenuOpen(false); }} className=\"w-full\">\n      |                                  ^^^^^^^^^^^^^ This component is created during render\n  181 |                                     Agendar Agora\n  182 |                                 </PrimaryButton>\n  183 |                             </div>\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:75:27\n  73 |     );\n  74 |\n> 75 |     const PrimaryButton = ({ children, onClick, className }: { children: React.ReactNode, onClick: () => void, className?: string }) => (\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 76 |         <button\n     | ^^^^^^^^^^^^^^^\n> 77 |             onClick={onClick}\n     ‚Ä¶\n     | ^^^^^^^^^^^^^^^\n> 85 |         </button>\n     | ^^^^^^^^^^^^^^^\n> 86 |     );\n     | ^^^^^^ The component is created during render here\n  87 |\n  88 |     const OutlinedButton = ({ children, onClick }: { children: React.ReactNode, onClick?: () => void }) => (\n  89 |         <button","line":180,"column":34,"nodeType":null,"endLine":180,"endColumn":47},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":193,"column":21,"nodeType":"JSXOpeningElement","endLine":197,"endColumn":23},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:233:30\n  231 |\n  232 |                         <div className=\"flex flex-col md:flex-row gap-4\">\n> 233 |                             <PrimaryButton onClick={handleBookingClick} className=\"w-full md:w-auto text-center\">\n      |                              ^^^^^^^^^^^^^ This component is created during render\n  234 |                                 Agendar Hor√°rio\n  235 |                             </PrimaryButton>\n  236 |                             <OutlinedButton onClick={() => document.getElementById('services')?.scrollIntoView({ behavior: 'smooth' })}>\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:75:27\n  73 |     );\n  74 |\n> 75 |     const PrimaryButton = ({ children, onClick, className }: { children: React.ReactNode, onClick: () => void, className?: string }) => (\n     |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 76 |         <button\n     | ^^^^^^^^^^^^^^^\n> 77 |             onClick={onClick}\n     ‚Ä¶\n     | ^^^^^^^^^^^^^^^\n> 85 |         </button>\n     | ^^^^^^^^^^^^^^^\n> 86 |     );\n     | ^^^^^^ The component is created during render here\n  87 |\n  88 |     const OutlinedButton = ({ children, onClick }: { children: React.ReactNode, onClick?: () => void }) => (\n  89 |         <button","line":233,"column":30,"nodeType":null,"endLine":233,"endColumn":43},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:236:30\n  234 |                                 Agendar Hor√°rio\n  235 |                             </PrimaryButton>\n> 236 |                             <OutlinedButton onClick={() => document.getElementById('services')?.scrollIntoView({ behavior: 'smooth' })}>\n      |                              ^^^^^^^^^^^^^^ This component is created during render\n  237 |                                 Nossos Servi√ßos\n  238 |                             </OutlinedButton>\n  239 |                         </div>\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/components/TemplateUrban.tsx:88:28\n  86 |     );\n  87 |\n> 88 |     const OutlinedButton = ({ children, onClick }: { children: React.ReactNode, onClick?: () => void }) => (\n     |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 89 |         <button\n     | ^^^^^^^^^^^^^^^\n> 90 |             onClick={onClick}\n     | ^^^^^^^^^^^^^^^\n> 91 |             className=\"border border-white/20 text-white font-bold uppercase tracking-wider py-4 px-8 hover:bg-white hover:text-black transition-all duration-300\"\n     | ^^^^^^^^^^^^^^^\n> 92 |         >\n     | ^^^^^^^^^^^^^^^\n> 93 |             {children}\n     | ^^^^^^^^^^^^^^^\n> 94 |         </button>\n     | ^^^^^^^^^^^^^^^\n> 95 |     );\n     | ^^^^^^ The component is created during render here\n  96 |\n  97 |     return (\n  98 |         <div style={cssVariables} className=\"min-h-screen bg-[var(--color-bg)] text-[var(--color-text)] font-mono selection:bg-[var(--color-primary)] selection:text-black overflow-x-hidden relative transition-colors duration-300\">","line":236,"column":30,"nodeType":null,"endLine":236,"endColumn":44},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":321,"column":37,"nodeType":"JSXOpeningElement","endLine":325,"endColumn":39}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { MapPin, Phone, Instagram, ArrowRight, Scissors, Info, Menu, X } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { BarbershopData } from '@/types/barbershop';\nimport BookingModal from '@/features/booking/components/BookingModal';\nimport EditableText from '@/components/ui/EditableText';\nimport ImageUploader from '@/components/ui/ImageUploader';\nimport ReviewsSection from '@/features/reviews/components/ReviewsSection';\nimport { useTemplateEditor } from '@/features/templates/hooks/useTemplateEditor';\nimport { useDemoStore } from '@/store/useDemoStore';\nimport { Toast } from '@/components/ui/Toast';\nimport ProductsSection from './ProductsSection';\nimport Footer from '@/features/marketing/components/Footer';\nimport FAQSection from '@/features/marketing/components/FAQSection';\n\ninterface TemplateProps {\n    data: BarbershopData;\n    isEditing?: boolean;\n    onUpdate?: (data: BarbershopData) => void;\n}\n\nexport default function TemplateUrban({ data, isEditing = false, onUpdate }: TemplateProps) {\n    const [isBookingOpen, setIsBookingOpen] = useState(false);\n    const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n    const [toastMessage, setToastMessage] = useState<string | null>(null);\n    const { showBooking, showMap, enablePremiumEffects } = useDemoStore();\n    const { services, gallery } = data;\n    // Handle root vs content legacy structure and defaults\n    const content = data.content || {};\n    const legacyContent = content as any;\n    const name = data.name || legacyContent.name || \"Minha Barbearia\";\n    const contact = data.contact || legacyContent.contact || { phone: \"\", whatsapp: \"\", address: \"\", instagram: \"\" };\n    const colors = data.colors || legacyContent.colors || {\n        primary: '#ef4444',\n        secondary: '#1f2937',\n        background: '#ffffff',\n        text: '#000000'\n    };\n\n    const { updateContent, updateContact, updateService, updateGallery } = useTemplateEditor({\n        data,\n        onUpdate\n    });\n\n    const handleBookingClick = () => {\n        if (isEditing) return;\n        if (showBooking) {\n            setIsBookingOpen(true);\n        } else {\n            const message = encodeURIComponent(`Ol√°, gostaria de agendar um hor√°rio na ${name}.`);\n            window.open(`https://wa.me/${contact.whatsapp}?text=${message}`, '_blank');\n        }\n    };\n\n    // CSS Variables Injection\n    const cssVariables = {\n        '--color-primary': colors.primary,\n        '--color-secondary': colors.secondary,\n        '--color-bg': colors.background || '#1a1a1a', // Fallback for existing data\n        '--color-text': colors.text || '#ffffff',       // Fallback\n    } as React.CSSProperties;\n\n    // --- SUBCOMPONENTS FOR CLEANER CODE ---\n\n    const SectionHeader = ({ title, subtitle }: { title: string, subtitle: string }) => (\n        <div className=\"mb-12\">\n            <h3 className=\"text-[var(--color-primary)] font-bold tracking-widest text-sm mb-2 uppercase\">{subtitle}</h3>\n            <h2 className=\"text-4xl md:text-5xl font-black text-[var(--color-text)] uppercase tracking-tighter\">{title}</h2>\n        </div>\n    );\n\n    const PrimaryButton = ({ children, onClick, className }: { children: React.ReactNode, onClick: () => void, className?: string }) => (\n        <button\n            onClick={onClick}\n            disabled={isEditing}\n            className={clsx(\n                \"bg-[var(--color-primary)] text-black font-black uppercase tracking-wider py-4 px-8 hover:bg-white transition-all duration-300 transform hover:-translate-y-1 shadow-[0_0_20px_rgba(0,240,255,0.3)] hover:shadow-[0_0_40px_rgba(255,255,255,0.5)]\",\n                className\n            )}\n        >\n            {children}\n        </button>\n    );\n\n    const OutlinedButton = ({ children, onClick }: { children: React.ReactNode, onClick?: () => void }) => (\n        <button\n            onClick={onClick}\n            className=\"border border-white/20 text-white font-bold uppercase tracking-wider py-4 px-8 hover:bg-white hover:text-black transition-all duration-300\"\n        >\n            {children}\n        </button>\n    );\n\n    return (\n        <div style={cssVariables} className=\"min-h-screen bg-[var(--color-bg)] text-[var(--color-text)] font-mono selection:bg-[var(--color-primary)] selection:text-black overflow-x-hidden relative transition-colors duration-300\">\n            <BookingModal\n                isOpen={isBookingOpen}\n                onClose={() => setIsBookingOpen(false)}\n                barbershopId={data.id}\n                services={services}\n                themeColor=\"#00F0FF\"\n            />\n\n            <AnimatePresence>\n                {toastMessage && (\n                    <Toast message={toastMessage} onClose={() => setToastMessage(null)} />\n                )}\n            </AnimatePresence>\n\n            {/* Navbar */}\n            <nav className=\"fixed w-full z-50 bg-black/80 backdrop-blur-md border-b border-white/5\">\n                <div className=\"container mx-auto px-6 h-20 flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        {/* Logo Placeholder */}\n                        <div className=\"text-2xl font-black italic tracking-tighter flex items-center gap-2\">\n                            <span className=\"text-[#00F0FF] text-4xl\">‚ö°</span>\n                            <EditableText\n                                as=\"span\"\n                                isEditing={isEditing}\n                                value={name}\n                                onChange={(val) => onUpdate && onUpdate({ ...data, name: val })}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"hidden md:flex items-center gap-8 text-sm font-bold tracking-widest text-gray-400\">\n                        <a href=\"#about\" className=\"hover:text-white transition-colors\">SOBRE</a>\n                        <a href=\"#services\" className=\"hover:text-white transition-colors\">SERVI√áOS</a>\n                        <a href=\"#location\" className=\"hover:text-white transition-colors\">LOCAL</a>\n                    </div>\n\n                    <div className=\"hidden md:block\">\n                        <PrimaryButton onClick={handleBookingClick} className=\"!py-2 !px-6 text-sm\">\n                            Agendar\n                        </PrimaryButton>\n                    </div>\n\n                    <button\n                        className=\"md:hidden text-white p-2\"\n                        onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n                    >\n                        {isMobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\n                    </button>\n                </div>\n\n                {/* Mobile Menu Overlay */}\n                <AnimatePresence>\n                    {isMobileMenuOpen && (\n                        <motion.div\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: 'auto' }}\n                            exit={{ opacity: 0, height: 0 }}\n                            className=\"md:hidden bg-black/95 border-b border-white/10 overflow-hidden\"\n                        >\n                            <div className=\"flex flex-col p-6 gap-6 text-center\">\n                                <a\n                                    href=\"#about\"\n                                    onClick={() => setIsMobileMenuOpen(false)}\n                                    className=\"text-xl font-bold text-gray-400 hover:text-white tracking-widest uppercase py-2\"\n                                >\n                                    Sobre\n                                </a>\n                                <a\n                                    href=\"#services\"\n                                    onClick={() => setIsMobileMenuOpen(false)}\n                                    className=\"text-xl font-bold text-gray-400 hover:text-white tracking-widest uppercase py-2\"\n                                >\n                                    Servi√ßos\n                                </a>\n                                <a\n                                    href=\"#location\"\n                                    onClick={() => setIsMobileMenuOpen(false)}\n                                    className=\"text-xl font-bold text-gray-400 hover:text-white tracking-widest uppercase py-2\"\n                                >\n                                    Local\n                                </a>\n                                <PrimaryButton onClick={() => { handleBookingClick(); setIsMobileMenuOpen(false); }} className=\"w-full\">\n                                    Agendar Agora\n                                </PrimaryButton>\n                            </div>\n                        </motion.div>\n                    )}\n                </AnimatePresence>\n            </nav>\n\n            {/* Hero Section */}\n            <header className=\"relative min-h-screen flex items-center pt-20 overflow-hidden\">\n                {/* Background Image with Overlay */}\n                <div className=\"absolute inset-0 z-0\">\n                    <img\n                        src={content.hero_image}\n                        alt=\"Hero\"\n                        className=\"w-full h-full object-cover opacity-60 grayscale md:grayscale-0\"\n                    />\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-[#050505] via-[#050505]/80 to-transparent\"></div>\n                    <div className=\"absolute inset-0 bg-gradient-to-r from-[#050505] via-[#050505]/50 to-transparent\"></div>\n                </div>\n\n                <div className=\"container mx-auto px-6 relative z-10 grid md:grid-cols-2 gap-12 items-center\">\n                    <motion.div\n                        initial={{ x: -50, opacity: 0 }}\n                        animate={{ x: 0, opacity: 1 }}\n                        transition={{ duration: 1, ease: \"easeOut\" }}\n                        className=\"pt-10 md:pt-0\"\n                    >\n                        <div className=\"flex items-center gap-4 mb-6\">\n                            <div className=\"h-px w-12 bg-[#00F0FF]\"></div>\n                            <span className=\"text-[#00F0FF] font-bold tracking-[0.2em] text-sm uppercase\">Desde 2024</span>\n                        </div>\n\n                        <h1 className=\"text-5xl md:text-9xl font-black leading-[0.9] md:leading-[0.85] uppercase tracking-tighter mb-8\">\n                            <span className=\"block text-white\">Estilo</span>\n                            <span className=\"block text-white\">Que</span>\n                            <span className=\"block text-transparent bg-clip-text bg-gradient-to-r from-[#00F0FF] to-white\" style={{ WebkitTextStroke: '1px #00F0FF', textShadow: '0 0 30px rgba(0,240,255,0.5)' }}>\n                                Eletriza\n                            </span>\n                        </h1>\n\n                        <div className=\"border-l-2 border-[#00F0FF] pl-6 mb-12 max-w-lg\">\n                            <EditableText\n                                as=\"p\"\n                                isEditing={isEditing}\n                                value={content.description}\n                                onChange={(val) => updateContent('description', val)}\n                                className=\"text-lg md:text-xl text-gray-300 font-light leading-relaxed\"\n                            />\n                        </div>\n\n                        <div className=\"flex flex-col md:flex-row gap-4\">\n                            <PrimaryButton onClick={handleBookingClick} className=\"w-full md:w-auto text-center\">\n                                Agendar Hor√°rio\n                            </PrimaryButton>\n                            <OutlinedButton onClick={() => document.getElementById('services')?.scrollIntoView({ behavior: 'smooth' })}>\n                                Nossos Servi√ßos\n                            </OutlinedButton>\n                        </div>\n                    </motion.div>\n                </div>\n                {isEditing && (\n                    <div className=\"absolute top-24 right-6 z-50 bg-black p-2 rounded\">\n                        <span className=\"text-xs text-gray-500 mb-1 block\">Alterar Hero Image</span>\n                        <ImageUploader onUpload={(url) => updateContent('hero_image', url)} />\n                    </div>\n                )}\n            </header>\n\n            {/* Services Section */}\n            <section id=\"services\" className=\"py-20 md:py-32 bg-[var(--color-bg)] relative\">\n                {/* Grid Background */}\n                <div className=\"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]\"></div>\n\n                <div className=\"container mx-auto px-6 relative z-10\">\n                    <div className=\"flex flex-col md:flex-row justify-between items-end mb-12 md:mb-20 gap-8\">\n                        <div>\n                            <h2 className=\"text-5xl md:text-8xl font-black uppercase text-[var(--color-text)] leading-none\">\n                                <EditableText\n                                    as=\"span\"\n                                    isEditing={isEditing}\n                                    value={content.services_title?.split(' ')[0] || \"Nossos\"}\n                                    onChange={(val) => {\n                                        // Simple split handling or just full update? \n                                        // To keep complex layout, we might need separate fields or just accept simple text.\n                                        // Let's Simplify: Just make it fully editable as one block if possible or split.\n                                        // User wants \"Nossos\" and \"Servi√ßos\". Let's assume title is \"Nossos Servi√ßos\" and we split by space for styling?\n                                        // Or better, let's use `services_title` for the first part and `services_subtitle` for the colored part?\n                                        // In Classic: title=\"Nossos Servi√ßos\", subtitle=\"Experi√™ncia...\"\n                                        // Here: \"Nossos\" (white) \"Servi√ßos\" (colored).\n                                        // Let's use `services_title` for \"Nossos\" and `services_subtitle` for \"Servi√ßos\" for this template specifically, \n                                        // or just add `services_title_highlight`?\n                                        // Let's blindly use `services_title` for the whole thing and let them edit it as one string?\n                                        // No, the design splits them.\n                                        // Let's use `services_title` for the top part and `services_subtitle` for the highlighted part.\n                                        updateContent('services_title', val);\n                                    }}\n                                    className=\"block\"\n                                />\n                                <span className=\"text-transparent bg-clip-text bg-gradient-to-b from-[var(--color-secondary)] to-[var(--color-secondary)]\" style={{ textShadow: '0 0 20px rgba(255,94,0,0.3)' }}>\n                                    <EditableText\n                                        as=\"span\"\n                                        isEditing={isEditing}\n                                        value={content.services_subtitle || \"Servi√ßos\"}\n                                        onChange={(val) => updateContent('services_subtitle', val)}\n                                    />\n                                </span>\n                            </h2>\n                        </div>\n                        <div className=\"max-w-md text-gray-400 mb-4\">\n                            <EditableText\n                                as=\"p\"\n                                isEditing={isEditing}\n                                value={content.services_description || \"Experi√™ncia completa de barbearia com produtos premium, toalha quente e atendimento de alta performance.\"}\n                                onChange={(val) => updateContent('services_description', val)}\n                                multiline\n                            />\n                        </div>\n                        <a href=\"#\" className=\"hidden md:block text-[var(--color-primary)] border-b border-[var(--color-primary)] pb-1 hover:text-[var(--color-text)] hover:border-[var(--color-text)] transition-colors uppercase text-sm font-bold tracking-widest\">\n                            <EditableText\n                                as=\"span\"\n                                isEditing={isEditing}\n                                value={content.cta_text || \"Ver Menu Completo\"}\n                                onChange={(val) => updateContent('cta_text', val)}\n                            />\n                        </a>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n                        {services.slice(0, 3).map((service, index) => (\n                            <motion.div\n                                key={index}\n                                initial={{ opacity: 0, y: 50 }}\n                                whileInView={{ opacity: 1, y: 0 }}\n                                viewport={{ once: true }}\n                                transition={{ delay: index * 0.2 }}\n                                className=\"group relative h-[400px] md:h-[500px] overflow-hidden bg-[#111] border border-[var(--color-text)]/10\"\n                            >\n                                {/* We can use a placeholder or specific image for each service type if available, otherwise reuse gallery or hero */}\n                                <div className=\"absolute inset-0\">\n                                    <img\n                                        src={gallery[index % gallery.length] || content.hero_image}\n                                        alt={service.name}\n                                        className=\"w-full h-full object-cover opacity-60 group-hover:opacity-40 group-hover:scale-110 transition-all duration-700\"\n                                    />\n                                    <div className=\"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent\"></div>\n                                </div>\n\n                                <div className=\"absolute bottom-0 left-0 w-full p-8\">\n                                    <div className=\"transform translate-y-4 group-hover:translate-y-0 transition-transform duration-500\">\n                                        <div className=\"flex justify-between items-end gap-4\">\n                                            <EditableText\n                                                as=\"h3\"\n                                                isEditing={isEditing}\n                                                value={service.name}\n                                                onChange={(val) => updateService(index, 'name', val)}\n                                                className=\"text-2xl md:text-3xl font-black uppercase text-[var(--color-text)] mb-1 leading-tight break-words max-w-[70%]\"\n                                            />\n                                            <div className=\"flex items-baseline gap-1 flex-shrink-0\">\n                                                <span className=\"text-sm md:text-base font-bold text-[var(--color-primary)]\">R$</span>\n                                                <EditableText\n                                                    as=\"span\"\n                                                    isEditing={isEditing}\n                                                    value={service.price.toString()}\n                                                    onChange={(val) => updateService(index, 'price', parseFloat(val) || 0)}\n                                                    className=\"text-2xl md:text-3xl font-black text-[var(--color-text)] leading-none\"\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </motion.div>\n                        ))}\n                    </div>\n                </div>\n            </section>\n\n            {/* About / USP Section */}\n            <section id=\"about\" className=\"py-20 md:py-32 bg-black text-[var(--color-text)] relative flex items-center\">\n                <div className=\"container mx-auto px-6 grid md:grid-cols-2 gap-12 md:gap-20 items-center\">\n                    <div>\n                        <h2 className=\"text-5xl md:text-7xl font-black uppercase leading-[0.9] mb-8 md:mb-12\">\n                            <EditableText\n                                as=\"span\"\n                                isEditing={isEditing}\n                                value={content.about_title_top || \"N√£o\"}\n                                onChange={(val) => updateContent('about_title_top', val)}\n                                className=\"block\"\n                            />\n                            <EditableText\n                                as=\"span\"\n                                isEditing={isEditing}\n                                value={content.about_title_middle || \"Aceitamos\"}\n                                onChange={(val) => updateContent('about_title_middle', val)}\n                                className=\"block\"\n                            />\n                            <span className=\"text-[var(--color-primary)]\">\n                                <EditableText\n                                    as=\"span\"\n                                    isEditing={isEditing}\n                                    value={content.about_title_bottom || \"O B√°sico.\"}\n                                    onChange={(val) => updateContent('about_title_bottom', val)}\n                                />\n                            </span>\n                        </h2>\n\n                        <div className=\"space-y-8 text-lg text-gray-400\">\n                            <div className=\"leading-relaxed\">\n                                <EditableText\n                                    as=\"p\"\n                                    isEditing={isEditing}\n                                    value={content.about_description || `Na ${name}, entendemos que o seu estilo √© a sua assinatura. Nossos barbeiros s√£o artistas treinados nas t√©cnicas mais modernas de visagismo e corte.`}\n                                    onChange={(val) => updateContent('about_description', val)}\n                                    multiline\n                                />\n                            </div>\n\n                            <ul className=\"space-y-6 mt-8\">\n                                <ul className=\"space-y-6 mt-8\">\n                                    {(content.features || [\n                                        \"Ambiente Climatizado e Som de Alta Qualidade\",\n                                        \"Cerveja Gelada por Conta da Casa\",\n                                        \"Estacionamento Exclusivo\",\n                                        \"Agendamento Online Sem Fila\"\n                                    ]).map((item, i) => (\n                                        <li key={i} className=\"flex items-center gap-4 group/item relative\">\n                                            <div className=\"w-2 h-2 rounded-full bg-[var(--color-secondary)] flex-shrink-0\"></div>\n                                            <EditableText\n                                                as=\"span\"\n                                                isEditing={isEditing}\n                                                value={item}\n                                                onChange={(val) => {\n                                                    const newFeatures = [...(content.features || [\n                                                        \"Ambiente Climatizado e Som de Alta Qualidade\",\n                                                        \"Cerveja Gelada por Conta da Casa\",\n                                                        \"Estacionamento Exclusivo\",\n                                                        \"Agendamento Online Sem Fila\"\n                                                    ])];\n                                                    newFeatures[i] = val;\n                                                    updateContent('features', newFeatures);\n                                                }}\n                                                className=\"font-bold text-[var(--color-text)] tracking-wide text-xs md:text-base uppercase w-full\"\n                                            />\n                                            {isEditing && (\n                                                <button\n                                                    onClick={() => {\n                                                        const newFeatures = [...(content.features || [\n                                                            \"Ambiente Climatizado e Som de Alta Qualidade\",\n                                                            \"Cerveja Gelada por Conta da Casa\",\n                                                            \"Estacionamento Exclusivo\",\n                                                            \"Agendamento Online Sem Fila\"\n                                                        ])];\n                                                        newFeatures.splice(i, 1);\n                                                        updateContent('features', newFeatures);\n                                                    }}\n                                                    className=\"opacity-0 group-hover/item:opacity-100 text-red-500 hover:text-red-400 p-1\"\n                                                    title=\"Remover item\"\n                                                >\n                                                    <X size={14} />\n                                                </button>\n                                            )}\n                                        </li>\n                                    ))}\n                                    {isEditing && (\n                                        <li className=\"pt-2\">\n                                            <button\n                                                onClick={() => {\n                                                    const currentFeatures = content.features || [\n                                                        \"Ambiente Climatizado e Som de Alta Qualidade\",\n                                                        \"Cerveja Gelada por Conta da Casa\",\n                                                        \"Estacionamento Exclusivo\",\n                                                        \"Agendamento Online Sem Fila\"\n                                                    ];\n                                                    updateContent('features', [...currentFeatures, \"Novo Item\"]);\n                                                }}\n                                                className=\"text-xs text-[var(--color-primary)] hover:underline flex items-center gap-1\"\n                                            >\n                                                + Adicionar Item\n                                            </button>\n                                        </li>\n                                    )}\n                                </ul>\n                            </ul>\n                        </div>\n\n                        <div className=\"mt-12 md:hidden\">\n                            <div className=\"w-16 h-16 border-l-4 border-b-4 border-[var(--color-secondary)]\" />\n                        </div>\n                    </div>\n\n                    <div className=\"relative\">\n                        <div className=\"relative aspect-square border border-[var(--color-text)]/10 bg-[#0a0a0a] p-12 flex items-center justify-center\">\n                            {/* Decorative Corner */}\n                            <div className=\"absolute top-0 right-0 w-20 md:w-32 h-20 md:h-32 border-t-4 border-r-4 border-[var(--color-primary)]\" />\n                            <div className=\"absolute bottom-0 left-0 w-16 md:w-24 h-16 md:h-24 border-b-4 border-l-4 border-[var(--color-secondary)]\" />\n\n                            <Scissors size={80} className=\"text-[var(--color-text)]/20 md:w-[120px] md:h-[120px]\" strokeWidth={1} />\n                        </div>\n                    </div>\n                </div>\n            </section>\n\n            {/* PRODUCTS SECTION (Optional) */}\n            {content.showProductsSection && (\n                <section className=\"bg-black py-20 border-t border-white/5\">\n                    <ProductsSection products={data.products || []} />\n                </section>\n            )}\n\n            {/* FAQ Section */}\n            {data.faq && data.faq.length > 0 && (\n                <FAQSection\n                    faq={data.faq}\n                    isEditing={isEditing}\n                    onUpdate={(index, field, value) => {\n                        const newFaq = [...(data.faq || [])];\n                        newFaq[index] = { ...newFaq[index], [field]: value };\n                        if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                    }}\n                    onAdd={() => {\n                        const newFaq = [...(data.faq || []), { question: \"Nova Pergunta\", answer: \"Nova Resposta\" }];\n                        if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                    }}\n                    onRemove={(index) => {\n                        const newFaq = [...(data.faq || [])];\n                        newFaq.splice(index, 1);\n                        if (onUpdate) onUpdate({ ...data, faq: newFaq });\n                    }}\n                    templateId=\"urban\"\n                />\n            )}\n\n            {/* Footer / Location */}\n            {showMap && (\n                <Footer\n                    data={data}\n                    isEditing={isEditing}\n                    onUpdate={onUpdate}\n                    templateId=\"urban\"\n                />\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/templates/hooks/useTemplateEditor.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[313,316],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[313,316],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[838,841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[838,841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { BarbershopData } from '@/types/barbershop';\n\ninterface UseTemplateEditorProps {\n    data: BarbershopData;\n    onUpdate?: (data: BarbershopData) => void;\n}\n\nexport function useTemplateEditor({ data, onUpdate }: UseTemplateEditorProps) {\n    const updateContent = (field: keyof typeof data.content, value: any) => {\n        if (!onUpdate) return;\n        onUpdate({\n            ...data,\n            content: { ...data.content, [field]: value }\n        });\n    };\n\n    // Deprecated: use direct onUpdate for contact\n    const updateContact = (field: keyof typeof data.contact, value: string) => {\n        if (!onUpdate) return;\n        onUpdate({\n            ...data,\n            contact: { ...data.contact, [field]: value }\n        });\n    };\n\n    const updateService = (index: number, field: 'name' | 'price' | 'duration', value: any) => {\n        if (!onUpdate) return;\n        const newServices = [...data.services];\n        newServices[index] = { ...newServices[index], [field]: value };\n        onUpdate({ ...data, services: newServices });\n    };\n\n    const updateGallery = (index: number, url: string) => {\n        if (!onUpdate) return;\n        const newGallery = [...data.gallery];\n        newGallery[index] = url;\n        onUpdate({ ...data, gallery: newGallery });\n    };\n\n    return {\n        updateContent,\n        updateContact,\n        updateService,\n        updateGallery\n    };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/OrderBump.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Plus' is defined but never used.","line":3,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useWizardStore } from '@/store/useWizardStore';\nimport { ADDONS } from '@/config/addons';\nimport { Check, Plus } from 'lucide-react';\nimport { clsx } from 'clsx';\nimport { motion } from 'framer-motion';\n\nexport default function OrderBump() {\n    const { selectedAddons, toggleAddon } = useWizardStore();\n\n    return (\n        <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-bold text-gray-900\">Turbine seu plano (Opcional)</h3>\n            <div className=\"space-y-3\">\n                {ADDONS.map((addon) => {\n                    const isSelected = selectedAddons.includes(addon.id);\n                    const Icon = addon.icon;\n\n                    return (\n                        <motion.div\n                            key={addon.id}\n                            onClick={() => toggleAddon(addon.id)}\n                            whileHover={{ scale: 1.01 }}\n                            whileTap={{ scale: 0.99 }}\n                            className={clsx(\n                                \"relative p-4 rounded-xl border-2 cursor-pointer transition-all flex items-center gap-4\",\n                                isSelected\n                                    ? \"bg-blue-50 border-blue-500\"\n                                    : \"bg-white border-gray-200 hover:border-gray-300\"\n                            )}\n                        >\n                            <div className={clsx(\n                                \"w-10 h-10 rounded-lg flex items-center justify-center shrink-0\",\n                                isSelected ? \"bg-blue-100 text-blue-600\" : \"bg-gray-100 text-gray-500\"\n                            )}>\n                                <Icon size={20} />\n                            </div>\n\n                            <div className=\"flex-1\">\n                                <div className=\"flex justify-between items-center mb-1\">\n                                    <h4 className={clsx(\"font-bold text-sm\", isSelected ? \"text-blue-900\" : \"text-gray-900\")}>\n                                        {addon.title}\n                                    </h4>\n                                    <span className={clsx(\"text-sm font-bold\", isSelected ? \"text-blue-700\" : \"text-gray-900\")}>\n                                        + R$ {addon.price.toFixed(2).replace('.', ',')}/m√™s\n                                    </span>\n                                </div>\n                                <p className=\"text-xs text-gray-500\">{addon.description}</p>\n                            </div>\n\n                            <div className={clsx(\n                                \"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors\",\n                                isSelected\n                                    ? \"bg-blue-500 border-blue-500 text-white\"\n                                    : \"border-gray-300 text-transparent\"\n                            )}>\n                                <Check size={14} strokeWidth={3} />\n                            </div>\n                        </motion.div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/WizardLayout.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2456,2459],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2456,2459],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect, Suspense } from 'react';\nimport { useWizardStore } from '@/store/useWizardStore';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { createCheckoutSession } from '@/lib/services/paymentService';\nimport { ArrowLeft, ArrowRight, Loader2 } from 'lucide-react';\nimport StepTemplate from '@/features/wizard/components/steps/StepTemplate';\nimport StepInfo from '@/features/wizard/components/steps/StepInfo';\nimport StepServices from '@/features/wizard/components/steps/StepServices';\nimport StepReview from '@/features/wizard/components/steps/StepReview';\nimport { useRouter, useSearchParams } from 'next/navigation';\n\nfunction WizardContent() {\n    const { step, setStep, selectedTemplate, barbershopData, setTemplate, selectedAddons, setPlan, selectedPlan } = useWizardStore();\n    const { user, signInAnonymous } = useAuth();\n    const [isSaving, setIsSaving] = useState(false);\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const totalSteps = 4;\n\n    useEffect(() => {\n        const templateParam = searchParams.get('selectedTemplate');\n        if (templateParam && ['classic', 'modern', 'urban'].includes(templateParam)) {\n            setTemplate(templateParam as 'classic' | 'modern' | 'urban');\n            // Auto-advance to step 2 if template is pre-selected\n            setStep(2);\n        }\n\n        const planParam = searchParams.get('plan');\n        if (planParam && ['starter', 'pro', 'empire'].includes(planParam)) {\n            setPlan(planParam as 'starter' | 'pro' | 'empire');\n        }\n    }, [searchParams, setTemplate, setStep, setPlan]);\n\n    const handleNext = async () => {\n        // Validation\n        if (step === 1 && !selectedTemplate) return;\n        if (step === 2 && (!barbershopData.name || !barbershopData.slug || !barbershopData.whatsapp)) return;\n        if (step === 3 && barbershopData.services.length === 0) return;\n\n        if (step < totalSteps) {\n            setStep(step + 1);\n        } else {\n            // Final Step: Create Barbershop\n            setIsSaving(true);\n            try {\n                let currentUser = user;\n                if (!currentUser) {\n                    currentUser = await signInAnonymous();\n                }\n\n                if (!currentUser) throw new Error('Falha na autentica√ß√£o');\n\n                // Map store data to full BarbershopData structure\n                const fullData: any = {\n                    slug: barbershopData.slug,\n                    template_id: selectedTemplate,\n                    name: barbershopData.name,\n                    isPublished: false, // Default: Site starts offline\n                    colors: getTemplateColors(selectedTemplate),\n                    contact: {\n                        phone: barbershopData.whatsapp,\n                        whatsapp: barbershopData.whatsapp,\n                        address: 'Endere√ßo n√£o informado', // Default\n                        instagram: '',\n                        email: ''\n                    },\n                    products: [], // Empty array, never undefined\n                    services: barbershopData.services,\n                    gallery: [], // Empty for now\n                    content: {\n                        description: 'A melhor barbearia da regi√£o.', // Default\n                        hero_image: getTemplateImage(selectedTemplate),\n                    },\n                };\n\n                // Initiate Payment Flow\n                await createCheckoutSession(fullData, currentUser.uid, selectedAddons, selectedPlan);\n\n            } catch (error) {\n                console.error(error);\n                alert('Erro ao iniciar pagamento. Tente novamente.');\n            } finally {\n                setIsSaving(false);\n            }\n        }\n    };\n\n    const handleBack = () => {\n        if (step > 1) {\n            setStep(step - 1);\n        } else {\n            router.push('/');\n        }\n    };\n\n    const isNextDisabled = () => {\n        if (step === 1) return !selectedTemplate;\n        if (step === 2) return !barbershopData.name || !barbershopData.slug || !barbershopData.whatsapp;\n        if (step === 3) return barbershopData.services.length === 0;\n        if (step === 4) return isSaving;\n        return false;\n    };\n\n    const renderStep = () => {\n        switch (step) {\n            case 1: return <StepTemplate />;\n            case 2: return <StepInfo />;\n            case 3: return <StepServices />;\n            case 4: return <StepReview />;\n            default: return null;\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 flex flex-col\">\n            {/* Header / Progress Bar */}\n            <div className=\"bg-white border-b border-gray-200 px-6 py-4\">\n                <div className=\"container mx-auto max-w-3xl\">\n                    <div className=\"flex justify-between items-center mb-2\">\n                        <span className=\"text-sm font-bold text-gray-500 uppercase tracking-wider\">\n                            Passo {step} de {totalSteps}\n                        </span>\n                        <span className=\"text-sm font-bold text-blue-600\">\n                            {Math.round((step / totalSteps) * 100)}%\n                        </span>\n                    </div>\n                    <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\n                        <div\n                            className=\"h-full bg-blue-600 transition-all duration-500 ease-out\"\n                            style={{ width: `${(step / totalSteps) * 100}%` }}\n                        />\n                    </div>\n                </div>\n            </div>\n\n            {/* Main Content */}\n            <main className=\"flex-1 container mx-auto max-w-3xl py-8 px-6\">\n                <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 min-h-[400px] p-6\">\n                    {renderStep()}\n                </div>\n            </main>\n\n            {/* Footer / Navigation */}\n            <div className=\"bg-white border-t border-gray-200 px-6 py-4\">\n                <div className=\"container mx-auto max-w-3xl flex justify-between items-center\">\n                    <button\n                        onClick={handleBack}\n                        disabled={isSaving}\n                        className={`flex items-center gap-2 px-6 py-3 rounded-lg font-bold transition-colors ${isSaving\n                            ? 'text-gray-300 cursor-not-allowed'\n                            : 'text-gray-600 hover:bg-gray-100'\n                            }`}\n                    >\n                        <ArrowLeft size={20} />\n                        Voltar\n                    </button>\n\n                    <button\n                        onClick={handleNext}\n                        disabled={isNextDisabled()}\n                        className={`flex items-center gap-2 px-8 py-3 rounded-lg font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${step === 4\n                            ? 'bg-green-600 text-white hover:bg-green-700'\n                            : 'bg-blue-600 text-white hover:bg-blue-700'\n                            }`}\n                    >\n                        {isSaving ? (\n                            <Loader2 className=\"animate-spin\" size={20} />\n                        ) : step === 4 ? (\n                            'Finalizar e Ir para Pagamento'\n                        ) : (\n                            <>\n                                Pr√≥ximo\n                                <ArrowRight size={20} />\n                            </>\n                        )}\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n// Helpers for default data\nfunction getTemplateImage(id: string | null) {\n    switch (id) {\n        case 'classic': return 'https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=2074&auto=format&fit=crop';\n        case 'modern': return 'https://images.unsplash.com/photo-1621605815971-fbc98d665033?q=80&w=2070&auto=format&fit=crop';\n        case 'urban': return 'https://images.unsplash.com/photo-1599351431202-6e0000a96994?q=80&w=1000&auto=format&fit=crop';\n        default: return '';\n    }\n}\n\nfunction getTemplateColors(id: string | null) {\n    switch (id) {\n        case 'classic': return { primary: '#d4af37', secondary: '#1a1a1a' };\n        case 'modern': return { primary: '#38bdf8', secondary: '#ffffff' };\n        case 'urban': return { primary: '#ef4444', secondary: '#1f2937' };\n        default: return { primary: '#000000', secondary: '#ffffff' };\n    }\n}\n\nexport default function WizardLayout() {\n    return (\n        <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center\"><Loader2 className=\"animate-spin text-blue-600\" /></div>}>\n            <WizardContent />\n        </Suspense>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/steps/StepInfo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/steps/StepReview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":2,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useWizardStore } from '@/store/useWizardStore';\nimport { CheckCircle2, Globe, Phone, Scissors, Calendar, AlertCircle } from 'lucide-react';\nimport OrderBump from '../OrderBump';\nimport { ADDONS } from '@/config/addons';\nimport { VISIBLE_PLANS } from '@/config/plans';\n\nexport default function StepReview() {\n    const { barbershopData, selectedTemplate, selectedAddons, selectedPlan } = useWizardStore();\n\n    const getTemplateName = (id: string | null) => {\n        switch (id) {\n            case 'classic': return 'Classic Gentleman';\n            case 'modern': return 'Modern Minimalist';\n            case 'urban': return 'Urban Style';\n            default: return 'N√£o selecionado';\n        }\n    };\n\n    const currentPlan = VISIBLE_PLANS.find(p => p.id === selectedPlan) || VISIBLE_PLANS[1]; // Default to Starter if not found\n    const basePrice = currentPlan.price / 100;\n\n    const addonsTotal = selectedAddons.reduce((total, addonId) => {\n        const addon = ADDONS.find(a => a.id === addonId);\n        return total + (addon?.price || 0);\n    }, 0);\n\n    // If Pro plan, addons are included (price 0 effectively for the user view, or just show as included)\n    // But wait, the prompt says: \"If Pro: Show Order Bumps as INCLUDED (marked and green), without charging extra.\"\n    // So we shouldn't add their price to the total if the plan is Pro.\n    // However, the checkout logic needs to know this too.\n    // For simplicity in this view:\n    const effectiveAddonsTotal = selectedPlan === 'pro' ? 0 : addonsTotal;\n    const finalTotal = basePrice + effectiveAddonsTotal;\n\n    return (\n        <div className=\"max-w-2xl mx-auto space-y-8\">\n            <div className=\"text-center\">\n                <div className=\"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                    <CheckCircle2 size={32} />\n                </div>\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Tudo pronto!</h2>\n                <p className=\"text-gray-500\">Confira os dados antes de finalizar a cria√ß√£o do seu site.</p>\n            </div>\n\n            <div className=\"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm\">\n                {/* Header / Template Info */}\n                <div className=\"bg-gray-50 p-6 border-b border-gray-100 flex items-center justify-between\">\n                    <div>\n                        <p className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1\">Template Escolhido</p>\n                        <h3 className=\"font-bold text-gray-900\">{getTemplateName(selectedTemplate)}</h3>\n                    </div>\n                    <div className=\"px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full\">\n                        {selectedTemplate?.toUpperCase()}\n                    </div>\n                </div>\n\n                {/* Barbershop Info */}\n                <div className=\"p-6 space-y-6\">\n                    <div className=\"grid md:grid-cols-2 gap-6\">\n                        <div>\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2\">Barbearia</p>\n                            <h4 className=\"text-xl font-bold text-gray-900\">{barbershopData.name}</h4>\n                            <div className=\"flex items-center gap-2 text-gray-600 mt-1\">\n                                <Globe size={14} />\n                                <span className=\"text-sm\">barbersaas.com/{barbershopData.slug}</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-gray-600 mt-1\">\n                                <Phone size={14} />\n                                <span className=\"text-sm\">{barbershopData.whatsapp}</span>\n                            </div>\n                        </div>\n\n                        <div>\n                            <p className=\"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2\">Resumo de Servi√ßos</p>\n                            <div className=\"bg-gray-50 rounded-xl p-4\">\n                                <div className=\"flex items-center gap-2 text-gray-900 font-bold mb-2\">\n                                    <Scissors size={16} className=\"text-blue-600\" />\n                                    {barbershopData.services.length} Servi√ßos Cadastrados\n                                </div>\n                                <p className=\"text-xs text-gray-500\">\n                                    Seus clientes poder√£o agendar estes servi√ßos diretamente pelo site.\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Order Bumps Logic */}\n            {selectedPlan === 'free' ? (\n                <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-start gap-3\">\n                    <AlertCircle className=\"text-yellow-600 shrink-0 mt-0.5\" size={20} />\n                    <div>\n                        <h4 className=\"font-bold text-yellow-800 text-sm\">Funcionalidades Limitadas</h4>\n                        <p className=\"text-yellow-700 text-xs mt-1\">\n                            No plano Gratuito, voc√™ n√£o tem acesso a Agendamento Online ou SEO.\n                            Fa√ßa upgrade para o plano <strong>Starter</strong> ou <strong>Pro</strong> para desbloquear.\n                        </p>\n                    </div>\n                </div>\n            ) : selectedPlan === 'pro' ? (\n                <div className=\"bg-green-50 border border-green-200 rounded-xl p-6\">\n                    <h4 className=\"font-bold text-green-800 mb-4\">Incluso no seu Plano Pro:</h4>\n                    <div className=\"space-y-3\">\n                        {ADDONS.map(addon => (\n                            <div key={addon.id} className=\"flex items-center gap-3 bg-white p-3 rounded-lg border border-green-100 shadow-sm\">\n                                <div className=\"bg-green-100 text-green-600 p-1 rounded-full\">\n                                    <CheckCircle2 size={16} />\n                                </div>\n                                <div>\n                                    <p className=\"font-bold text-gray-900 text-sm\">{addon.title}</p>\n                                    <p className=\"text-xs text-green-600 font-medium\">ATIVADO GRATUITAMENTE</p>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            ) : (\n                <OrderBump />\n            )}\n\n            {/* Total Price */}\n            <div className=\"bg-gray-900 text-white p-6 rounded-2xl flex items-center justify-between shadow-xl\">\n                <div>\n                    <p className=\"text-gray-400 text-sm font-medium\">Plano Selecionado: <span className=\"text-white font-bold uppercase\">{currentPlan.name}</span></p>\n                    <p className=\"text-xs text-gray-500\">Cancele quando quiser.</p>\n                </div>\n                <div className=\"text-right\">\n                    <span className=\"text-3xl font-bold\">\n                        {finalTotal === 0 ? 'Gr√°tis' : `R$ ${finalTotal.toFixed(2).replace('.', ',')}`}\n                    </span>\n                    {finalTotal > 0 && <span className=\"text-gray-400 text-sm\">/m√™s</span>}\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/steps/StepServices.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DollarSign' is defined but never used.","line":3,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":3,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":51}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useWizardStore } from '@/store/useWizardStore';\nimport { Scissors, Plus, Trash2, DollarSign, Clock } from 'lucide-react';\n\nexport default function StepServices() {\n    const { barbershopData, addService, removeService } = useWizardStore();\n    const [name, setName] = useState('');\n    const [price, setPrice] = useState('');\n\n    const handleAdd = () => {\n        if (!name || !price) return;\n\n        addService({\n            name,\n            price: parseFloat(price.replace(',', '.')),\n            duration: '30 min' // Default duration for now\n        });\n\n        setName('');\n        setPrice('');\n    };\n\n    return (\n        <div className=\"max-w-2xl mx-auto space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Cadastre seus Servi√ßos</h2>\n                <p className=\"text-gray-500\">Adicione os principais servi√ßos que voc√™ oferece.</p>\n            </div>\n\n            {/* Services List */}\n            <div className=\"space-y-3\">\n                {barbershopData.services.length === 0 ? (\n                    <div className=\"text-center py-12 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200\">\n                        <Scissors className=\"mx-auto h-12 w-12 text-gray-300 mb-3\" />\n                        <p className=\"text-gray-500 font-medium\">Nenhum servi√ßo adicionado ainda.</p>\n                        <p className=\"text-sm text-gray-400\">Preencha abaixo para come√ßar.</p>\n                    </div>\n                ) : (\n                    barbershopData.services.map((service, index) => (\n                        <div key={index} className=\"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-xl shadow-sm hover:border-blue-200 transition-colors group\">\n                            <div className=\"flex items-center gap-4\">\n                                <div className=\"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center text-blue-600\">\n                                    <Scissors size={20} />\n                                </div>\n                                <div>\n                                    <h4 className=\"font-bold text-gray-900\">{service.name}</h4>\n                                    <p className=\"text-sm text-gray-500\">R$ {service.price.toFixed(2)}</p>\n                                </div>\n                            </div>\n                            <button\n                                onClick={() => removeService(index)}\n                                className=\"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100\"\n                                title=\"Remover servi√ßo\"\n                            >\n                                <Trash2 size={18} />\n                            </button>\n                        </div>\n                    ))\n                )}\n            </div>\n\n            {/* Add Service Form */}\n            <div className=\"bg-gray-50 p-6 rounded-2xl border border-gray-200\">\n                <h3 className=\"font-bold text-gray-900 mb-4 flex items-center gap-2\">\n                    <Plus size={18} className=\"text-blue-600\" /> Novo Servi√ßo\n                </h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\n                    <div className=\"md:col-span-2\">\n                        <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1\">Nome</label>\n                        <input\n                            type=\"text\"\n                            value={name}\n                            onChange={(e) => setName(e.target.value)}\n                            placeholder=\"Ex: Corte Degrad√™\"\n                            className=\"w-full px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none text-gray-900\"\n                        />\n                    </div>\n                    <div>\n                        <label className=\"block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1\">Pre√ßo</label>\n                        <div className=\"relative\">\n                            <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 font-medium\">R$</span>\n                            <input\n                                type=\"number\"\n                                value={price}\n                                onChange={(e) => setPrice(e.target.value)}\n                                placeholder=\"35,00\"\n                                className=\"w-full pl-10 pr-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-blue-500 outline-none text-gray-900\"\n                            />\n                        </div>\n                    </div>\n                </div>\n                <button\n                    onClick={handleAdd}\n                    disabled={!name || !price}\n                    className=\"w-full mt-4 bg-black text-white py-3 rounded-xl font-bold hover:bg-gray-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                >\n                    <Plus size={20} /> Adicionar Servi√ßo\n                </button>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/features/wizard/components/steps/StepTemplate.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":98,"column":33,"nodeType":"JSXOpeningElement","endLine":102,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useWizardStore } from '@/store/useWizardStore';\nimport { Check } from 'lucide-react';\nimport { motion } from 'framer-motion';\n\ninterface Template {\n    id: 'classic' | 'modern' | 'urban';\n    name: string;\n    description: string;\n    color: string;\n    image: string;\n    recommended?: boolean;\n}\n\nconst TEMPLATES: Template[] = [\n    {\n        id: 'classic',\n        name: 'Classic Gentleman',\n        description: 'Eleg√¢ncia tradicional com tons dourados e serifas.',\n        color: '#d4af37',\n        image: '/img/classicgentleman.png',\n    },\n    {\n        id: 'modern',\n        name: 'Modern Minimalist',\n        description: 'Design limpo, foco em fotos e tipografia moderna.',\n        color: '#38bdf8',\n        image: '/img/modernminimalist.png',\n        recommended: true,\n    },\n    {\n        id: 'urban',\n        name: 'Urban Style',\n        description: 'Visual dark, industrial e impactante.',\n        color: '#ef4444',\n        image: '/img/urbanstyle.png',\n    },\n];\n\nexport default function StepTemplate() {\n    const { selectedTemplate, setTemplate } = useWizardStore();\n\n    return (\n        <div className=\"space-y-8\">\n            <div className=\"text-center\">\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Escolha o estilo do seu site</h2>\n                <p className=\"text-gray-500\">Voc√™ poder√° alterar as cores e fotos depois.</p>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-6\">\n                {TEMPLATES.map((template) => {\n                    const isSelected = selectedTemplate === template.id;\n\n                    return (\n                        <motion.div\n                            key={template.id}\n                            layoutId={`template-${template.id}`}\n                            onClick={() => setTemplate(template.id)}\n                            initial={false}\n                            animate={{\n                                scale: isSelected ? 1.05 : 1,\n                                borderColor: isSelected ? '#2563eb' : 'transparent',\n                                boxShadow: isSelected\n                                    ? '0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)'\n                                    : '0 0 0 0 transparent'\n                            }}\n                            whileHover={{\n                                scale: isSelected ? 1.05 : 1.02,\n                                y: -5,\n                                transition: { duration: 0.2 }\n                            }}\n                            transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\n                            className={`\n                                relative group cursor-pointer rounded-xl overflow-hidden border-2 bg-white\n                                ${!isSelected ? 'border-gray-200 hover:border-gray-300 hover:shadow-lg' : ''}\n                            `}\n                        >\n                            {/* Recommended Badge */}\n                            {template.recommended && (\n                                <div className=\"absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg z-10\">\n                                    Recomendado\n                                </div>\n                            )}\n\n                            {/* Selection Indicator */}\n                            <motion.div\n                                initial={false}\n                                animate={{\n                                    scale: isSelected ? 1 : 0,\n                                    opacity: isSelected ? 1 : 0\n                                }}\n                                className=\"absolute top-3 left-3 bg-blue-600 text-white rounded-full p-1 z-10\"\n                            >\n                                <Check size={16} />\n                            </motion.div>\n\n                            {/* Image Area */}\n                            <div className=\"aspect-[4/5] bg-gray-100 relative\">\n                                <img\n                                    src={template.image}\n                                    alt={template.name}\n                                    className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\n                                />\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60\" />\n\n                                {/* Content Overlay */}\n                                <div className=\"absolute bottom-0 left-0 p-4 text-white\">\n                                    <h3 className=\"font-bold text-lg mb-1\">{template.name}</h3>\n                                    <p className=\"text-xs text-gray-300 line-clamp-2\">{template.description}</p>\n                                </div>\n                            </div>\n                        </motion.div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]}]