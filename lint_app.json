[{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(auth)/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(auth)/login/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":25,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[919,922],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[919,922],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1373,1376],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1373,1376],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":58,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1846,1849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1846,1849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":87,"column":21,"nodeType":"JSXOpeningElement","endLine":87,"endColumn":134}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, sendPasswordResetEmail } from 'firebase/auth';\nimport { auth } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation';\nimport { Lock, Loader2 } from 'lucide-react';\nimport Link from 'next/link';\n\nexport default function LoginPage() {\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const [resetSent, setResetSent] = useState(false);\n    const router = useRouter();\n\n    const handleGoogleLogin = async () => {\n        setLoading(true);\n        setError('');\n        try {\n            const provider = new GoogleAuthProvider();\n            await signInWithPopup(auth, provider);\n            router.push('/dashboard');\n        } catch (err: any) {\n            console.error(err);\n            setError('Erro ao entrar com Google. Tente novamente.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleLogin = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        try {\n            await signInWithEmailAndPassword(auth, email, password);\n            router.push('/dashboard');\n        } catch (err: any) {\n            console.error(err);\n            setError('Email ou senha inválidos.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleForgotPassword = async () => {\n        if (!email) {\n            setError('Digite seu email para recuperar a senha.');\n            return;\n        }\n        try {\n            await sendPasswordResetEmail(auth, email);\n            setResetSent(true);\n            setError('');\n        } catch (err: any) {\n            console.error(err);\n            setError('Erro ao enviar email de recuperação.');\n        }\n    };\n\n    return (\n        <div className=\"w-full\">\n            <div className=\"mb-8\">\n                <Link href=\"/\" className=\"inline-flex items-center text-sm text-slate-400 hover:text-white transition-colors mb-6 group\">\n                    <div className=\"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center mr-2 group-hover:bg-white/10 transition-colors\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"lucide lucide-arrow-left\"><path d=\"m12 19-7-7 7-7\" /><path d=\"M19 12H5\" /></svg>\n                    </div>\n                    Voltar para Home\n                </Link>\n\n                <div className=\"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white mb-6 shadow-lg shadow-blue-600/20\">\n                    <Lock size={24} />\n                </div>\n                <h2 className=\"text-3xl font-bold text-white mb-2 tracking-tight\">Bem-vindo de volta</h2>\n                <p className=\"text-slate-400\">Acesse o painel da sua barbearia.</p>\n            </div>\n\n            <div className=\"space-y-4\">\n                <button\n                    onClick={handleGoogleLogin}\n                    disabled={loading}\n                    className=\"w-full bg-slate-900 border border-slate-800 text-white py-3 px-4 rounded-xl font-medium hover:bg-slate-800 transition-all flex items-center justify-center gap-3 disabled:opacity-50\"\n                >\n                    <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" className=\"w-5 h-5\" />\n                    Entrar com Google\n                </button>\n\n                <div className=\"relative flex items-center justify-center py-4\">\n                    <div className=\"absolute inset-0 flex items-center\">\n                        <div className=\"w-full border-t border-slate-800\"></div>\n                    </div>\n                    <span className=\"relative bg-slate-950 px-4 text-xs text-slate-500 font-medium uppercase tracking-wider\">OU</span>\n                </div>\n\n                <form onSubmit={handleLogin} className=\"space-y-4\">\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-xs font-semibold text-slate-400 mb-1.5 ml-1\">Email</label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"seu@email.com\"\n                                required\n                            />\n                        </div>\n\n                        <div>\n                            <div className=\"flex justify-between items-center mb-1.5 ml-1\">\n                                <label className=\"block text-xs font-semibold text-slate-400\">Senha</label>\n                                <button\n                                    type=\"button\"\n                                    onClick={handleForgotPassword}\n                                    className=\"text-xs font-medium text-blue-400 hover:text-blue-300 transition-colors\"\n                                >\n                                    Esqueceu a senha?\n                                </button>\n                            </div>\n                            <input\n                                type=\"password\"\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"••••••••\"\n                                required\n                            />\n                        </div>\n                    </div>\n\n                    {error && (\n                        <div className=\"p-3 bg-red-500/10 text-red-500 text-xs rounded-xl text-center border border-red-500/20 font-medium\">\n                            {error}\n                        </div>\n                    )}\n\n                    {resetSent && (\n                        <div className=\"p-3 bg-green-500/10 text-green-500 text-xs rounded-xl text-center border border-green-500/20 font-medium\">\n                            Email de recuperação enviado! Verifique sua caixa de entrada.\n                        </div>\n                    )}\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading}\n                        className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-3.5 rounded-xl font-bold text-base transition-all transform hover:scale-[1.01] flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:scale-100 shadow-lg shadow-blue-600/20\"\n                    >\n                        {loading ? <Loader2 className=\"animate-spin\" size={20} /> : 'Entrar'}\n                    </button>\n                </form>\n\n                <div className=\"mt-8 text-center text-sm text-slate-500\">\n                    Ainda não tem uma conta?{' '}\n                    <Link href=\"/register\" className=\"text-white hover:text-blue-400 font-medium hover:underline transition-colors ml-1\">\n                        Criar Conta\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(auth)/register/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1520,1523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1520,1523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":72,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2602,2605],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2602,2605],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":107,"column":21,"nodeType":"JSXOpeningElement","endLine":107,"endColumn":134}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { createUserWithEmailAndPassword, updateProfile, signInWithPopup, GoogleAuthProvider } from 'firebase/auth';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { auth, db } from '@/lib/firebase';\nimport { useRouter } from 'next/navigation';\nimport { UserPlus, Loader2 } from 'lucide-react';\nimport Link from 'next/link';\n\nexport default function RegisterPage() {\n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n    const [password, setPassword] = useState('');\n    const [confirmPassword, setConfirmPassword] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const router = useRouter();\n\n    const handleGoogleRegister = async () => {\n        setLoading(true);\n        setError('');\n        try {\n            const provider = new GoogleAuthProvider();\n            const result = await signInWithPopup(auth, provider);\n\n            // Check if user already exists in database\n            const userDoc = await getDoc(doc(db, 'users', result.user.uid));\n\n            if (userDoc.exists()) {\n                // User already has a profile, redirect to dashboard\n                router.push('/dashboard');\n            } else {\n                // New user, redirect to Wizard\n                const searchParams = new URLSearchParams(window.location.search);\n                router.push(`/wizard?${searchParams.toString()}`);\n            }\n        } catch (err: any) {\n            console.error(err);\n            setError('Erro ao criar conta com Google. Tente novamente.');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleRegister = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setLoading(true);\n        setError('');\n\n        if (password !== confirmPassword) {\n            setError('As senhas não coincidem.');\n            setLoading(false);\n            return;\n        }\n\n        if (password.length < 6) {\n            setError('A senha deve ter pelo menos 6 caracteres.');\n            setLoading(false);\n            return;\n        }\n\n        try {\n            const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n            await updateProfile(userCredential.user, {\n                displayName: name\n            });\n\n            // Redirect to Wizard to create the first barbershop\n            const searchParams = new URLSearchParams(window.location.search);\n            router.push(`/wizard?${searchParams.toString()}`);\n        } catch (err: any) {\n            console.error(err);\n            if (err.code === 'auth/email-already-in-use') {\n                setError('Este email já está em uso.');\n            } else {\n                setError('Erro ao criar conta. Tente novamente.');\n            }\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <div className=\"w-full\">\n            <div className=\"mb-8\">\n                <Link href=\"/\" className=\"inline-flex items-center text-sm text-slate-400 hover:text-white transition-colors mb-6 group\">\n                    <div className=\"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center mr-2 group-hover:bg-white/10 transition-colors\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"lucide lucide-arrow-left\"><path d=\"m12 19-7-7 7-7\" /><path d=\"M19 12H5\" /></svg>\n                    </div>\n                    Voltar para Home\n                </Link>\n\n                <div className=\"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center text-white mb-6 shadow-lg shadow-blue-600/20\">\n                    <UserPlus size={24} />\n                </div>\n                <h2 className=\"text-3xl font-bold text-white mb-2 tracking-tight\">Criar sua conta</h2>\n                <p className=\"text-slate-400\">Entre com seus dados para começar.</p>\n            </div>\n\n            <div className=\"space-y-4\">\n                <button\n                    onClick={handleGoogleRegister}\n                    disabled={loading}\n                    className=\"w-full bg-slate-900 border border-slate-800 text-white py-3 px-4 rounded-xl font-medium hover:bg-slate-800 transition-all flex items-center justify-center gap-3 disabled:opacity-50\"\n                >\n                    <img src=\"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg\" alt=\"Google\" className=\"w-5 h-5\" />\n                    Continuar com Google\n                </button>\n\n                <button\n                    disabled={true} // Placeholder for now\n                    className=\"w-full bg-slate-900 border border-slate-800 text-white py-3 px-4 rounded-xl font-medium hover:bg-slate-800 transition-all flex items-center justify-center gap-3 disabled:opacity-50 relative overflow-hidden group\"\n                >\n                    <div className=\"absolute top-0 right-0 bg-blue-600 text-[10px] text-white px-2 py-0.5 rounded-bl-lg font-bold\">Em breve</div>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"lucide lucide-github\"><path d=\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 1.5-3 1.5-3 1.5 6 2.5 8 2.5 2 7 2.5 8 2.5 0 1.15-.28 2.35-1 3.5.73 1.02.38 2.25 1 3.5-.2 2.7-3 5.5-6 5.5a4.8 4.8 0 0 0-1 3.5v4\" /><path d=\"M9 18c-4.51 2-5-2-7-2\" /></svg>\n                    Continuar com GitHub\n                </button>\n\n                <div className=\"relative flex items-center justify-center py-4\">\n                    <div className=\"absolute inset-0 flex items-center\">\n                        <div className=\"w-full border-t border-slate-800\"></div>\n                    </div>\n                    <span className=\"relative bg-slate-950 px-4 text-xs text-slate-500 font-medium uppercase tracking-wider\">OU</span>\n                </div>\n\n                <form onSubmit={handleRegister} className=\"space-y-4\">\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label className=\"block text-xs font-semibold text-slate-400 mb-1.5 ml-1\">Nome Completo</label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"Seu Nome\"\n                                required\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-xs font-semibold text-slate-400 mb-1.5 ml-1\">Email</label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"seu@email.com\"\n                                required\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-xs font-semibold text-slate-400 mb-1.5 ml-1\">Senha</label>\n                            <input\n                                type=\"password\"\n                                value={password}\n                                onChange={(e) => setPassword(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"Min. 6 caracteres\"\n                                required\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-xs font-semibold text-slate-400 mb-1.5 ml-1\">Confirmar Senha</label>\n                            <input\n                                type=\"password\"\n                                value={confirmPassword}\n                                onChange={(e) => setConfirmPassword(e.target.value)}\n                                className=\"w-full bg-slate-900 border border-slate-800 text-white px-4 py-3 rounded-xl focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all placeholder-slate-600 text-sm\"\n                                placeholder=\"Confirmar senha\"\n                                required\n                            />\n                        </div>\n                    </div>\n\n                    {error && (\n                        <div className=\"p-3 bg-red-500/10 text-red-500 text-xs rounded-xl text-center border border-red-500/20 font-medium\">\n                            {error}\n                        </div>\n                    )}\n\n                    <div className=\"text-xs text-slate-500 px-1\">\n                        Ao continuar, você concorda com os <a href=\"#\" className=\"underline hover:text-slate-300\">Termos de Serviço</a> e <a href=\"#\" className=\"underline hover:text-slate-300\">Política de Privacidade</a>.\n                    </div>\n\n                    <button\n                        type=\"submit\"\n                        disabled={loading}\n                        className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-3.5 rounded-xl font-bold text-base transition-all transform hover:scale-[1.01] flex items-center justify-center gap-2 disabled:opacity-70 disabled:hover:scale-100 shadow-lg shadow-blue-600/20\"\n                    >\n                        {loading ? <Loader2 className=\"animate-spin\" size={20} /> : 'Continuar'}\n                    </button>\n                </form>\n\n                <div className=\"mt-8 text-center text-sm text-gray-500\">\n                    Já tem uma conta?{' '}\n                    <Link href=\"/login\" className=\"text-white hover:text-blue-400 font-medium hover:underline transition-colors ml-1\">\n                        Login\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/appointments/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":8,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":76},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LayoutList' is defined but never used.","line":8,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":88},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":8,"column":99,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":107},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAppointments'. Either include it or remove the dependency array.","line":66,"column":8,"nodeType":"ArrayExpression","endLine":66,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [fetchAppointments, user]","fix":{"range":[2387,2393],"text":"[fetchAppointments, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs, orderBy, doc, updateDoc } from 'firebase/firestore';\nimport { Appointment } from '@/types/appointment';\nimport { Calendar as CalendarIcon, Clock, CheckCircle, XCircle, AlertCircle, LayoutList, Palette, Settings, List } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport CalendarView from '@/features/calendar/components/CalendarView';\n\nexport default function AppointmentsPage() {\n    const { user } = useAuth();\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [viewMode, setViewMode] = useState<'list' | 'calendar'>('list');\n    const [showColorSettings, setShowColorSettings] = useState(false);\n\n    // Custom Colors State (persisted in localStorage in a real app, just state here for MVP as requested \"small system\")\n    const [colors, setColors] = useState({\n        confirmed: '#22c55e', // green-500\n        pending: '#eab308', // yellow-500\n        cancelled: '#ef4444' // red-500\n    });\n\n    useEffect(() => {\n        // Load from local storage if available\n        const savedColors = localStorage.getItem('appointmentColors');\n        if (savedColors) {\n            setColors(JSON.parse(savedColors));\n        }\n    }, []);\n\n    const saveColors = (newColors: typeof colors) => {\n        setColors(newColors);\n        localStorage.setItem('appointmentColors', JSON.stringify(newColors));\n    };\n\n    const fetchAppointments = async () => {\n        if (!user) return;\n\n        try {\n            const q = query(\n                collection(db, 'appointments'),\n                where('barbershopId', '==', user.uid),\n                orderBy('date', 'desc')\n            );\n\n            const querySnapshot = await getDocs(q);\n            const data = querySnapshot.docs.map(doc => ({\n                id: doc.id,\n                ...doc.data()\n            })) as Appointment[];\n\n            setAppointments(data);\n        } catch (error) {\n            console.error(\"Error fetching appointments:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        fetchAppointments();\n    }, [user]);\n\n    const handleStatusUpdate = async (id: string, newStatus: 'confirmed' | 'cancelled') => {\n        try {\n            const appointmentRef = doc(db, 'appointments', id);\n            await updateDoc(appointmentRef, { status: newStatus });\n\n            // Optimistic update\n            setAppointments(prev => prev.map(app =>\n                app.id === id ? { ...app, status: newStatus } : app\n            ));\n        } catch (error) {\n            console.error(\"Error updating status:\", error);\n            alert(\"Erro ao atualizar status.\");\n        }\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-64\">\n                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-slate-400\"></div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-6 h-[calc(100dvh-100px)] flex flex-col\">\n            <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 shrink-0\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-100\">Agendamentos</h1>\n                    <p className=\"text-slate-400\">Gerencie seus horários marcados.</p>\n                </div>\n\n                <div className=\"flex items-center gap-2 bg-slate-800 p-1 rounded-lg border border-slate-700 relative overflow-x-auto max-w-full\">\n                    <button\n                        onClick={() => setViewMode('list')}\n                        className={cn(\n                            \"px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2\",\n                            viewMode === 'list' ? \"bg-slate-700 text-white shadow\" : \"text-slate-400 hover:text-white\"\n                        )}\n                    >\n                        <List size={16} />\n                        Lista\n                    </button>\n                    <button\n                        onClick={() => setViewMode('calendar')}\n                        className={cn(\n                            \"px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2\",\n                            viewMode === 'calendar' ? \"bg-slate-700 text-white shadow\" : \"text-slate-400 hover:text-white\"\n                        )}\n                    >\n                        <CalendarIcon size={16} />\n                        Calendário\n                    </button>\n\n                    <div className=\"w-px h-6 bg-slate-700 mx-1\" />\n\n                    <button\n                        onClick={() => setShowColorSettings(!showColorSettings)}\n                        className={cn(\n                            \"p-1.5 rounded-md transition-all\",\n                            showColorSettings ? \"bg-slate-700 text-white\" : \"text-slate-400 hover:text-white hover:bg-slate-800\"\n                        )}\n                        title=\"Personalizar Cores\"\n                    >\n                        <Palette size={18} />\n                    </button>\n\n                    {/* Color Settings Dropdown */}\n                    {showColorSettings && (\n                        <div className=\"absolute top-12 right-0 bg-slate-800 border border-slate-700 rounded-xl shadow-xl p-4 w-64 z-50 animate-in fade-in slide-in-from-top-2\">\n                            <h4 className=\"font-bold text-slate-100 mb-3 text-sm flex items-center gap-2\">\n                                <Palette size={14} /> Personalizar Cores\n                            </h4>\n                            <div className=\"space-y-3\">\n                                <div>\n                                    <label className=\"text-xs text-slate-400 mb-1 block\">Confirmado</label>\n                                    <div className=\"flex items-center gap-2\">\n                                        <input\n                                            type=\"color\"\n                                            value={colors.confirmed}\n                                            onChange={(e) => saveColors({ ...colors, confirmed: e.target.value })}\n                                            className=\"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0\"\n                                        />\n                                        <span className=\"text-xs font-mono text-slate-300\">{colors.confirmed}</span>\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"text-xs text-slate-400 mb-1 block\">Pendente</label>\n                                    <div className=\"flex items-center gap-2\">\n                                        <input\n                                            type=\"color\"\n                                            value={colors.pending}\n                                            onChange={(e) => saveColors({ ...colors, pending: e.target.value })}\n                                            className=\"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0\"\n                                        />\n                                        <span className=\"text-xs font-mono text-slate-300\">{colors.pending}</span>\n                                    </div>\n                                </div>\n                                <div>\n                                    <label className=\"text-xs text-slate-400 mb-1 block\">Cancelado</label>\n                                    <div className=\"flex items-center gap-2\">\n                                        <input\n                                            type=\"color\"\n                                            value={colors.cancelled}\n                                            onChange={(e) => saveColors({ ...colors, cancelled: e.target.value })}\n                                            className=\"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0\"\n                                        />\n                                        <span className=\"text-xs font-mono text-slate-300\">{colors.cancelled}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"w-full mt-3 text-xs text-slate-400 hover:text-white\"\n                                onClick={() => {\n                                    setColors({ confirmed: '#22c55e', pending: '#eab308', cancelled: '#ef4444' });\n                                    localStorage.removeItem('appointmentColors');\n                                }}\n                            >\n                                Restaurar Padrão\n                            </Button>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {viewMode === 'list' ? (\n                appointments.length === 0 ? (\n                    <div className=\"bg-slate-800 rounded-xl border border-slate-700 p-12 text-center\">\n                        <div className=\"w-16 h-16 bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4\">\n                            <CalendarIcon className=\"text-slate-400\" size={32} />\n                        </div>\n                        <h3 className=\"text-lg font-bold text-slate-100 mb-2\">Nenhum agendamento</h3>\n                        <p className=\"text-slate-400\">\n                            Quando seus clientes agendarem horários, eles aparecerão aqui.\n                        </p>\n                    </div>\n                ) : (\n                    <div className=\"grid gap-4 overflow-y-auto pb-4\">\n                        {appointments.map((appointment) => (\n                            <div\n                                key={appointment.id}\n                                className=\"bg-slate-800 rounded-xl border border-slate-700 p-6 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:border-slate-600 transition-colors shrink-0\"\n                            >\n                                <div className=\"flex items-start gap-4\">\n                                    <div\n                                        className=\"w-12 h-12 rounded-full flex items-center justify-center shrink-0\"\n                                        style={{\n                                            backgroundColor: `${colors[appointment.status as keyof typeof colors]}20`,\n                                            color: colors[appointment.status as keyof typeof colors]\n                                        }}\n                                    >\n                                        {appointment.status === 'confirmed' ? <CheckCircle size={24} /> :\n                                            appointment.status === 'cancelled' ? <XCircle size={24} /> :\n                                                <Clock size={24} />}\n                                    </div>\n                                    <div>\n                                        <h3 className=\"font-bold text-slate-100\">{appointment.customerName}</h3>\n                                        <p className=\"text-sm text-slate-400\">{appointment.serviceName} • R$ {appointment.price.toFixed(2)}</p>\n                                        <div className=\"flex items-center gap-2 mt-2 text-sm font-medium text-slate-300\">\n                                            <CalendarIcon size={14} className=\"text-slate-500\" />\n                                            {/* Handle Firestore Timestamp or Date string */}\n                                            {new Date(appointment.date.seconds ? appointment.date.seconds * 1000 : appointment.date).toLocaleString('pt-BR')}\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {appointment.status === 'pending' && (\n                                    <div className=\"flex items-center gap-2\">\n                                        <Button\n                                            variant=\"outline\"\n                                            className=\"text-red-400 hover:bg-red-900/20 hover:text-red-300 border-red-900/30 bg-transparent\"\n                                            onClick={() => handleStatusUpdate(appointment.id, 'cancelled')}\n                                        >\n                                            Cancelar\n                                        </Button>\n                                        <Button\n                                            className=\"bg-green-600 hover:bg-green-500 text-white border-0\"\n                                            onClick={() => handleStatusUpdate(appointment.id, 'confirmed')}\n                                        >\n                                            Confirmar\n                                        </Button>\n                                    </div>\n                                )}\n\n                                {appointment.status !== 'pending' && (\n                                    <div\n                                        className=\"px-4 py-2 rounded-full text-sm font-bold border\"\n                                        style={{\n                                            backgroundColor: `${colors[appointment.status as keyof typeof colors]}10`,\n                                            color: colors[appointment.status as keyof typeof colors],\n                                            borderColor: `${colors[appointment.status as keyof typeof colors]}30`\n                                        }}\n                                    >\n                                        {appointment.status === 'confirmed' ? 'Confirmado' : 'Cancelado'}\n                                    </div>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n                )\n            ) : (\n                <div className=\"flex-1 min-h-0 bg-slate-800 rounded-xl border border-slate-700 overflow-hidden\">\n                    <CalendarView\n                        appointments={appointments}\n                        colors={colors}\n                    />\n                </div>\n            )}\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/availability/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/campaigns/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":23},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":113,"column":38,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o &quot;no-show\".\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o &ldquo;no-show\".\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o &#34;no-show\".\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o &rdquo;no-show\".\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":113,"column":46,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o \"no-show&quot;.\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o \"no-show&ldquo;.\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o \"no-show&#34;.\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[6173,6246],"text":"\n                            Reduza o \"no-show&rdquo;.\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Button } from '@/components/ui/button';\nimport { MessageCircle, Gift, Clock, Megaphone, Plus, Sparkles, UserX } from 'lucide-react';\n\nexport default function CampaignsPage() {\n    // State for visual toggles\n    const [automations, setAutomations] = useState({\n        recovery: false,\n        birthday: true,\n        reminder: true\n    });\n\n    const toggleAutomation = (key: keyof typeof automations) => {\n        setAutomations(prev => ({\n            ...prev,\n            [key]: !prev[key]\n        }));\n    };\n\n    return (\n        <div className=\"space-y-8 p-8 max-w-7xl mx-auto\">\n            {/* Header */}\n            <div className=\"flex flex-col gap-2\">\n                <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-3\">\n                    <Sparkles className=\"text-blue-600\" />\n                    Campanhas e Automação\n                </h1>\n                <p className=\"text-muted-foreground text-lg\">\n                    Engaje seus clientes automaticamente via WhatsApp e aumente sua retenção.\n                </p>\n            </div>\n\n            {/* Automation Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                {/* Card: Recuperação */}\n                <Card className={`border-2 transition-all duration-300 ${automations.recovery ? 'border-blue-500/50 shadow-lg shadow-blue-500/10' : 'border-border opacity-90'}`}>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"p-2.5 bg-orange-100 dark:bg-orange-900/30 rounded-xl text-orange-600 dark:text-orange-400\">\n                                <UserX size={24} />\n                            </div>\n                            <Switch\n                                checked={automations.recovery}\n                                onCheckedChange={() => toggleAutomation('recovery')}\n                            />\n                        </div>\n                        <CardTitle className=\"mt-4 text-xl\">Recuperação de Clientes</CardTitle>\n                        <CardDescription>\n                            Reengaje quem não aparece há dias.\n                        </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                            Envia uma mensagem automática para clientes que não agendam há <span className=\"font-semibold text-foreground\">30 dias</span> ou mais, oferecendo um convite para retornar.\n                        </p>\n                        {automations.recovery && (\n                            <div className=\"mt-4 text-xs font-medium text-blue-600 dark:text-blue-400 flex items-center gap-1.5 animate-in fade-in slide-in-from-top-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-blue-500 animate-pulse\" />\n                                Automação ativa\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                {/* Card: Aniversário */}\n                <Card className={`border-2 transition-all duration-300 ${automations.birthday ? 'border-purple-500/50 shadow-lg shadow-purple-500/10' : 'border-border opacity-90'}`}>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"p-2.5 bg-pink-100 dark:bg-pink-900/30 rounded-xl text-pink-600 dark:text-pink-400\">\n                                <Gift size={24} />\n                            </div>\n                            <Switch\n                                checked={automations.birthday}\n                                onCheckedChange={() => toggleAutomation('birthday')}\n                            />\n                        </div>\n                        <CardTitle className=\"mt-4 text-xl\">Feliz Aniversário</CardTitle>\n                        <CardDescription>\n                            Celebre com seus clientes.\n                        </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                            Um gesto simples que fideliza. Envie uma mensagem de parabéns personalizada no dia do aniversário do cliente.\n                        </p>\n                        {automations.birthday && (\n                            <div className=\"mt-4 text-xs font-medium text-purple-600 dark:text-purple-400 flex items-center gap-1.5 animate-in fade-in slide-in-from-top-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-purple-500 animate-pulse\" />\n                                Automação ativa\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n\n                {/* Card: Lembrete */}\n                <Card className={`border-2 transition-all duration-300 ${automations.reminder ? 'border-green-500/50 shadow-lg shadow-green-500/10' : 'border-border opacity-90'}`}>\n                    <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"p-2.5 bg-green-100 dark:bg-green-900/30 rounded-xl text-green-600 dark:text-green-400\">\n                                <Clock size={24} />\n                            </div>\n                            <Switch\n                                checked={automations.reminder}\n                                onCheckedChange={() => toggleAutomation('reminder')}\n                            />\n                        </div>\n                        <CardTitle className=\"mt-4 text-xl\">Lembrete de Corte</CardTitle>\n                        <CardDescription>\n                            Reduza o \"no-show\".\n                        </CardDescription>\n                    </CardHeader>\n                    <CardContent>\n                        <p className=\"text-sm text-muted-foreground leading-relaxed\">\n                            Envia um lembrete automático via WhatsApp <span className=\"font-semibold text-foreground\">1 hora</span> antes do horário agendado para confirmar a presença.\n                        </p>\n                        {automations.reminder && (\n                            <div className=\"mt-4 text-xs font-medium text-green-600 dark:text-green-400 flex items-center gap-1.5 animate-in fade-in slide-in-from-top-2\">\n                                <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\n                                Automação ativa\n                            </div>\n                        )}\n                    </CardContent>\n                </Card>\n            </div>\n\n            {/* Manual Campaign Section */}\n            <div className=\"mt-8\">\n                <Card className=\"bg-gradient-to-br from-slate-900 to-slate-800 text-white border-none shadow-xl overflow-hidden relative group\">\n                    <div className=\"absolute top-0 right-0 p-32 bg-blue-500/10 rounded-full blur-3xl -mr-16 -mt-16 pointer-events-none group-hover:bg-blue-500/20 transition-all duration-500\" />\n\n                    <div className=\"flex flex-col md:flex-row items-center justify-between p-8 relative z-10 gap-6\">\n                        <div className=\"flex items-start gap-6\">\n                            <div className=\"p-4 bg-white/10 rounded-2xl backdrop-blur-sm border border-white/10\">\n                                <Megaphone className=\"w-8 h-8 text-white\" />\n                            </div>\n                            <div className=\"space-y-2\">\n                                <h2 className=\"text-2xl font-bold\">Disparo em Massa (Campanhas Manuais)</h2>\n                                <p className=\"text-slate-300 max-w-xl text-lg\">\n                                    Crie promoções relâmpago para dias parados. Selecione um grupo de clientes (ex: todos que vieram mês passado) e envie uma oferta.\n                                </p>\n                            </div>\n                        </div>\n\n                        <Button\n                            size=\"lg\"\n                            className=\"bg-white text-slate-900 hover:bg-slate-100 font-bold h-14 px-8 rounded-xl shadow-lg shadow-black/20 hover:scale-105 active:scale-95 transition-all\"\n                        >\n                            <Plus className=\"mr-2 h-5 w-5\" />\n                            Criar Nova Campanha\n                        </Button>\n                    </div>\n                </Card>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/clients/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/design/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Redo' is defined but never used.","line":8,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":29},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":193,"column":49,"nodeType":"JSXOpeningElement","endLine":193,"endColumn":148}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useEditor } from '@/hooks/useEditor';\nimport { useSaveTheme } from '@/hooks/useSaveTheme';\nimport { BarbershopData } from '@/types/barbershop';\nimport { Button } from '@/components/ui/button';\nimport { Loader2, Undo, Redo, Save, Smartphone, Palette, Layout, Type, Upload, Check, Edit3 } from 'lucide-react';\nimport ImageUploader from '@/components/ui/ImageUploader';\nimport TemplateClassic from '@/features/templates/components/TemplateClassic';\nimport TemplateModern from '@/features/templates/components/TemplateModern';\nimport TemplateUrban from '@/features/templates/components/TemplateUrban';\nimport { cn } from '@/lib/utils';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { useAuth } from '@/features/auth/context/AuthContext';\n\n// Mock Font Options (Simulated)\nconst FONTS = [\n    { id: 'sans', name: 'Inter (Modern)', class: 'font-sans' },\n    { id: 'serif', name: 'Playfair (Classic)', class: 'font-serif' },\n    { id: 'mono', name: 'JetBrains (Tech)', class: 'font-mono' },\n];\n\nexport default function DesignEditorPage() {\n    const { user } = useAuth();\n    const {\n        data,\n        setInitialData,\n        updateContent,\n        hasChanges,\n        resetChanges,\n        updateData\n    } = useEditor();\n\n    const { saveChanges, saving } = useSaveTheme();\n    const [loading, setLoading] = useState(true);\n    const [viewMode, setViewMode] = useState<'edit' | 'preview'>('edit'); // Added viewMode state\n\n    // Load initial data\n    useEffect(() => {\n        const fetchBarbershop = async () => {\n            if (!user) return;\n            try {\n                const docRef = doc(db, 'barbershops', user.uid);\n                const docSnap = await getDoc(docRef);\n                if (docSnap.exists()) {\n                    setInitialData(docSnap.data() as BarbershopData);\n                }\n            } catch (error) {\n                console.error(\"Error fetching barbershop:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n        fetchBarbershop();\n    }, [user, setInitialData]);\n\n    if (loading) return <div className=\"flex h-full items-center justify-center text-slate-400\"><Loader2 className=\"animate-spin mr-2\" /> Carregando editor...</div>;\n    if (!data) return <div className=\"flex h-full items-center justify-center text-slate-400\">Dados não encontrados.</div>;\n\n    const renderPreview = () => {\n        const props = { data, isEditing: false }; // Preview mode (not inline editing)\n        switch (data.template_id) {\n            case 'modern': return <TemplateModern {...props} />;\n            case 'urban': return <TemplateUrban {...props} />;\n            case 'classic': default: return <TemplateClassic {...props} />;\n        }\n    };\n\n    return (\n        <div className=\"h-[calc(100vh-4rem)] -m-6 md:-m-8 flex flex-col bg-slate-950\">\n            {/* Header / Actions Bar */}\n            <header className=\"h-16 bg-slate-900 border-b border-slate-800 flex items-center justify-between px-6 md:px-8 shrink-0 relative z-20\">\n                <div className=\"flex items-center gap-4\">\n                    <h1 className=\"text-lg font-bold text-slate-100 flex items-center gap-2\">\n                        <Palette className=\"text-blue-500\" size={20} />\n                        Editor de Marca\n                    </h1>\n                    <div className=\"h-6 w-px bg-slate-800 hidden md:block\"></div>\n                    <p className=\"text-sm text-slate-400 hidden md:block\">Personalize a identidade visual do seu site.</p>\n                </div>\n\n                <div className=\"flex items-center gap-3\">\n                    <Button variant=\"ghost\" size=\"icon\" onClick={resetChanges} disabled={!hasChanges} className=\"text-slate-400 hover:text-slate-100 hidden md:flex\" title=\"Desfazer\">\n                        <Undo size={18} />\n                    </Button>\n                    <div className=\"h-6 w-px bg-slate-800 mx-1 hidden md:block\"></div>\n                    <Button\n                        onClick={() => saveChanges()}\n                        disabled={saving || !hasChanges}\n                        className=\"bg-blue-600 hover:bg-blue-500 text-white font-medium min-w-[100px] md:min-w-[140px] text-xs md:text-sm\"\n                    >\n                        {saving ? <Loader2 className=\"animate-spin mr-2\" size={16} /> : <Save className=\"mr-2\" size={16} />}\n                        {saving ? 'Sal...' : 'Publicar'}\n                    </Button>\n                </div>\n            </header>\n\n            {/* Mobile Tabs */}\n            <div className=\"lg:hidden flex border-b border-slate-800 bg-slate-900 sticky top-0 z-30\">\n                <button\n                    onClick={() => setViewMode('edit')}\n                    className={cn(\n                        \"flex-1 py-3 text-sm font-medium border-b-2 transition-colors flex items-center justify-center gap-2\",\n                        viewMode === 'edit'\n                            ? \"border-blue-500 text-blue-500\"\n                            : \"border-transparent text-slate-400\"\n                    )}\n                >\n                    <Edit3 size={16} /> Editar\n                </button>\n                <button\n                    onClick={() => setViewMode('preview')}\n                    className={cn(\n                        \"flex-1 py-3 text-sm font-medium border-b-2 transition-colors flex items-center justify-center gap-2\",\n                        viewMode === 'preview'\n                            ? \"border-blue-500 text-blue-500\"\n                            : \"border-transparent text-slate-400\"\n                    )}\n                >\n                    <Smartphone size={16} /> Visualizar\n                </button>\n            </div>\n\n            {/* Main Split View */}\n            <main className=\"flex-1 grid grid-cols-1 lg:grid-cols-12 overflow-hidden h-[calc(100vh-8rem)] lg:h-auto\">\n\n                {/* Left Panel: Editor Form */}\n                <div className={cn(\n                    \"lg:col-span-7 xl:col-span-8 bg-slate-900 border-r border-slate-800 overflow-y-auto custom-scrollbar h-full\",\n                    viewMode === 'preview' ? \"hidden lg:block\" : \"block\"\n                )}>\n                    <div className=\"max-w-3xl mx-auto p-6 md:p-10 space-y-10 pb-32 lg:pb-10\">\n\n                        {/* 1. Layout / Template Selection */}\n                        <section className=\"space-y-4\">\n                            <div className=\"flex items-center justify-between\">\n                                <h2 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2\">\n                                    <Layout size={14} /> Layout & Tema\n                                </h2>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                {[\n                                    { id: 'classic', name: 'Classic', desc: 'Tradicional & Elegante' },\n                                    { id: 'modern', name: 'Modern', desc: 'Clean & Minimalista' },\n                                    { id: 'urban', name: 'Urban', desc: 'Dark & Ousado' }\n                                ].map((theme) => (\n                                    <div\n                                        key={theme.id}\n                                        onClick={() => updateData({ ...data, template_id: theme.id as 'classic' | 'modern' | 'urban' })}\n                                        className={cn(\n                                            \"cursor-pointer rounded-xl border-2 p-4 transition-all duration-200 relative group\",\n                                            data.template_id === theme.id\n                                                ? \"bg-slate-800 border-blue-500 ring-1 ring-blue-500/50\"\n                                                : \"bg-slate-800/50 border-slate-700 hover:border-slate-600 hover:bg-slate-800\"\n                                        )}\n                                    >\n                                        <div className=\"flex justify-between items-start mb-2\">\n                                            <div className=\"p-2 rounded-lg bg-slate-900 border border-slate-700\">\n                                                <Layout size={20} className={data.template_id === theme.id ? \"text-blue-400\" : \"text-slate-500\"} />\n                                            </div>\n                                            <div className={cn(\n                                                \"w-5 h-5 rounded-full border flex items-center justify-center transition-colors\",\n                                                data.template_id === theme.id ? \"border-blue-500 bg-blue-500\" : \"border-slate-600 bg-slate-800\"\n                                            )}>\n                                                {data.template_id === theme.id && <Check size={12} className=\"text-white\" />}\n                                            </div>\n                                        </div>\n                                        <h3 className=\"text-slate-100 font-bold\">{theme.name}</h3>\n                                        <p className=\"text-xs text-slate-500 mt-1\">{theme.desc}</p>\n                                    </div>\n                                ))}\n                            </div>\n                        </section>\n\n                        <hr className=\"border-slate-800\" />\n\n                        {/* 2. Brand Identity */}\n                        <section className=\"space-y-6\">\n                            <h2 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2\">\n                                <Upload size={14} /> Identidade Visual\n                            </h2>\n\n                            <div className=\"grid md:grid-cols-2 gap-8\">\n                                <div className=\"space-y-3\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Logo e Capa</label>\n                                    <div className=\"space-y-4\">\n                                        <div className=\"p-4 bg-slate-800 rounded-xl border border-dashed border-slate-600 hover:border-slate-500 transition-colors\">\n                                            <p className=\"text-xs text-slate-400 mb-2 font-medium\">Imagem de Capa (Hero)</p>\n                                            <div className=\"aspect-video relative bg-slate-900 rounded-lg overflow-hidden mb-2\">\n                                                <img src={data.content.hero_image} alt=\"Cover\" className=\"w-full h-full object-cover opacity-50\" />\n                                            </div>\n                                            <ImageUploader\n                                                onUpload={(url) => updateContent('hero_image', url)}\n                                                label=\"Trocar Capa\"\n                                                className=\"w-full\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div className=\"space-y-3\">\n                                    <label className=\"text-sm font-medium text-slate-300\">Cores da Marca</label>\n                                    <div className=\"bg-slate-800 rounded-xl border border-slate-700 p-5 space-y-4\">\n                                        <div>\n                                            <div className=\"flex justify-between mb-2\">\n                                                <span className=\"text-xs text-slate-400\">Cor Primária</span>\n                                                <span className=\"text-xs font-mono text-slate-500\">{data.colors.primary}</span>\n                                            </div>\n                                            <input\n                                                type=\"color\"\n                                                value={data.colors.primary}\n                                                onChange={(e) => updateData({ ...data, colors: { ...data.colors, primary: e.target.value } })}\n                                                className=\"w-full h-10 rounded-lg cursor-pointer bg-slate-900 border border-slate-700 p-1\"\n                                            />\n                                        </div>\n                                        <div>\n                                            <div className=\"flex justify-between mb-2\">\n                                                <span className=\"text-xs text-slate-400\">Cor Secundária</span>\n                                                <span className=\"text-xs font-mono text-slate-500\">{data.colors.secondary}</span>\n                                            </div>\n                                            <input\n                                                type=\"color\"\n                                                value={data.colors.secondary}\n                                                onChange={(e) => updateData({ ...data, colors: { ...data.colors, secondary: e.target.value } })}\n                                                className=\"w-full h-10 rounded-lg cursor-pointer bg-slate-900 border border-slate-700 p-1\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </section>\n\n                        <hr className=\"border-slate-800\" />\n\n                        {/* 3. Typography (Mock) */}\n                        <section className=\"space-y-4\">\n                            <h2 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2\">\n                                <Type size={14} /> Tipografia\n                            </h2>\n                            <div className=\"bg-slate-800 rounded-xl border border-slate-700 p-1\">\n                                {FONTS.map(font => {\n                                    const isActive = (data.content.font || 'sans') === font.id;\n                                    return (\n                                        <div\n                                            key={font.id}\n                                            className=\"flex items-center justify-between p-4 hover:bg-slate-700/50 rounded-lg cursor-pointer transition-colors\"\n                                            onClick={() => updateContent('font', font.id)}\n                                        >\n                                            <div className=\"flex items-center gap-3\">\n                                                <div className={cn(\n                                                    \"w-4 h-4 rounded-full border flex items-center justify-center transition-colors\",\n                                                    isActive ? \"border-blue-500 bg-blue-500\" : \"border-slate-500\"\n                                                )}>\n                                                    {isActive && <div className=\"w-1.5 h-1.5 rounded-full bg-white\" />}\n                                                </div>\n                                                <span className={cn(\"text-slate-200 text-lg\", font.class)}>{font.name}</span>\n                                            </div>\n                                            <span className=\"text-xs text-slate-500\">AgH</span>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                            <p className=\"text-xs text-slate-500 ml-1\">* A tipografia é adaptada automaticamente pelo tema escolhido atualmente.</p>\n                        </section>\n\n                        {/* Bottom Spacer */}\n                        <div className=\"h-20\"></div>\n                    </div>\n                </div>\n\n                {/* Right Panel: Live Preview */}\n                <div className={cn(\n                    \"lg:col-span-5 xl:col-span-4 bg-slate-950 relative lg:flex items-center justify-center p-8 border-l border-slate-800 bg-grid-slate-900/[0.04]\",\n                    viewMode === 'preview' ? \"flex h-full w-full fixed inset-0 z-40 bg-slate-950 top-36 lg:relative lg:top-0 lg:h-auto\" : \"hidden\"\n                )}>\n                    {viewMode === 'preview' && (\n                        <div className=\"absolute top-4 left-4 lg:hidden\">\n                            <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-900 border border-slate-800 text-slate-400 text-xs font-medium\">\n                                <Smartphone size={12} /> Mobile Preview\n                            </div>\n                        </div>\n                    )}\n\n                    <div className=\"absolute top-6 left-6 flex items-center gap-2 px-3 py-1.5 rounded-full bg-slate-900 border border-slate-800 text-slate-400 text-xs font-medium hidden lg:flex\">\n                        <Smartphone size={12} /> Live Preview\n                    </div>\n\n                    {/* Phone Mockup Frame */}\n                    <div className=\"relative w-[340px] h-[680px] bg-slate-900 rounded-[3rem] border-[8px] border-slate-800 shadow-2xl flex flex-col overflow-hidden ring-4 ring-slate-900/50 scale-90 md:scale-100\">\n                        {/* Notch/Status Bar Area */}\n                        <div className=\"h-8 bg-slate-900 w-full absolute top-0 z-50 flex justify-center\">\n                            <div className=\"h-5 w-32 bg-black rounded-b-xl\"></div>\n                        </div>\n\n                        {/* Screen Content */}\n                        <div className=\"flex-1 bg-white overflow-y-auto no-scrollbar relative w-full h-full\">\n                            <div className=\"origin-top w-full\">\n                                {/* Render Active Template */}\n                                {renderPreview()}\n                            </div>\n                        </div>\n\n                        {/* Bottom Indicator */}\n                        <div className=\"h-5 bg-black w-full absolute bottom-0 z-50 flex justify-center items-center pointer-events-none\">\n                            <div className=\"h-1 w-32 bg-slate-700 rounded-full\"></div>\n                        </div>\n                    </div>\n\n                    <div className=\"absolute bottom-8 text-center w-full text-slate-500 text-xs hidden lg:block\">\n                        Visualização mobile gerada em tempo real\n                    </div>\n                </div>\n\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/loyalty/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/marketing/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Badge' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Copy' is defined but never used.","line":8,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used.","line":8,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Send' is defined but never used.","line":8,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":8,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Megaphone' is defined but never used.","line":8,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Check, Copy, MessageSquare, Send, Zap, Crown, Megaphone } from 'lucide-react';\nimport MarketingStats from '@/features/marketing/components/MarketingStats';\nimport AutomationConfig from '@/features/marketing/components/AutomationConfig';\nimport LoyaltyDashboardConfig from '@/features/loyalty/components/LoyaltyDashboardConfig';\nimport { useFeatureAccess } from '@/features/marketing/hooks/useFeatureAccess';\nimport FeatureLocked from '@/features/dashboard/components/FeatureLocked';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '@/lib/firebase';\nimport { LoyaltyConfig } from '@/features/loyalty/types';\n\nexport default function MarketingPage() {\n    const hasAccess = useFeatureAccess('marketing');\n    const { user } = useAuth();\n    const [loyaltyConfig, setLoyaltyConfig] = useState<LoyaltyConfig | undefined>(undefined);\n\n    useEffect(() => {\n        if (!user) return;\n        const fetchConfig = async () => {\n            try {\n                const docRef = doc(db, 'barbershops', user.uid);\n                const snap = await getDoc(docRef);\n                if (snap.exists()) {\n                    setLoyaltyConfig(snap.data().loyalty);\n                }\n            } catch (error) {\n                console.error(\"Error fetching loyalty config:\", error);\n            }\n        };\n        fetchConfig();\n    }, [user]);\n\n    if (!hasAccess) {\n        return (\n            <FeatureLocked\n                title=\"Funcionalidade Bloqueada\"\n                description=\"O módulo de Marketing e Comunicação é um recurso exclusivo. Faça um upgrade no seu plano para desbloquear automações de mensagens e campanhas.\"\n            />\n        );\n    }\n\n    return (\n        <div className=\"space-y-6\">\n            <div>\n                <h1 className=\"text-2xl font-bold text-slate-100\">Marketing e Comunicação</h1>\n                <p className=\"text-slate-400\">Gerencie suas campanhas e automações de mensagens.</p>\n            </div>\n\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n                <TabsList className=\"grid w-full grid-cols-4 bg-slate-800 text-slate-400\">\n                    <TabsTrigger value=\"overview\" className=\"data-[state=active]:bg-slate-900 data-[state=active]:text-slate-100\">Visão Geral</TabsTrigger>\n                    <TabsTrigger value=\"automations\" className=\"data-[state=active]:bg-slate-900 data-[state=active]:text-slate-100\">Automações</TabsTrigger>\n                    <TabsTrigger value=\"campaigns\" className=\"data-[state=active]:bg-slate-900 data-[state=active]:text-slate-100\">Campanhas</TabsTrigger>\n                    <TabsTrigger value=\"loyalty\" className=\"flex items-center gap-2 data-[state=active]:bg-slate-900 data-[state=active]:text-slate-100\">\n                        <Crown size={14} className=\"text-yellow-500\" />\n                        Fidelidade\n                    </TabsTrigger>\n                </TabsList>\n\n                <TabsContent value=\"overview\" className=\"mt-6\">\n                    <MarketingStats />\n                </TabsContent>\n\n                <TabsContent value=\"automations\" className=\"mt-6\">\n                    <AutomationConfig />\n                </TabsContent>\n\n                <TabsContent value=\"campaigns\" className=\"mt-6\">\n                    <Card className=\"bg-slate-800 border-slate-700\">\n                        <CardHeader>\n                            <CardTitle className=\"text-slate-100\">Campanhas em Massa</CardTitle>\n                            <CardDescription className=\"text-slate-400\">Envie promoções para toda sua base de clientes.</CardDescription>\n                        </CardHeader>\n                        <CardContent>\n                            <div className=\"text-center py-12 text-slate-500\">\n                                <p>Funcionalidade de campanhas em breve.</p>\n                            </div>\n                        </CardContent>\n                    </Card>\n                </TabsContent>\n\n                <TabsContent value=\"loyalty\" className=\"mt-6\">\n                    <LoyaltyDashboardConfig\n                        barbershopId={user?.uid || ''}\n                        initialConfig={loyaltyConfig}\n                    />\n                </TabsContent>\n            </Tabs>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":9,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Clock' is defined but never used.","line":9,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PieChart' is defined but never used.","line":10,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":10,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":10,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Droplets' is defined but never used.","line":11,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Brush' is defined but never used.","line":11,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used.","line":11,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageSquare' is defined but never used.","line":11,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BellRing' is defined but never used.","line":11,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Cake' is defined but never used.","line":11,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RotateCcw' is defined but never used.","line":12,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Menu' is defined but never used.","line":12,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingDown' is defined but never used.","line":12,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Scissors' is defined but never used.","line":12,"column":59,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertCircle' is defined but never used.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ptBR' is defined but never used.","line":18,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":14},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":30,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1380,1383],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1380,1383],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":368,"column":60,"nodeType":"JSXOpeningElement","endLine":368,"endColumn":146}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport Link from 'next/link';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs, Timestamp, orderBy, limit, doc, getDoc } from 'firebase/firestore';\nimport {\n    Users, Calendar, DollarSign, TrendingUp, Clock, Loader2,\n    Receipt, UserPlus, PieChart, Star, ArrowRight, Package,\n    Droplets, Brush, Globe, MessageSquare, BellRing, Cake,\n    RotateCcw, Megaphone, Bell, Plus, Menu, TrendingDown, Scissors,\n    AlertCircle\n} from 'lucide-react';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport { cn } from '@/lib/utils';\nimport { startOfDay, endOfDay, startOfWeek, endOfWeek, format, isSameDay, startOfMonth, endOfMonth } from 'date-fns';\nimport { ptBR } from 'date-fns/locale';\nimport { Product, Service } from '@/types/barbershop';\nimport BookingModal from '@/features/booking/components/BookingModal';\nimport { Barber } from '@/features/team/types';\nimport ShareBarbershopCard from '@/features/dashboard/components/ShareBarbershopCard';\n\ninterface DashboardMetrics {\n    appointmentsToday: number;\n    appointmentsPending: number;\n    revenueMonth: number;\n    revenueToday: number;\n    weeklyData: { name: string; appointments: number }[];\n    recentAppointments: any[];\n    pageViews: number;\n    products: Product[];\n    services: Service[];\n    appointmentsMonthCount: number;\n    barbersStats: {\n        id: string;\n        name: string;\n        photoUrl?: string;\n        appointments: number;\n        revenue: number;\n    }[];\n    uniqueClientsMonth: number;\n    slug?: string;\n}\n\nexport default function DashboardPage() {\n    const { user } = useAuth();\n    const [loading, setLoading] = useState(true);\n    const [isBookingOpen, setIsBookingOpen] = useState(false);\n    const [metrics, setMetrics] = useState<DashboardMetrics>({\n        appointmentsToday: 0,\n        appointmentsPending: 0,\n        revenueMonth: 0,\n        revenueToday: 0,\n        weeklyData: [],\n        recentAppointments: [],\n        pageViews: 0,\n        products: [],\n        services: [],\n        appointmentsMonthCount: 0,\n        barbersStats: [],\n        uniqueClientsMonth: 0,\n        slug: ''\n    });\n\n    useEffect(() => {\n        const fetchMetrics = async () => {\n            if (!user) return;\n\n            try {\n                const now = new Date();\n                const todayStart = startOfDay(now);\n                const todayEnd = endOfDay(now);\n                const monthStart = startOfMonth(now);\n                const monthEnd = endOfMonth(now);\n                const weekStart = startOfWeek(now, { weekStartsOn: 1 });\n                const weekEnd = endOfWeek(now, { weekStartsOn: 1 });\n\n                const appointmentsRef = collection(db, 'appointments');\n\n                // 1. Fetch Today's Appointments & Revenue\n                const todayQuery = query(\n                    appointmentsRef,\n                    where('barbershopId', '==', user.uid),\n                    where('date', '>=', Timestamp.fromDate(todayStart)),\n                    where('date', '<=', Timestamp.fromDate(todayEnd))\n                );\n                const todaySnap = await getDocs(todayQuery);\n                const appointmentsToday = todaySnap.size;\n                const appointmentsPending = todaySnap.docs.filter(d => d.data().status === 'pending').length;\n                const revenueToday = todaySnap.docs.reduce((acc, doc) => {\n                    const data = doc.data();\n                    return data.status !== 'cancelled' ? acc + (data.price || 0) : acc;\n                }, 0);\n\n                // 2. Fetch Month's Revenue & Count & Detailed Stats\n                const monthQuery = query(\n                    appointmentsRef,\n                    where('barbershopId', '==', user.uid),\n                    where('date', '>=', Timestamp.fromDate(monthStart)),\n                    where('date', '<=', Timestamp.fromDate(monthEnd))\n                );\n                const monthSnap = await getDocs(monthQuery);\n                const appointmentsMonthCount = monthSnap.size;\n                const revenueMonth = monthSnap.docs.reduce((acc, doc) => {\n                    const data = doc.data();\n                    return data.status !== 'cancelled' ? acc + (data.price || 0) : acc;\n                }, 0);\n\n                // Unique Clients (based on phone number as proxy for unique ID)\n                const uniqueClients = new Set(monthSnap.docs.map(d => d.data().phone));\n                const uniqueClientsMonth = uniqueClients.size;\n\n                // 3. Weekly Data\n                const weekQuery = query(\n                    appointmentsRef,\n                    where('barbershopId', '==', user.uid),\n                    where('date', '>=', Timestamp.fromDate(weekStart)),\n                    where('date', '<=', Timestamp.fromDate(weekEnd))\n                );\n                const weekSnap = await getDocs(weekQuery);\n                const daysOfWeek = ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'];\n                const weeklyData = daysOfWeek.map((day, index) => {\n                    const currentDay = new Date(weekStart);\n                    currentDay.setDate(weekStart.getDate() + index);\n                    const count = weekSnap.docs.filter(doc => isSameDay(doc.data().date.toDate(), currentDay)).length;\n                    return { name: day, appointments: count };\n                });\n\n                // 4. Recent Appointments\n                const recentQuery = query(\n                    appointmentsRef,\n                    where('barbershopId', '==', user.uid),\n                    where('date', '>=', Timestamp.fromDate(now)),\n                    orderBy('date', 'asc'),\n                    limit(5)\n                );\n                const recentSnap = await getDocs(recentQuery);\n                const recentAppointments = recentSnap.docs.map(doc => {\n                    const data = doc.data();\n                    return {\n                        id: doc.id,\n                        client: data.customerName,\n                        service: data.serviceName,\n                        time: format(data.date.toDate(), 'HH:mm'),\n                        date: format(data.date.toDate(), 'dd/MM'),\n                        status: data.status === 'pending' ? 'Pendente' : 'Confirmado'\n                    };\n                });\n\n                // 5. Page Views & Products & Services\n                const userDocRef = doc(db, 'users', user.uid);\n                const userDocSnap = await getDoc(userDocRef);\n                const pageViews = userDocSnap.exists() ? (userDocSnap.data().pageViews || 0) : 0;\n\n                const barbershopDocRef = doc(db, 'barbershops', user.uid);\n                const barbershopSnap = await getDoc(barbershopDocRef);\n                const products = barbershopSnap.exists() ? (barbershopSnap.data().products || []).slice(0, 3) : [];\n                const services = barbershopSnap.exists() ? (barbershopSnap.data().services || []) : [];\n                const slug = barbershopSnap.exists() ? barbershopSnap.data().slug : '';\n\n                // 6. Fetch Barbers & Calculate Stats\n                const barbersQuery = query(collection(db, 'barbershops', user.uid, 'professionals'), where('active', '==', true));\n                const barbersSnap = await getDocs(barbersQuery);\n                const barbers = barbersSnap.docs.map(d => ({ id: d.id, ...d.data() })) as Barber[];\n\n                const barbersStats = barbers.map(barber => {\n                    const barberAppointments = monthSnap.docs.filter(d => d.data().barberId === barber.id);\n                    const barberRevenue = barberAppointments.reduce((acc, d) => {\n                        const data = d.data();\n                        return data.status !== 'cancelled' ? acc + (data.price || 0) : acc;\n                    }, 0);\n                    return {\n                        id: barber.id,\n                        name: barber.name,\n                        photoUrl: barber.photoUrl,\n                        appointments: barberAppointments.length,\n                        revenue: barberRevenue\n                    };\n                });\n\n                setMetrics({\n                    appointmentsToday,\n                    appointmentsPending,\n                    revenueMonth,\n                    revenueToday,\n                    weeklyData,\n                    recentAppointments,\n                    pageViews,\n                    products,\n                    services,\n                    appointmentsMonthCount,\n                    barbersStats,\n                    uniqueClientsMonth,\n                    slug\n                });\n\n            } catch (error) {\n                console.error(\"Error fetching dashboard metrics:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchMetrics();\n    }, [user]);\n\n    const ticketMean = metrics.appointmentsMonthCount > 0\n        ? metrics.revenueMonth / metrics.appointmentsMonthCount\n        : 0;\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-96\">\n                <Loader2 className=\"animate-spin text-slate-400\" size={32} />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-8 pb-8 font-sans\">\n            {/* Header */}\n            <div className=\"flex flex-col md:flex-row justify-between items-center gap-4 border-b border-slate-800 pb-6\">\n                <div className=\"flex items-center gap-4\">\n                    <h2 className=\"text-xl font-bold text-white tracking-tight\">Dashboard de Gestão</h2>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                    <button className=\"p-2 rounded-full hover:bg-slate-800 text-slate-400 hover:text-white transition-colors relative\">\n                        <Bell size={20} />\n                        {metrics.appointmentsPending > 0 && (\n                            <span className=\"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full\"></span>\n                        )}\n                    </button>\n                    <button\n                        onClick={() => setIsBookingOpen(true)}\n                        className=\"bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-lg shadow-yellow-600/20\"\n                    >\n                        <Plus size={18} />\n                        Novo Agendamento\n                    </button>\n                </div>\n            </div>\n\n            {/* Share Your Barbershop Card */}\n            <ShareBarbershopCard slug={metrics.slug} />\n\n            {/* KPI Cards */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n                {/* Revenue Today */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg flex items-center justify-between\">\n                    <div>\n                        <p className=\"text-slate-400 text-sm font-medium\">Receita Hoje</p>\n                        <h3 className=\"text-2xl font-bold text-white mt-1\">\n                            {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(metrics.revenueToday)}\n                        </h3>\n                        <p className=\"text-sm font-medium text-slate-500 mt-1\">\n                            Diário\n                        </p>\n                    </div>\n                    <div className=\"w-12 h-12 rounded-full bg-slate-700 flex items-center justify-center text-yellow-500\">\n                        <DollarSign size={24} />\n                    </div>\n                </div>\n\n                {/* Appointments Today */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg flex items-center justify-between\">\n                    <div>\n                        <p className=\"text-slate-400 text-sm font-medium\">Agendamentos</p>\n                        <h3 className=\"text-2xl font-bold text-white mt-1\">{metrics.appointmentsToday}</h3>\n                        <p className=\"text-slate-500 text-xs mt-1\">{metrics.appointmentsPending} pendentes</p>\n                    </div>\n                    <div className=\"w-12 h-12 rounded-full bg-slate-700 flex items-center justify-center text-blue-500\">\n                        <Calendar size={24} />\n                    </div>\n                </div>\n\n                {/* Ticket Mean */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg flex items-center justify-between\">\n                    <div>\n                        <p className=\"text-slate-400 text-sm font-medium\">Ticket Médio (Mês)</p>\n                        <h3 className=\"text-2xl font-bold text-white mt-1\">\n                            {new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(ticketMean)}\n                        </h3>\n                        <p className=\"text-slate-500 text-xs mt-1 font-medium\">\n                            Base: {metrics.appointmentsMonthCount} agend.\n                        </p>\n                    </div>\n                    <div className=\"w-12 h-12 rounded-full bg-slate-700 flex items-center justify-center text-purple-500\">\n                        <Receipt size={24} />\n                    </div>\n                </div>\n\n                {/* Active Clients */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg flex items-center justify-between\">\n                    <div>\n                        <p className=\"text-slate-400 text-sm font-medium\">Clientes Ativos (Mês)</p>\n                        <h3 className=\"text-2xl font-bold text-white mt-1\">{metrics.uniqueClientsMonth}</h3>\n                        <p className=\"text-slate-500 text-xs mt-1 font-medium\">\n                            Únicos\n                        </p>\n                    </div>\n                    <div className=\"w-12 h-12 rounded-full bg-slate-700 flex items-center justify-center text-green-500\">\n                        <UserPlus size={24} />\n                    </div>\n                </div>\n            </div>\n\n            {/* CHART SECTION */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                <div className=\"lg:col-span-3 bg-slate-800 p-6 rounded-xl shadow-lg border border-slate-700\">\n                    <div className=\"flex justify-between items-center mb-6\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                            <Calendar className=\"text-blue-500\" size={20} />\n                            Volume de Agendamentos (Semanal)\n                        </h3>\n                    </div>\n                    <div className=\"h-[300px] w-full\">\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={metrics.weeklyData}>\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#334155\" />\n                                <XAxis\n                                    dataKey=\"name\"\n                                    axisLine={false}\n                                    tickLine={false}\n                                    tick={{ fill: '#94a3b8', fontSize: 12 }}\n                                    dy={10}\n                                />\n                                <YAxis\n                                    axisLine={false}\n                                    tickLine={false}\n                                    tick={{ fill: '#94a3b8', fontSize: 12 }}\n                                    allowDecimals={false}\n                                />\n                                <Tooltip\n                                    cursor={{ fill: '#1e293b' }}\n                                    contentStyle={{\n                                        borderRadius: '8px',\n                                        border: '1px solid #334155',\n                                        backgroundColor: '#0f172a',\n                                        color: '#fff',\n                                        boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)'\n                                    }}\n                                />\n                                <Bar\n                                    dataKey=\"appointments\"\n                                    fill=\"#3b82f6\"\n                                    radius={[4, 4, 0, 0]}\n                                    barSize={40}\n                                />\n                            </BarChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n            </div>\n\n            {/* Team Performance - REAL DATA */}\n            <div>\n                <h3 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                    <Users className=\"text-yellow-600\" size={20} /> Desempenho da Equipe (Este Mês)\n                </h3>\n                {metrics.barbersStats.length > 0 ? (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                        {metrics.barbersStats.map((barber, i) => (\n                            <div key={barber.id} className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg relative overflow-hidden\">\n                                <div className={cn(\"absolute top-0 left-0 w-1 h-full\", i % 2 === 0 ? \"bg-green-500\" : \"bg-yellow-500\")}></div>\n                                <div className=\"flex items-center gap-4 mb-4\">\n                                    <div className=\"w-14 h-14 rounded-xl bg-slate-600 flex items-center justify-center text-2xl overflow-hidden\">\n                                        {barber.photoUrl ? <img src={barber.photoUrl} alt={barber.name} className=\"w-full h-full object-cover\" /> : <Users size={24} className=\"text-slate-400\" />}\n                                    </div>\n                                    <div>\n                                        <h4 className=\"font-bold text-white\">{barber.name}</h4>\n                                        <div className=\"flex items-center gap-1 text-yellow-500 text-sm\">\n                                            {/* Rating mocked as not in DB yet, or hide */}\n                                            <span className=\"text-xs text-slate-500\">Profissional</span>\n                                        </div>\n                                    </div>\n                                    <div className=\"ml-auto flex flex-col items-end\">\n                                        <span className=\"text-lg font-bold text-white\">\n                                            {barber.revenue > 1000\n                                                ? `${(barber.revenue / 1000).toFixed(1)}k`\n                                                : barber.revenue}\n                                        </span>\n                                        <span className=\"text-xs text-slate-400\">Receita</span>\n                                    </div>\n                                </div>\n                                <div className=\"grid grid-cols-2 gap-4 border-t border-slate-700 pt-4\">\n                                    <div>\n                                        <p className=\"text-xs text-slate-400 mb-1\">Agendamentos</p>\n                                        <p className=\"font-semibold text-white\">{barber.appointments}</p>\n                                    </div>\n                                    <div>\n                                        <p className=\"text-xs text-slate-400 mb-1\">Ticket Médio</p>\n                                        <p className=\"font-semibold text-white\">\n                                            {barber.appointments > 0 ? (barber.revenue / barber.appointments).toFixed(0) : 0}\n                                        </p>\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                ) : (\n                    <div className=\"bg-slate-800 p-6 rounded-xl border border-slate-700 text-center text-slate-400\">\n                        Nenhum profissional com atividade este mês.\n                    </div>\n                )}\n            </div>\n\n            {/* Campaigns & Products */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                {/* Campaigns (Empty State for now as requested 'Real Data') */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                            <Megaphone className=\"text-purple-500\" size={20} /> Campanhas\n                        </h3>\n                    </div>\n                    <div className=\"space-y-4 flex flex-col items-center justify-center min-h-[150px] text-center\">\n                        <div className=\"w-12 h-12 bg-slate-700/50 rounded-full flex items-center justify-center mb-2\">\n                            <Megaphone className=\"text-slate-500\" size={24} />\n                        </div>\n                        <p className=\"text-slate-400 text-sm\">Nenhuma campanha de marketing ativa no momento.</p>\n                        <Link href=\"/dashboard/marketing\" className=\"text-xs bg-purple-600/20 text-purple-400 px-3 py-1 rounded-full hover:bg-purple-600/30 transition-colors\">\n                            Criar primeira campanha\n                        </Link>\n                    </div>\n                </div>\n\n                {/* Products */}\n                <div className=\"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <h3 className=\"text-lg font-semibold text-white flex items-center gap-2\">\n                            <Package className=\"text-orange-500\" size={20} /> Vendas de Produtos\n                        </h3>\n                        <button className=\"text-xs text-orange-400 hover:text-orange-300\">Gerenciar</button>\n                    </div>\n                    <div className=\"space-y-4\">\n                        {metrics.products.length > 0 ? metrics.products.map((product) => (\n                            <div key={product.id} className=\"flex items-center gap-4 p-2 hover:bg-slate-700/30 rounded-lg transition-colors\">\n                                <div className=\"bg-slate-700 w-12 h-12 rounded flex items-center justify-center text-slate-400\">\n                                    <Package size={20} />\n                                </div>\n                                <div className=\"flex-1\">\n                                    <p className=\"text-sm font-medium text-white\">{product.name}</p>\n                                    <p className=\"text-xs text-slate-400\">{product.active ? 'Disponível' : 'Indisponível'}</p>\n                                </div>\n                                <div className=\"text-right\">\n                                    <p className=\"text-sm font-bold text-white\">R$ {product.price.toFixed(2)}</p>\n                                </div>\n                            </div>\n                        )) : (\n                            <div className=\"text-center text-slate-500 py-4 text-sm flex flex-col items-center\">\n                                <Package className=\"mb-2 opacity-50\" size={32} />\n                                Nenhum produto cadastrado.\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Traffic & Logs (Simplified/Emptied for Real Data consistency) */}\n            <div className=\"grid grid-cols-1 gap-6 text-center\">\n                <div className=\"p-4 rounded-lg bg-slate-800/50 text-slate-500 text-xs\">\n                    Mais métricas de tráfego e logs estarão disponíveis em breve.\n                </div>\n            </div>\n\n            <BookingModal\n                isOpen={isBookingOpen}\n                onClose={() => setIsBookingOpen(false)}\n                barbershopId={user?.uid || ''}\n                services={metrics.services}\n                themeColor=\"#ca8a04\"\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/plan/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreditCard' is defined but never used.","line":3,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Check, X, CreditCard, Rocket, Crown, Zap } from 'lucide-react';\nimport { useSubscription } from '@/features/subscription/hooks/useSubscription';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport { PlanTier } from '@/config/plans';\nimport { useState } from 'react';\nimport { Loader2 } from 'lucide-react';\n\nexport default function PlanPage() {\n    const { currentPlan, upgradePlan } = useSubscription();\n    const [isLoading, setIsLoading] = useState<string | null>(null);\n\n    const handleUpgrade = async (plan: PlanTier) => {\n        setIsLoading(plan);\n        await upgradePlan(plan);\n        setIsLoading(null);\n    };\n\n    const isCurrent = (plan: PlanTier) => currentPlan === plan;\n\n    const plans = [\n        {\n            id: 'STARTER',\n            name: 'Starter',\n            price: 'R$ 29,90',\n            period: '/mês',\n            description: 'Tudo para começar sua presença digital.',\n            features: [\n                'Site Profissional (Template Clássico)',\n                '1 Barbeiro',\n                'Agendamento via WhatsApp',\n                'Galeria de Fotos (até 10)',\n                'Hospedagem Inclusa'\n            ],\n            notIncluded: [\n                'Domínio Personalizado',\n                'Templates Premium',\n                'Gestão de Produtos',\n                'Ferramentas de Marketing'\n            ],\n            color: 'bg-blue-600',\n            icon: Rocket\n        },\n        {\n            id: 'PRO',\n            name: 'Pro',\n            price: 'R$ 59,90',\n            period: '/mês',\n            description: 'Para barbearias que querem se destacar.',\n            popular: true,\n            features: [\n                'Todos do Starter',\n                '3 Barbeiros',\n                'Templates Premium (Urban, Minimal)',\n                'Domínio Personalizado (.com.br)',\n                'Sem marca \"Feito com BarberSaaS\"',\n                'Gestão de Avaliações'\n            ],\n            notIncluded: [\n                'Loja de Produtos',\n                'Campanhas de Marketing (SMS/Email)',\n                'Programa de Fidelidade'\n            ],\n            color: 'bg-indigo-600',\n            icon: Zap\n        },\n        {\n            id: 'BUSINESS',\n            name: 'Business',\n            price: 'R$ 99,90',\n            period: '/mês',\n            description: 'Gestão completa e ferramentas de crescimento.',\n            features: [\n                'Todos do Pro',\n                'Barbeiros Ilimitados',\n                'Loja de Produtos Integrada',\n                'Módulo de Marketing/Automação',\n                'Programa de Fidelidade',\n                'API para integração externa',\n                'Suporte Prioritário VIP'\n            ],\n            notIncluded: [],\n            color: 'bg-amber-500',\n            icon: Crown\n        }\n    ];\n\n    return (\n        <div className=\"p-8 max-w-7xl mx-auto\">\n            <div className=\"mb-12\">\n                <h1 className=\"text-4xl font-black text-slate-100 tracking-tight mb-4\">Seu Plano</h1>\n                <p className=\"text-slate-400 text-lg max-w-2xl\">\n                    Gerencie sua assinatura e desbloqueie recursos exclusivos para escalar sua barbearia.\n                </p>\n\n                <div className=\"mt-8 p-6 bg-slate-800 border border-slate-700 rounded-2xl text-white flex items-center justify-between shadow-xl\">\n                    <div>\n                        <div className=\"text-slate-400 text-sm uppercase font-bold tracking-widest mb-1\">Plano Atual</div>\n                        <div className=\"text-3xl font-black\">{currentPlan === 'FREE' ? 'Gratuito (Trial)' : currentPlan}</div>\n                        <div className=\"text-slate-400 mt-2 flex items-center gap-2\">\n                            <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></div>\n                            Ativo • Renovação em 15/01/2026\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"grid md:grid-cols-3 gap-8\">\n                {plans.map((plan) => (\n                    <div\n                        key={plan.id}\n                        className={cn(\n                            \"relative bg-slate-800 rounded-2xl p-8 border hover:border-slate-600 transition-all duration-300 flex flex-col\",\n                            isCurrent(plan.id as PlanTier) ? \"border-blue-500 ring-2 ring-blue-500/50\" : \"border-slate-700\",\n                            plan.popular && !isCurrent(plan.id as PlanTier) ? \"border-indigo-500 shadow-indigo-500/10 shadow-2xl\" : \"\"\n                        )}\n                    >\n                        {plan.popular && (\n                            <div className=\"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-indigo-600 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest shadow-lg\">\n                                Mais Popular\n                            </div>\n                        )}\n\n                        <div className=\"mb-8\">\n                            <div className={cn(\"w-12 h-12 rounded-xl flex items-center justify-center mb-6 text-white shadow-lg\", plan.color)}>\n                                <plan.icon size={24} />\n                            </div>\n                            <h3 className=\"text-2xl font-bold text-slate-100 mb-2\">{plan.name}</h3>\n                            <p className=\"text-slate-400 text-sm mb-6 h-10\">{plan.description}</p>\n                            <div className=\"flex items-baseline\">\n                                <span className=\"text-4xl font-black text-slate-100\">{plan.price}</span>\n                                <span className=\"text-slate-500 font-medium ml-1\">{plan.period}</span>\n                            </div>\n                        </div>\n\n                        <div className=\"flex-1 mb-8\">\n                            <ul className=\"space-y-4\">\n                                {plan.features.map((feature, i) => (\n                                    <li key={i} className=\"flex items-start gap-3 text-sm font-medium text-slate-300\">\n                                        <div className=\"mt-0.5 min-w-[18px] h-[18px] rounded-full bg-green-500/10 flex items-center justify-center text-green-400\">\n                                            <Check size={12} strokeWidth={3} />\n                                        </div>\n                                        {feature}\n                                    </li>\n                                ))}\n                                {plan.notIncluded.map((feature, i) => (\n                                    <li key={i} className=\"flex items-start gap-3 text-sm text-slate-500\">\n                                        <div className=\"mt-0.5 min-w-[18px] h-[18px] rounded-full bg-slate-700/50 flex items-center justify-center text-slate-500\">\n                                            <X size={12} strokeWidth={3} />\n                                        </div>\n                                        {feature}\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n\n                        <Button\n                            className={cn(\n                                \"w-full py-6 font-bold text-lg uppercase tracking-wide\",\n                                isCurrent(plan.id as PlanTier)\n                                    ? \"bg-slate-700 text-slate-400 hover:bg-slate-700 cursor-default\"\n                                    : plan.popular ? \"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/20\" : \"bg-slate-100 text-slate-900 hover:bg-white\"\n                            )}\n                            disabled={isCurrent(plan.id as PlanTier) || isLoading !== null}\n                            onClick={() => !isCurrent(plan.id as PlanTier) && handleUpgrade(plan.id as PlanTier)}\n                        >\n                            {isLoading === plan.id ? (\n                                <Loader2 className=\"animate-spin\" />\n                            ) : isCurrent(plan.id as PlanTier) ? (\n                                \"Plano Atual\"\n                            ) : (\n                                \"Escolher Plano\"\n                            )}\n                        </Button>\n                    </div>\n                ))}\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/products/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/promotions/PromotionsPageClient.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'can' is assigned a value but never used.","line":20,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isAllowed' is assigned a value but never used.","line":23,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsAllowed' is assigned a value but never used.","line":23,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { usePermission } from '@/hooks/usePermission';\nimport { useEffect, useState } from 'react';\nimport { getBarbershopByOwner } from '@/app/actions/barbershop';\nimport { getPromotions } from '@/app/actions/promotions';\nimport { productService } from '@/features/products/services/productService';\nimport PromotionsList from '@/features/promotions/components/PromotionsList';\nimport CreatePromotionForm from '@/features/promotions/components/CreatePromotionForm';\nimport { Promotion } from '@/features/promotions/types';\nimport { BarbershopData } from '@/types/barbershop';\nimport { Product } from '@/features/products/types';\nimport { Loader2, Lock } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport Link from 'next/link';\n\nexport default function PromotionsPageClient() {\n    const { user, loading: authLoading } = useAuth();\n    const { can, loading: permLoading } = usePermission();\n\n    // Feature Gating Checks\n    const [isAllowed, setIsAllowed] = useState(false);\n\n    // Data\n    const [promotions, setPromotions] = useState<Promotion[]>([]);\n    const [barbershop, setBarbershop] = useState<BarbershopData | null>(null);\n    const [products, setProducts] = useState<Product[]>([]);\n    const [loadingData, setLoadingData] = useState(true);\n\n    useEffect(() => {\n        if (!user) return;\n\n        // Check Permissions (Assuming 'products' permission serves as proxy, OR we added 'promotions' key)\n        // Prompt says: \"If plan === 'STARTER', block... PRO/EMPIRE allowed\".\n        // Current plans: FREE, STARTER, PRO, BUSINESS.\n        // Assuming we need to check if plan is >= PRO.\n        // `usePermission` uses `canUser`. We can check `plan` directly.\n\n        async function load() {\n            try {\n                const shop = await getBarbershopByOwner(user!.uid);\n                if (shop) {\n                    setBarbershop(shop);\n\n                    // Fetch Promotions\n                    const promoResult = await getPromotions(shop.id);\n                    if (promoResult.success && promoResult.promotions) {\n                        setPromotions(promoResult.promotions);\n                    }\n\n                    // Fetch Products\n                    const prods = await productService.getProductsByBarberId(shop.id);\n                    setProducts(prods);\n                }\n            } catch (e) {\n                console.error(e);\n            } finally {\n                setLoadingData(false);\n            }\n        }\n\n        load();\n    }, [user]);\n\n    // Derived permission state\n    const { plan } = usePermission();\n    // Assuming PRO+ access.\n    const hasAccess = plan === 'PRO' || plan === 'BUSINESS';\n\n    if (authLoading || permLoading || loadingData) {\n        return <div className=\"flex h-96 items-center justify-center\"><Loader2 className=\"animate-spin\" /></div>;\n    }\n\n    if (!hasAccess) {\n        return (\n            <div className=\"flex flex-col items-center justify-center h-[60vh] text-center space-y-6\">\n                <div className=\"bg-slate-100 p-6 rounded-full\">\n                    <Lock size={48} className=\"text-slate-400\" />\n                </div>\n                <h1 className=\"text-3xl font-bold text-slate-900\">Feature Locked</h1>\n                <p className=\"text-slate-500 max-w-md\">\n                    Smart Upsells & Promotions are available exclusively for <strong>PRO</strong> and <strong>Business</strong> plans.\n                    Boost your revenue by offering automatic deals!\n                </p>\n                <Button asChild className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-6 px-8 text-lg hover:opacity-90\">\n                    <Link href=\"/dashboard/plan\">Upgrade to PRO</Link>\n                </Button>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-8\">\n            <div>\n                <h1 className=\"text-3xl font-bold tracking-tight\">Smart Promotions</h1>\n                <p className=\"text-slate-500\">Create automatic upsell offers triggered by specific services.</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                {/* Form Section */}\n                <div className=\"lg:col-span-1\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Create New Offer</h2>\n                    <CreatePromotionForm\n                        services={barbershop?.services || []}\n                        products={products}\n                        onSuccess={() => {\n                            // Refresh list locally\n                            if (barbershop) {\n                                getPromotions(barbershop.id).then(res => {\n                                    if (res.promotions) setPromotions(res.promotions);\n                                });\n                            }\n                        }}\n                    />\n                </div>\n\n                {/* List Section */}\n                <div className=\"lg:col-span-2\">\n                    <h2 className=\"text-xl font-semibold mb-4\">Active Promotions</h2>\n                    <PromotionsList promotions={promotions} />\n                </div>\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/promotions/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getBarbershopByOwner' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getPromotions' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PromotionsList' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CreatePromotionForm' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'productService' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'redirect' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getBarbershopByOwner } from '@/app/actions/barbershop';\nimport { getPromotions } from '@/app/actions/promotions';\nimport PromotionsList from '@/features/promotions/components/PromotionsList';\nimport CreatePromotionForm from '@/features/promotions/components/CreatePromotionForm';\nimport { productService } from '@/features/products/services/productService';\nimport { redirect } from 'next/navigation';\n\n// Mock user retrieval (replace with real auth in prod)\n// We assume for Dashboard page we can get the user context or use a fixed one if dev.\n// Ideally, Page receives generic params but dashboard layout provides context...\n// Since this is a server component, we can't use useAuth context directly.\n// We need to fetch current user ID from headers/cookies ideally.\n// IMPLEMENTATION_NOTE: For this task, assuming we fetch based on a hardcoded ID for dev OR client-side fetching wrapper.\n// HOWEVER, best practice is Server Component fetching.\n// I will create a wrapper client component for the layout refactor later.\n// For now, I'll make the page fetch if I can mock the user ID, or return null if not found.\n\n// WAIT: The prompt implies this is inside the dashboard. Dashboard usually has access to user.\n// Since implementation details of auth on server are vague (Firebase client is used), \n// I will use a Client Component Wrapper for the whole page content to access `useAuth` and then fetch data via Actions.\n\nimport PromotionsPageClient from './PromotionsPageClient';\n\nexport default function PromotionsPage() {\n    return <PromotionsPageClient />;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/schedule/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Timestamp' is defined but never used.","line":6,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, onSnapshot, Timestamp } from 'firebase/firestore';\nimport CalendarView from '@/features/calendar/components/CalendarView';\nimport { Appointment } from '@/types/appointment';\nimport { Loader2 } from 'lucide-react';\n\nexport default function SchedulePage() {\n    const { user } = useAuth();\n    const [appointments, setAppointments] = useState<Appointment[]>([]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        if (!user) return;\n\n        const q = query(\n            collection(db, 'appointments'),\n            where('barbershopId', '==', user.uid)\n        );\n\n        const unsubscribe = onSnapshot(q, (snapshot) => {\n            const data = snapshot.docs.map(doc => ({\n                id: doc.id,\n                ...doc.data()\n            })) as Appointment[];\n\n            setAppointments(data);\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, [user]);\n\n    if (loading) {\n        return (\n            <div className=\"flex items-center justify-center h-full\">\n                <Loader2 className=\"animate-spin text-slate-400\" size={32} />\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"h-[calc(100vh-8rem)] flex flex-col\">\n            <div className=\"mb-6\">\n                <h1 className=\"text-3xl font-bold text-white\">Agenda</h1>\n                <p className=\"text-slate-400\">Gerencie todos os seus agendamentos.</p>\n            </div>\n\n            <div className=\"flex-1 bg-slate-900 rounded-xl overflow-hidden border border-slate-800 shadow-xl\">\n                <CalendarView\n                    appointments={appointments}\n                    onDateSelect={(date) => console.log(date)}\n                />\n            </div>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/services/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Save' is defined but never used.","line":8,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { doc, getDoc, updateDoc } from 'firebase/firestore';\nimport { Button } from '@/components/ui/button';\nimport { Plus, Pencil, Trash2, X, Save, Clock, DollarSign } from 'lucide-react';\nimport { BarbershopData, Service } from '@/types/barbershop';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport default function ServicesPage() {\n    const { user } = useAuth();\n    const [loading, setLoading] = useState(true);\n    const [services, setServices] = useState<Service[]>([]);\n\n    // Modal State\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingIndex, setEditingIndex] = useState<number | null>(null);\n    // Allow price to be string | number to handle empty input state elegantly\n    const [formData, setFormData] = useState<{ name: string; price: string | number; duration: string }>({ name: '', price: '', duration: '30 min' });\n    const [saving, setSaving] = useState(false);\n\n    useEffect(() => {\n        const fetchServices = async () => {\n            if (!user) return;\n            try {\n                const docRef = doc(db, 'barbershops', user.uid);\n                const docSnap = await getDoc(docRef);\n\n                if (docSnap.exists()) {\n                    const data = docSnap.data() as BarbershopData;\n                    setServices(data.services || []);\n                }\n            } catch (error) {\n                console.error(\"Error fetching services:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchServices();\n    }, [user]);\n\n    const handleOpenModal = (index?: number) => {\n        if (index !== undefined) {\n            setEditingIndex(index);\n            setFormData(services[index]);\n        } else {\n            setEditingIndex(null);\n            setFormData({ name: '', price: '', duration: '30 min' });\n        }\n        setIsModalOpen(true);\n    };\n\n    const handleSave = async () => {\n        if (!user) return;\n        setSaving(true);\n\n        try {\n            const priceValue = typeof formData.price === 'string'\n                ? parseFloat(formData.price.replace(',', '.')) || 0\n                : formData.price;\n\n            const serviceToSave: Service = {\n                name: formData.name,\n                price: priceValue,\n                duration: formData.duration\n            };\n\n            const newServices = [...services];\n            if (editingIndex !== null) {\n                newServices[editingIndex] = serviceToSave;\n            } else {\n                newServices.push(serviceToSave);\n            }\n\n            const docRef = doc(db, 'barbershops', user.uid);\n            await updateDoc(docRef, { services: newServices });\n\n            setServices(newServices);\n            setIsModalOpen(false);\n        } catch (error) {\n            console.error(\"Error saving service:\", error);\n            alert(\"Erro ao salvar serviço.\");\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    const handleDelete = async (index: number) => {\n        if (!user || !confirm('Tem certeza que deseja excluir este serviço?')) return;\n\n        try {\n            const newServices = services.filter((_, i) => i !== index);\n            const docRef = doc(db, 'barbershops', user.uid);\n            await updateDoc(docRef, { services: newServices });\n            setServices(newServices);\n        } catch (error) {\n            console.error(\"Error deleting service:\", error);\n            alert(\"Erro ao excluir serviço.\");\n        }\n    };\n\n    if (loading) return <div className=\"p-8 text-center text-slate-400\">Carregando...</div>;\n\n    return (\n        <div className=\"max-w-4xl mx-auto space-y-8\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h1 className=\"text-2xl font-bold text-slate-100\">Serviços</h1>\n                    <p className=\"text-slate-400\">Gerencie os serviços oferecidos na sua barbearia.</p>\n                </div>\n                <Button onClick={() => handleOpenModal()} className=\"bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-900/20\">\n                    <Plus size={18} className=\"mr-2\" />\n                    Novo Serviço\n                </Button>\n            </div>\n\n            <div className=\"grid gap-4\">\n                {services.length === 0 ? (\n                    <div className=\"text-center py-12 bg-slate-900 rounded-xl border border-slate-800 text-slate-400\">\n                        Nenhum serviço cadastrado.\n                    </div>\n                ) : (\n                    services.map((service, index) => (\n                        <div key={index} className=\"bg-slate-900 p-6 rounded-xl border border-slate-800 flex items-center justify-between hover:border-slate-700 transition-colors shadow-sm\">\n                            <div>\n                                <h3 className=\"font-bold text-lg text-slate-100\">{service.name}</h3>\n                                <div className=\"flex items-center gap-4 text-sm text-slate-400 mt-1\">\n                                    <span className=\"flex items-center gap-1\"><Clock size={14} /> {service.duration}</span>\n                                    <span className=\"flex items-center gap-1\"><DollarSign size={14} /> R$ {service.price.toFixed(2)}</span>\n                                </div>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <Button variant=\"ghost\" size=\"icon\" onClick={() => handleOpenModal(index)} className=\"text-slate-400 hover:text-slate-100 hover:bg-slate-800\">\n                                    <Pencil size={18} />\n                                </Button>\n                                <Button variant=\"ghost\" size=\"icon\" onClick={() => handleDelete(index)} className=\"text-red-400 hover:text-red-300 hover:bg-red-900/20\">\n                                    <Trash2 size={18} />\n                                </Button>\n                            </div>\n                        </div>\n                    ))\n                )}\n            </div>\n\n            {/* Modal */}\n            <AnimatePresence>\n                {isModalOpen && (\n                    <>\n                        <motion.div\n                            initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}\n                            className=\"fixed inset-0 bg-black/80 z-50 backdrop-blur-sm\"\n                            onClick={() => setIsModalOpen(false)}\n                        />\n                        <motion.div\n                            initial={{ opacity: 0, scale: 0.95, y: 20 }} animate={{ opacity: 1, scale: 1, y: 0 }} exit={{ opacity: 0, scale: 0.95, y: 20 }}\n                            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\"\n                        >\n                            <div className=\"bg-slate-900 w-full max-w-md rounded-xl shadow-2xl pointer-events-auto border border-slate-800 overflow-hidden\">\n                                <div className=\"p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900\">\n                                    <h3 className=\"font-bold text-lg text-slate-100\">{editingIndex !== null ? 'Editar Serviço' : 'Novo Serviço'}</h3>\n                                    <Button variant=\"ghost\" size=\"icon\" onClick={() => setIsModalOpen(false)} className=\"text-slate-400 hover:text-slate-100 hover:bg-slate-800\">\n                                        <X size={20} />\n                                    </Button>\n                                </div>\n                                <div className=\"p-6 space-y-4 bg-slate-900\">\n                                    <div>\n                                        <label className=\"block text-sm font-medium text-slate-400 mb-1\">Nome do Serviço</label>\n                                        <input\n                                            type=\"text\"\n                                            value={formData.name}\n                                            onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                            className=\"w-full p-3 rounded-lg bg-slate-950 border border-slate-800 text-slate-100 outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 placeholder:text-slate-600 transition-all\"\n                                            placeholder=\"Ex: Corte de Cabelo\"\n                                        />\n                                    </div>\n                                    <div className=\"grid grid-cols-2 gap-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-slate-400 mb-1\">Preço (R$)</label>\n                                            <input\n                                                type=\"number\"\n                                                value={formData.price}\n                                                onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                                                className=\"w-full p-3 rounded-lg bg-slate-950 border border-slate-800 text-slate-100 outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 transition-all\"\n                                            />\n                                        </div>\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-slate-400 mb-1\">Duração</label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.duration}\n                                                onChange={(e) => setFormData({ ...formData, duration: e.target.value })}\n                                                className=\"w-full p-3 rounded-lg bg-slate-950 border border-slate-800 text-slate-100 outline-none focus:border-blue-600 focus:ring-1 focus:ring-blue-600 placeholder:text-slate-600 transition-all\"\n                                                placeholder=\"Ex: 30 min\"\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"p-4 border-t border-slate-800 flex justify-end gap-2 bg-slate-900\">\n                                    <Button variant=\"ghost\" onClick={() => setIsModalOpen(false)} className=\"text-slate-400 hover:text-slate-200 hover:bg-slate-800\">Cancelar</Button>\n                                    <Button onClick={handleSave} disabled={saving || !formData.name} className=\"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-900/20\">\n                                        {saving ? 'Salvando...' : 'Salvar'}\n                                    </Button>\n                                </div>\n                            </div>\n                        </motion.div>\n                    </>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/settings/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/site/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":24,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'updateContent' is assigned a value but never used.","line":32,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":22},{"ruleId":"prefer-const","severity":2,"message":"'rawData' is never reassigned. Use 'const' instead.","line":49,"column":25,"nodeType":"Identifier","messageId":"useConst","endLine":49,"endColumn":32,"fix":{"range":[2076,2112],"text":"const rawData = docSnap.data() as any;"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":49,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2108,2111],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2108,2111],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":1,"fixableWarningCount":0,"source":"'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/features/auth/context/AuthContext';\nimport { db } from '@/lib/firebase';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { BarbershopData } from '@/types/barbershop';\nimport { Loader2 } from 'lucide-react';\nimport TemplateClassic from '@/features/templates/components/TemplateClassic';\nimport TemplateModern from '@/features/templates/components/TemplateModern';\nimport TemplateUrban from '@/features/templates/components/TemplateUrban';\nimport ReviewsManager from '@/features/reviews/components/ReviewsManager';\nimport { AnimatePresence } from 'framer-motion';\nimport { Toast } from '@/components/ui/Toast';\nimport ConfirmationModal from '@/components/ui/ConfirmationModal';\n\nimport EditorSidebar from '@/features/editor/components/EditorSidebar';\nimport { useEditor } from '@/hooks/useEditor';\nimport { useEditorStore } from '@/store/useEditorStore';\n\nexport default function SiteEditorPage() {\n    const { user } = useAuth();\n    const router = useRouter();\n\n    // Use Global Editor Store\n    const {\n        data,\n        setInitialData,\n        isEditing,\n        updateData,\n        updateContent\n    } = useEditor();\n\n    const [mobileTab, setMobileTab] = useState<'editor' | 'preview'>('editor');\n    const [loading, setLoading] = useState(true);\n    const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null);\n    const [confirmation, setConfirmation] = useState({ isOpen: false, title: '', description: '', action: () => { } });\n    const isReviewsOpen = useEditorStore(state => state.ui?.reviewsModalOpen);\n    const toggleReviewsModal = useEditorStore(state => state.toggleReviewsModal);\n\n    useEffect(() => {\n        const fetchBarbershop = async () => {\n            if (!user) return;\n            try {\n                const docRef = doc(db, 'barbershops', user.uid);\n                const docSnap = await getDoc(docRef);\n                if (docSnap.exists()) {\n                    let rawData = docSnap.data() as any;\n\n                    // Migration/Normalization for legacy data structure\n                    if (!rawData.colors && rawData.content?.colors) {\n                        rawData.colors = rawData.content.colors;\n                    }\n\n                    if (!rawData.contact && rawData.content?.contact) {\n                        rawData.contact = rawData.content.contact;\n                    }\n\n                    if (!rawData.products) {\n                        rawData.products = [];\n                    }\n\n                    // Fix retroactive: default isPublished to false if missing\n                    if (rawData.isPublished === undefined) {\n                        rawData.isPublished = false;\n                    }\n\n                    setInitialData(rawData as BarbershopData);\n                }\n            } catch (error) {\n                console.error(\"Error fetching barbershop:\", error);\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        fetchBarbershop();\n    }, [user, setInitialData]);\n\n    const handleUpdate = (newData: BarbershopData) => {\n        updateData(newData);\n    };\n\n    if (loading) {\n        return <div className=\"flex h-screen items-center justify-center\"><Loader2 className=\"animate-spin text-slate-400\" /></div>;\n    }\n\n    if (!data) {\n        return <div className=\"flex h-screen items-center justify-center text-slate-400\">Barbearia não encontrada.</div>;\n    }\n\n    const renderTemplate = () => {\n        if (!data) return null;\n        const props = {\n            data: data,\n            isEditing: isEditing,\n            onUpdate: handleUpdate\n        };\n\n        switch (data.template_id) {\n            case 'modern': return <TemplateModern {...props} />;\n            case 'urban': return <TemplateUrban {...props} />;\n            case 'classic': default: return <TemplateClassic {...props} />;\n        }\n    };\n\n\n\n    return (\n        <div className=\"flex flex-col lg:flex-row bg-slate-950 min-h-screen\">\n            {/* Mobile Tabs Navigation */}\n            <div className=\"lg:hidden flex border-b border-slate-800 bg-slate-950 sticky top-0 z-50\">\n                <button\n                    onClick={() => setMobileTab('editor')}\n                    className={`flex-1 py-4 text-sm font-bold uppercase tracking-wider transition-colors ${mobileTab === 'editor' ? 'text-blue-500 border-b-2 border-blue-500 bg-slate-900' : 'text-slate-500 hover:text-slate-300'}`}\n                >\n                    Editor\n                </button>\n                <button\n                    onClick={() => setMobileTab('preview')}\n                    className={`flex-1 py-4 text-sm font-bold uppercase tracking-wider transition-colors ${mobileTab === 'preview' ? 'text-blue-500 border-b-2 border-blue-500 bg-slate-900' : 'text-slate-500 hover:text-slate-300'}`}\n                >\n                    Preview\n                </button>\n            </div>\n\n            {/* Editor Sidebar (Left Column) */}\n            <div className={`${mobileTab === 'editor' ? 'block' : 'hidden'} lg:block relative z-40`}>\n                <EditorSidebar />\n            </div>\n\n            {/* Preview Area (Right Column) */}\n            <div className={`flex-1 transition-all duration-300 relative h-[calc(100vh-56px)] lg:h-screen overflow-hidden ${mobileTab === 'preview' ? 'block' : 'hidden'} lg:block`}>\n                <div className=\"h-full overflow-y-auto scrollbar-hide relative w-full bg-slate-900/50\">\n                    {/* Mobile Mockup Handler */}\n                    <div className={`transition-all duration-500 ${mobileTab === 'preview' ? 'scale-[0.85] origin-top mt-4' : 'scale-100'}`}>\n                        <div\n                            className={`min-h-full origin-top transform transition-all shadow-2xl ${data.template_id === 'urban' ? 'font-mono' : data.template_id === 'modern' ? 'font-sans' : 'font-serif'}`}\n                            style={{\n                                '--color-primary': data.colors.primary,\n                                '--color-secondary': data.colors.secondary,\n                                '--color-bg': data.colors.background || '#ffffff',\n                                '--color-text': data.colors.text || '#111827',\n                            } as React.CSSProperties}\n                        >\n                            {renderTemplate()}\n\n                            {/* Global Sections (FAQ & Contact) */}\n                            <div className=\"bg-[var(--color-bg)] text-[var(--color-text)]\">\n                                {/* Global Sections moved inside Templates for better theming/positioning */}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Reviews Manager Modal (Triggered by Sidebar if needed or we move logic there) */}\n            {/* For now, Sidebar doesn't have Review button, let's keep it accessible via temporary button or move to Sidebar */}\n            {/* ... Actually, the previous toolbar had it. I should add Reviews trigger to Sidebar or keep it hidden for now until Plan says so. \n                The sidebar has 'Sections' tab disabled. I'll stick to the plan which focused on visual editing.\n                Reviews are not strictly visual editing but data management.\n            */}\n\n            <ReviewsManager\n                isOpen={!!isReviewsOpen}\n                onClose={() => toggleReviewsModal(false)}\n                reviews={data.reviews || []}\n                onUpdate={(newReviews) => handleUpdate({ ...data, reviews: newReviews })}\n            />\n\n            <AnimatePresence>\n                {toast && (\n                    <Toast\n                        message={toast.message}\n                        type={toast.type}\n                        onClose={() => setToast(null)}\n                    />\n                )}\n            </AnimatePresence>\n\n            <ConfirmationModal\n                isOpen={confirmation.isOpen}\n                title={confirmation.title}\n                description={confirmation.description}\n                onConfirm={confirmation.action}\n                onCancel={() => setConfirmation(prev => ({ ...prev, isOpen: false }))}\n            />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/dashboard/team/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(dashboard)/layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LayoutDashboard' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":4,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Scissors' is defined but never used.","line":4,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Settings' is defined but never used.","line":4,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LogOut' is defined but never used.","line":4,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'X' is defined but never used.","line":4,"column":71,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Globe' is defined but never used.","line":4,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":79},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Megaphone' is defined but never used.","line":4,"column":81,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { usePathname } from 'next/navigation';\nimport { LayoutDashboard, Calendar, Scissors, Settings, LogOut, Menu, X, Globe, Megaphone } from 'lucide-react';\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { cn } from '@/lib/utils';\nimport Sidebar from '@/features/dashboard/components/Sidebar';\nimport { usePermission } from '@/hooks/usePermission';\nimport { SubscriptionProvider } from '@/features/subscription/context/SubscriptionContext';\nimport UpgradeModal from '@/features/subscription/components/UpgradeModal';\nimport { ThemeToggle } from '@/components/ThemeToggle';\n\nexport default function DashboardLayout({ children }: { children: React.ReactNode }) {\n    return (\n        <SubscriptionProvider>\n            <DashboardContent>\n                {children}\n            </DashboardContent>\n            <UpgradeModal />\n        </SubscriptionProvider>\n    );\n}\n\nfunction DashboardContent({ children }: { children: React.ReactNode }) {\n    const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n    const { plan } = usePermission();\n\n    const planLabel = {\n        'FREE': 'Gratuito',\n        'STARTER': 'Starter',\n        'PRO': 'Pro',\n        'BUSINESS': 'Business'\n    }[plan] || plan;\n\n    const pathname = usePathname();\n    const isSiteEditor = pathname === '/dashboard/site';\n\n    return (\n        <div className=\"h-screen bg-slate-950 flex overflow-hidden\">\n            {/* Mobile Sidebar Overlay */}\n            {isSidebarOpen && (\n                <div\n                    className=\"fixed inset-0 bg-black/50 z-40 md:hidden\"\n                    onClick={() => setIsSidebarOpen(false)}\n                />\n            )}\n\n            <Sidebar isOpen={isSidebarOpen} onClose={() => setIsSidebarOpen(false)} hidden={isSiteEditor} />\n\n            {/* Main Content */}\n            <main className=\"flex-1 flex flex-col h-screen overflow-hidden\">\n                {/* Header - Hidden in Editor */}\n                {!isSiteEditor && (\n                    <header className=\"h-16 bg-slate-900 border-b border-slate-800 flex items-center justify-between px-6 md:px-8 flex-shrink-0\">\n                        <button\n                            className=\"md:hidden p-2 -ml-2 text-slate-400\"\n                            onClick={() => setIsSidebarOpen(true)}\n                        >\n                            <Menu size={24} />\n                        </button>\n\n                        <div className=\"flex items-center gap-4 ml-auto\">\n                            <ThemeToggle />\n                            <div className=\"text-right hidden sm:block\">\n                                <div className=\"text-sm font-medium text-white\">Barbearia Modelo</div>\n                                <div className=\"text-xs text-slate-400\">Plano {planLabel}</div>\n                            </div>\n                            <div className=\"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center text-slate-300 font-bold border border-slate-700\">\n                                BM\n                            </div>\n                        </div>\n                    </header>\n                )}\n\n                {/* Page Content */}\n                <div className={`flex-1 overflow-auto ${isSiteEditor ? 'p-0' : 'p-6 md:p-8'}`}>\n                    {children}\n                </div>\n            </main>\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(marketing)/legal/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(marketing)/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'motion' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ArrowRight' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Check' is defined but never used.","line":5,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Scissors' is defined but never used.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Star' is defined but never used.","line":5,"column":39,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":43},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Zap' is defined but never used.","line":5,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Store' is defined but never used.","line":5,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Crown' is defined but never used.","line":5,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":62},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Smartphone' is defined but never used.","line":5,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":74},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRouter' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport Link from 'next/link';\nimport { motion } from 'framer-motion';\nimport { ArrowRight, Check, Scissors, Star, Zap, Store, Crown, Smartphone } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useRouter } from 'next/navigation';\nimport GreetingFeature from '@/components/features/GreetingFeature';\nimport Header from '@/features/marketing/components/Header';\nimport HeroSection from '@/features/marketing/components/HeroSection';\nimport TemplatesSection from '@/features/marketing/components/TemplatesSection';\nimport FeaturesSection from '@/features/marketing/components/FeaturesSection';\nimport PricingSection from '@/features/marketing/components/PricingSection';\nimport FooterSection from '@/features/marketing/components/FooterSection';\n\nexport default function LandingPage() {\n    return (\n        <div className=\"min-h-screen bg-slate-950 text-white font-sans selection:bg-blue-500/30 selection:text-blue-200\">\n            <GreetingFeature />\n            {/* 1. Header */}\n            {/* 1. Header */}\n            {/* 1. Header */}\n            <Header />\n\n            <main className=\"pt-0\">\n                {/* 2. Hero Section */}\n                <HeroSection />\n\n                {/* 3. Features Section (Benefit Cards) */}\n                <FeaturesSection />\n\n                {/* 4. Choose Your Style Section */}\n                <TemplatesSection />\n\n                <PricingSection />\n            </main>\n\n            {/* 4. Footer */}\n            <FooterSection />\n        </div>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx","messages":[{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:56:13\n  54 |\n  55 |         return (\n> 56 |             <div className=\"bg-white min-h-screen relative\">\n     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 57 |                 <PageViewTracker barbershopId={doc.id} />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 58 |                 <GreetingFeature />\n     …\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 70 |                 <CartFloatingButton />\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 71 |             </div>\n     | ^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  72 |         );\n  73 |     } catch (error) {\n  74 |         console.error(\"Error fetching barbershop:\", error);","line":56,"column":13,"nodeType":null,"endLine":71,"endColumn":19},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:57:17\n  55 |         return (\n  56 |             <div className=\"bg-white min-h-screen relative\">\n> 57 |                 <PageViewTracker barbershopId={doc.id} />\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  58 |                 <GreetingFeature />\n  59 |\n  60 |                 <TemplateComponent data={data} />","line":57,"column":17,"nodeType":null,"endLine":57,"endColumn":58},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:58:17\n  56 |             <div className=\"bg-white min-h-screen relative\">\n  57 |                 <PageViewTracker barbershopId={doc.id} />\n> 58 |                 <GreetingFeature />\n     |                 ^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  59 |\n  60 |                 <TemplateComponent data={data} />\n  61 |","line":58,"column":17,"nodeType":null,"endLine":58,"endColumn":36},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:60:17\n  58 |                 <GreetingFeature />\n  59 |\n> 60 |                 <TemplateComponent data={data} />\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  61 |\n  62 |                 {/* Shop / Products Section */}\n  63 |                 <ShopSection barberId={doc.id} theme={templateId} />","line":60,"column":17,"nodeType":null,"endLine":60,"endColumn":50},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:63:17\n  61 |\n  62 |                 {/* Shop / Products Section */}\n> 63 |                 <ShopSection barberId={doc.id} theme={templateId} />\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  64 |\n  65 |                 {data.faq && <FAQSection faq={data.faq} />}\n  66 |                 <ContactSection contact={data.contact} />","line":63,"column":17,"nodeType":null,"endLine":63,"endColumn":69},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:65:30\n  63 |                 <ShopSection barberId={doc.id} theme={templateId} />\n  64 |\n> 65 |                 {data.faq && <FAQSection faq={data.faq} />}\n     |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  66 |                 <ContactSection contact={data.contact} />\n  67 |\n  68 |                 {/* Floating Elements */}","line":65,"column":30,"nodeType":null,"endLine":65,"endColumn":59},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:66:17\n  64 |\n  65 |                 {data.faq && <FAQSection faq={data.faq} />}\n> 66 |                 <ContactSection contact={data.contact} />\n     |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  67 |\n  68 |                 {/* Floating Elements */}\n  69 |                 <CartDrawer />","line":66,"column":17,"nodeType":null,"endLine":66,"endColumn":58},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:69:17\n  67 |\n  68 |                 {/* Floating Elements */}\n> 69 |                 <CartDrawer />\n     |                 ^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  70 |                 <CartFloatingButton />\n  71 |             </div>\n  72 |         );","line":69,"column":17,"nodeType":null,"endLine":69,"endColumn":31},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/(site)/site/[slug]/page.tsx:70:17\n  68 |                 {/* Floating Elements */}\n  69 |                 <CartDrawer />\n> 70 |                 <CartFloatingButton />\n     |                 ^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  71 |             </div>\n  72 |         );\n  73 |     } catch (error) {","line":70,"column":17,"nodeType":null,"endLine":70,"endColumn":39}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs } from 'firebase/firestore';\nimport TemplateClassic from '@/features/templates/components/TemplateClassic';\nimport TemplateModern from '@/features/templates/components/TemplateModern';\nimport TemplateUrban from '@/features/templates/components/TemplateUrban';\nimport { BarbershopData } from '@/types/barbershop';\nimport FAQSection from '@/features/marketing/components/FAQSection';\nimport ContactSection from '@/features/marketing/components/ContactSection';\nimport GreetingFeature from '@/components/features/GreetingFeature';\nimport PageViewTracker from '@/components/features/PageViewTracker';\nimport ShopSection from '@/features/shop/components/ShopSection';\nimport CartDrawer from '@/features/cart/components/CartDrawer';\nimport CartFloatingButton from '@/components/ui/CartFloatingButton';\n\ninterface PageProps {\n    params: Promise<{ slug: string }>;\n}\n\n// Force dynamic rendering to ensure we always fetch the latest data\nexport const dynamic = 'force-dynamic';\n\nexport default async function BarberPage({ params }: PageProps) {\n    const { slug } = await params;\n    console.log('[BarberPage] Rendering for slug:', slug);\n\n    try {\n        const q = query(collection(db, 'barbershops'), where('slug', '==', slug));\n        const querySnapshot = await getDocs(q);\n\n        if (querySnapshot.empty) {\n            notFound();\n        }\n\n        const doc = querySnapshot.docs[0];\n        const data = doc.data() as BarbershopData;\n\n        // Check if site is published (bypass in Dev Mode)\n        const isDev = process.env.NODE_ENV === 'development';\n        if (data.isPublished === false && !isDev) {\n            notFound();\n        }\n\n        // Ensure template_id exists, fallback to classic if missing\n        const templateId = data.template_id || 'classic';\n\n        let TemplateComponent;\n        switch (templateId) {\n            case 'classic': TemplateComponent = TemplateClassic; break;\n            case 'modern': TemplateComponent = TemplateModern; break;\n            case 'urban': TemplateComponent = TemplateUrban; break;\n            default: TemplateComponent = TemplateClassic; break;\n        }\n\n        return (\n            <div className=\"bg-white min-h-screen relative\">\n                <PageViewTracker barbershopId={doc.id} />\n                <GreetingFeature />\n\n                <TemplateComponent data={data} />\n\n                {/* Shop / Products Section */}\n                <ShopSection barberId={doc.id} theme={templateId} />\n\n                {data.faq && <FAQSection faq={data.faq} />}\n                <ContactSection contact={data.contact} />\n\n                {/* Floating Elements */}\n                <CartDrawer />\n                <CartFloatingButton />\n            </div>\n        );\n    } catch (error) {\n        console.error(\"Error fetching barbershop:\", error);\n        notFound();\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/[slug]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarbershopData' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation';\nimport { BarbershopData } from '@/types/barbershop';\nimport TemplateClassic from '@/features/templates/components/TemplateClassic';\nimport TemplateModern from '@/features/templates/components/TemplateModern';\nimport TemplateUrban from '@/features/templates/components/TemplateUrban';\nimport { getBarbershopBySlug } from '@/features/barbershops/services/serverBarbershopService';\n\nexport default async function PublicBarberPage({ params }: { params: Promise<{ slug: string }> }) {\n    const { slug } = await params;\n    console.log('Buscando slug:', slug);\n\n    const data = await getBarbershopBySlug(slug);\n\n    if (!data) {\n        console.log('Nenhuma barbearia encontrada para o slug:', slug);\n        notFound();\n    }\n\n    // Logic for \"Dev Mode\" (Bypass)\n    const isDev = process.env.NODE_ENV === 'development';\n\n    if (!isDev && !data.isPublished) {\n        console.log('Barbearia nao publicada (producao):', slug);\n        notFound();\n    }\n\n    // Render the Template\n    // Check template_id and render the corresponding component\n    switch (data.template_id) {\n        case 'urban':\n            return <TemplateUrban data={data} />;\n        case 'classic':\n            return <TemplateClassic data={data} />;\n        case 'modern':\n            return <TemplateModern data={data} />;\n        default:\n            // Fallback if template_id is missing or unknown\n            console.warn(`Template desconhecido: ${data.template_id}, usando fallback (Modern).`);\n            return <TemplateModern data={data} />;\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/actions/barbershop.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BarbershopSchema' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { dbAdmin } from '@/lib/firebase-admin';\nimport { BarbershopSchema } from '@/lib/validators/barbershop';\nimport { BarbershopData } from '@/types/barbershop';\nimport { revalidatePath } from 'next/cache';\n\n// COLLECTION REFERENCES\nconst BARBERSHOPS_COLLECTION = 'barbershops';\n\n/**\n * Fetch a barbershop by its unique slug.\n * This is used for the public landing page.\n */\nexport async function getBarbershopBySlug(slug: string): Promise<BarbershopData | null> {\n    try {\n        const snapshot = await dbAdmin.collection(BARBERSHOPS_COLLECTION)\n            .where('slug', '==', slug)\n            .limit(1)\n            .get();\n\n        if (snapshot.empty) {\n            return null;\n        }\n\n        const doc = snapshot.docs[0];\n        const data = doc.data();\n\n        // Transform Firestore data to match BarbershopData interface\n        // (Firestore timestamps might need conversion if we strictly defined Dates in interface, \n        // but current BarbershopData mocks don't seem to enforce Dates yet - relying on JSON serializable types)\n\n        return {\n            id: doc.id,\n            ...data\n        } as BarbershopData;\n    } catch (error) {\n        console.error(\"Error fetching barbershop by slug:\", error);\n        return null;\n    }\n}\n\n/**\n * Fetch a barbershop by its Owner UID.\n * Used for the Dashboard initialization.\n */\nexport async function getBarbershopByOwner(uid: string): Promise<BarbershopData | null> {\n    try {\n        const snapshot = await dbAdmin.collection(BARBERSHOPS_COLLECTION)\n            .where('uid', '==', uid)\n            .limit(1)\n            .get();\n\n        if (snapshot.empty) {\n            return null;\n        }\n\n        const doc = snapshot.docs[0];\n        return { id: doc.id, ...doc.data() } as BarbershopData;\n    } catch (error) {\n        console.error(\"Error fetching barbershop by owner:\", error);\n        return null;\n    }\n}\n\n/**\n * Update Barbershop Configuration.\n * Typically used within the dashboard.\n */\nexport async function updateBarbershopConfig(barbershopId: string, data: Partial<BarbershopData>) {\n    // 1. Validate 'data' partially using Zod? \n    // Since it's partial, pure Zod validation might be tricky unless we use partial().\n    // Let's validate key fields if present.\n\n    try {\n        // Optimistic validation: parse what we can\n        // const validation = BarbershopSchema.partial().safeParse(data);\n        // if (!validation.success) {\n        //    throw new Error(\"Validation Failed\");\n        // }\n\n        // 2. Perform Update\n        await dbAdmin.collection(BARBERSHOPS_COLLECTION).doc(barbershopId).update({\n            ...data,\n            updatedAt: new Date().toISOString()\n        });\n\n        // 3. Revalidate Paths\n        // If we updated the slug or content, the public page needs revalidation\n        if (data.slug) {\n            revalidatePath(`/${data.slug}`); // Or dynamic route\n        }\n\n        return { success: true };\n    } catch (error) {\n        console.error(\"Error updating barbershop:\", error);\n        return { success: false, error: \"Failed to update configuration\" };\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/actions/promotions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'authAdmin' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'headers' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getCurrentUserUid' is defined but never used.","line":13,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\n\nimport { dbAdmin } from '@/lib/firebase-admin';\nimport { Promotion, CreatePromotionSchema, CreatePromotionInput } from '@/features/promotions/types';\nimport { getBarbershopByOwner } from '@/app/actions/barbershop';\nimport { revalidatePath } from 'next/cache';\nimport { authAdmin } from '@/lib/firebase-admin';\nimport { headers } from 'next/headers';\n\nconst PROMOTIONS_COLLECTION = 'promotions';\n\n// Helper to get current user ID securely on server\nasync function getCurrentUserUid() {\n    // In a real app using Firebase Auth + Next.js Middleware, \n    // we would parse the session cookie here.\n    // For this context, we assume the client sends an Authorization header OR a session cookie.\n    // However, existing actions just take data. Authenticating strictly on server actions \n    // requires a session cookie approach. \n    // Given the \"mvp/prototype\" nature and existing `getBarbershopByOwner` usage in context,\n    // we might need to trust the caller OR implementation of session cookies later.\n    // BUT, the prompt asks for \"Logic: If plan === 'STARTER', block...\".\n    // I will fetch the barbershop by the owner UID (which implies we need the UID).\n    // Let's assume we pass the UID or use a placeholder if auth isn't fully robust yet.\n    // Ideally, we verify the token.\n\n    // For now, I will accept `uid` as an argument or extract from a mock header/cookie if available.\n    // Wait, `getBarbershopByOwner(uid)` exists. \n    // I will require the `uid` to be passed to `createPromotion`.\n    return null;\n}\n\nexport async function createPromotion(uid: string, data: CreatePromotionInput) {\n    try {\n        // 1. Validate Input\n        const validated = CreatePromotionSchema.parse(data);\n\n        // 2. Fetch Barbershop & Check Plan\n        const barbershop = await getBarbershopByOwner(uid);\n        if (!barbershop) {\n            return { success: false, error: 'Barbershop not found' };\n        }\n\n        const plan = barbershop.subscription?.plan || 'basic'; // defaults\n\n        // Map 'basic', 'pro', etc from DB to Plans.\n        // DB uses 'basic' | 'pro' | 'premium' (lowercase).\n        // Config uses 'FREE' | 'STARTER' | 'PRO' | 'BUSINESS'.\n        // Mapping: basic -> STARTER, pro -> PRO, premium -> BUSINESS?\n        // Or plan might be exactly matching. \n        // Let's assume strict check:\n        // Logic: \"If plan === 'STARTER', block\". \n        // Only PRO or EMPIRE (BUSINESS) allowed.\n\n        const ALLOWED_PLANS = ['pro', 'premium', 'business', 'empire'];\n        // Checking against lowercase values in DB.\n\n        if (!ALLOWED_PLANS.includes(plan.toLowerCase())) {\n            return { success: false, error: 'Upgrade to PRO to unlock Promotions' };\n        }\n\n        // 3. Create Promotion\n        const ref = dbAdmin.collection(PROMOTIONS_COLLECTION).doc();\n        const promotion: Promotion = {\n            id: ref.id,\n            barbershop_id: barbershop.id,\n            ...validated,\n            createdAt: new Date().toISOString()\n        };\n\n        await ref.set(promotion);\n        revalidatePath('/dashboard/promotions');\n\n        return { success: true, promotion };\n    } catch (error) {\n        console.error(\"Error creating promotion:\", error);\n        return { success: false, error: 'Failed to create promotion' };\n    }\n}\n\nexport async function getPromotions(barbershopId: string) {\n    try {\n        const snapshot = await dbAdmin.collection(PROMOTIONS_COLLECTION)\n            .where('barbershop_id', '==', barbershopId)\n            .get();\n\n        const promotions = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Promotion));\n        return { success: true, promotions };\n    } catch (error) {\n        console.error(\"Error fetching promotions:\", error);\n        return { success: false, error: 'Failed to fetch promotions' };\n    }\n}\n\nexport async function togglePromotion(promotionId: string, active: boolean) {\n    try {\n        await dbAdmin.collection(PROMOTIONS_COLLECTION).doc(promotionId).update({ active });\n        revalidatePath('/dashboard/promotions');\n        return { success: true };\n    } catch (error) {\n        console.error(\"Error toggling promotion:\", error);\n        return { success: false, error: 'Failed to update promotion' };\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/availability/route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'barbershopRef' is assigned a value but never used.","line":19,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport { db } from '@/lib/firebase';\nimport { collection, query, where, getDocs, Timestamp } from 'firebase/firestore';\nimport { getSlots, isOverlapping } from '@/lib/date-utils';\nimport { startOfDay, endOfDay, parseISO, format } from 'date-fns';\n\nexport async function GET(request: Request) {\n    const { searchParams } = new URL(request.url);\n    const dateParam = searchParams.get('date');\n    const barbershopId = searchParams.get('barbershopId');\n    const serviceDurationParam = searchParams.get('serviceDuration');\n\n    if (!dateParam || !barbershopId || !serviceDurationParam) {\n        return NextResponse.json({ error: 'Missing required parameters: date, barbershopId, serviceDuration' }, { status: 400 });\n    }\n\n    try {\n        // 1. Fetch Barbershop Settings\n        const barbershopRef = collection(db, 'barbershops');\n        // Since we store by ID (user.uid), we can try to get the doc directly if we knew the collection structure perfectly.\n        // But the query above used 'barbershopId' field in appointments.\n        // Let's assume the barbershopId param IS the document ID in 'barbershops' collection.\n\n        // Fetch the barbershop document to get availability settings\n        const { doc, getDoc } = await import('firebase/firestore');\n        const barbershopDocRef = doc(db, 'barbershops', barbershopId);\n        const barbershopSnap = await getDoc(barbershopDocRef);\n\n        let openingHours = { start: '09:00', end: '18:00' };\n        let workingDays = [1, 2, 3, 4, 5, 6]; // Default Mon-Sat\n\n        if (barbershopSnap.exists()) {\n            const data = barbershopSnap.data();\n            if (data.content?.availability) {\n                openingHours = data.content.availability.hours;\n                workingDays = data.content.availability.days;\n            }\n        }\n\n        // 2. Parse Date and Define Range\n        const selectedDate = parseISO(dateParam);\n        const dayOfWeek = selectedDate.getDay(); // 0=Sun, 1=Mon...\n\n        // Check if open on this day\n        if (!workingDays.includes(dayOfWeek)) {\n            return NextResponse.json({\n                slots: [],\n                meta: {\n                    date: dateParam,\n                    totalSlots: 0,\n                    available: 0,\n                    message: \"Closed on this day\"\n                }\n            });\n        }\n\n        const start = startOfDay(selectedDate);\n        const end = endOfDay(selectedDate);\n\n        // 3. Fetch Existing Appointments\n        const appointmentsRef = collection(db, 'appointments');\n        const q = query(\n            appointmentsRef,\n            where('barbershopId', '==', barbershopId),\n            where('date', '>=', Timestamp.fromDate(start)),\n            where('date', '<=', Timestamp.fromDate(end))\n        );\n\n        const querySnapshot = await getDocs(q);\n        const appointments = querySnapshot.docs.map(doc => {\n            const data = doc.data();\n            // Handle cancelled appointments - don't block slots\n            if (data.status === 'cancelled') return null;\n\n            return {\n                time: format(data.date.toDate(), 'HH:mm'), // Extract time from Firestore Timestamp\n                service: {\n                    duration: '30 min' // Default or fetch if stored\n                }\n            };\n        }).filter(Boolean) as { time: string; service: { duration: string } }[];\n\n        // 4. Generate All Possible Slots based on dynamic hours\n        const allSlots = getSlots(openingHours.start, openingHours.end, 30);\n\n        // 5. Filter for Availability\n        const requestedDuration = parseInt(serviceDurationParam) || 30;\n\n        const availableSlots = allSlots.filter(slot =>\n            !isOverlapping(slot, requestedDuration, appointments)\n        );\n\n        return NextResponse.json({\n            slots: availableSlots,\n            meta: {\n                date: dateParam,\n                totalSlots: allSlots.length,\n                available: availableSlots.length\n            }\n        });\n\n    } catch (error) {\n        console.error('[API] Error calculating availability:', error);\n        return NextResponse.json({ error: 'Internal Server Error' }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/billing/portal/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":37,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1549,1552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1549,1552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\nimport { createPortalSession } from '@/features/subscription/services/stripeService';\nimport { authAdmin, dbAdmin } from '@/lib/firebase-admin';\n\nexport async function POST(req: NextRequest) {\n    try {\n        // 1. Authenticate User\n        const authHeader = req.headers.get('Authorization');\n        if (!authHeader?.startsWith('Bearer ')) {\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n        }\n        const idToken = authHeader.split('Bearer ')[1];\n        const decodedToken = await authAdmin.verifyIdToken(idToken);\n        const userId = decodedToken.uid;\n\n        // 2. Get User's Stripe Customer ID from Firestore\n        const userDoc = await dbAdmin.collection('users').doc(userId).get();\n        if (!userDoc.exists) {\n            return NextResponse.json({ error: 'User not found' }, { status: 404 });\n        }\n\n        const userData = userDoc.data();\n        const stripeCustomerId = userData?.stripeCustomerId;\n\n        if (!stripeCustomerId) {\n            return NextResponse.json({ error: 'No billing account found' }, { status: 400 });\n        }\n\n        // 3. Create Portal Session\n        const origin = req.headers.get('origin') || process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n        const returnUrl = `${origin}/dashboard/billing`; // Redirect back to billing page\n\n        const { url } = await createPortalSession(stripeCustomerId, returnUrl);\n\n        return NextResponse.json({ url });\n\n    } catch (error: any) {\n        console.error('Portal API Error:', error);\n        return NextResponse.json({ error: error.message || 'Internal Server Error' }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/booking/create/route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/booking/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":75,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3104,3107],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3104,3107],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport { db } from '@/lib/firebase';\nimport { collection, addDoc, serverTimestamp, query, where, Timestamp } from 'firebase/firestore';\nimport { sendNotification } from '@/lib/notifications';\nimport { addMinutes, startOfDay, endOfDay } from 'date-fns';\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n        const { barbershopId, serviceId, serviceName, price, date, duration = 30, customerName, customerPhone, barberId, barberName } = body;\n\n        // Basic validation\n        if (!barbershopId || !serviceId || !date || !customerName || !customerPhone || !barberId || !barberName) {\n            return NextResponse.json({ message: 'Missing required fields' }, { status: 400 });\n        }\n\n        const appointmentStart = new Date(date);\n        const appointmentEnd = addMinutes(appointmentStart, duration);\n\n        // Check for overlaps (Check-then-Act pattern)\n        const appointmentsRef = collection(db, 'appointments');\n        const q = query(\n            appointmentsRef,\n            where('barbershopId', '==', barbershopId),\n            where('date', '>=', Timestamp.fromDate(startOfDay(appointmentStart))),\n            where('date', '<=', Timestamp.fromDate(endOfDay(appointmentStart)))\n        );\n\n        const existingDocs = await import('firebase/firestore').then(mod => mod.getDocs(q));\n\n        const isOverlapping = existingDocs.docs.some(doc => {\n            const data = doc.data();\n            if (data.status === 'cancelled') return false;\n\n            const existingStart = data.date.toDate();\n            // Fallback to 30 min if duration not stored\n            const existingDuration = data.duration || 30;\n            const existingEnd = addMinutes(existingStart, existingDuration);\n\n            return (appointmentStart < existingEnd && appointmentEnd > existingStart);\n        });\n\n        if (isOverlapping) {\n            return NextResponse.json({ message: 'Horário indisponível. Por favor escolha outro.' }, { status: 409 });\n        }\n\n        // Create\n        const appointmentData = {\n            barbershopId,\n            serviceId,\n            serviceName,\n            price,\n            date: Timestamp.fromDate(appointmentStart), // Ensure simplified Timestamp format\n            customerName,\n            customerPhone,\n            status: 'pending',\n            createdAt: serverTimestamp(),\n            duration, // Store duration for future checks\n            barberId,\n            barberName,\n            products: body.products || [] // Save products array\n        };\n\n        const docRef = await addDoc(collection(db, 'appointments'), appointmentData);\n\n        // Send Notification\n        sendNotification('confirmation', {\n            serviceName,\n            date: appointmentStart,\n            customerName,\n            customerPhone,\n        }).catch(err => console.error('Failed to send notification:', err));\n\n        return NextResponse.json({ id: docRef.id, message: 'Appointment created successfully' }, { status: 201 });\n    } catch (error: any) {\n        console.error('Error creating appointment:', error);\n        return NextResponse.json({ message: 'Internal Server Error', error: error.message }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/checkout/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":36,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\nimport { createCheckoutSession } from '@/features/subscription/services/stripeService';\nimport { authAdmin } from '@/lib/firebase-admin'; // Using admin auth to verify token if sent\n// OR utilize standard Next.js session management if available.\n// Since we are in App Router, we often use a cookie or a token passed in headers.\n// However, 'src/lib/firebase-admin.ts' suggests we have admin capabilities.\n// For client-called API, we should check the ID token.\n\nexport async function POST(req: NextRequest) {\n    try {\n        // 1. Authenticate User\n        const authHeader = req.headers.get('Authorization');\n        if (!authHeader?.startsWith('Bearer ')) {\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\n        }\n        const idToken = authHeader.split('Bearer ')[1];\n        const decodedToken = await authAdmin.verifyIdToken(idToken);\n        const userId = decodedToken.uid;\n        const userEmail = decodedToken.email;\n\n        // 2. Parse Body\n        const { priceId } = await req.json();\n        if (!priceId) {\n            return NextResponse.json({ error: 'Price ID is required' }, { status: 400 });\n        }\n\n        // 3. Create Checkout Session\n        // Use the origin from the request or a configured base URL\n        const origin = req.headers.get('origin') || process.env.NEXT_PUBLIC_APP_URL || 'http://localhost:3000';\n        const returnUrl = `${origin}/dashboard/billing`; // or wherever you want them to land\n\n        const { url } = await createCheckoutSession(priceId, userId, userEmail, returnUrl);\n\n        return NextResponse.json({ url });\n\n    } catch (error: any) {\n        console.error('Checkout API Error:', error);\n        return NextResponse.json({ error: error.message || 'Internal Server Error' }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/confirm-payment/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[753,756],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[753,756],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\nimport { PaymentService } from '@/features/payments/services/paymentService';\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n        const { sessionId } = body;\n\n        if (!sessionId) {\n            return NextResponse.json(\n                { message: 'Session ID is required' },\n                { status: 400 }\n            );\n        }\n\n        // Delegate complex business logic and verification to the service layer.\n        // This keeps the controller (route) clean and focused on HTTP concerns.\n        const result = await PaymentService.verifyPaymentAndCreateBarbershop(sessionId);\n\n        return NextResponse.json(result);\n\n    } catch (error: any) {\n        console.error('Payment Confirmation Error:', error);\n\n        // Distinguish between client errors (bad request) vs server errors if possible,\n        // or keep it simple for security (don't leak too much info).\n        // If the error message is known/safe, return it, otherwise generic 500.\n        const isClientError = error.message.includes(\"required\") || error.message.includes(\"Payment not completed\") || error.message.includes(\"Missing\");\n\n        return NextResponse.json(\n            { message: error.message || 'Internal Server Error' },\n            { status: isClientError ? 400 : 500 }\n        );\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/shop/checkout/route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'barberId' is assigned a value but never used.","line":6,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'slug' is assigned a value but never used.","line":6,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":38},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":21,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\n\nexport async function POST(req: NextRequest) {\n    try {\n        const body = await req.json();\n        const { items, barberId, slug } = body;\n\n        // Validation\n        if (!items || items.length === 0) {\n            return NextResponse.json({ error: 'Cart is empty' }, { status: 400 });\n        }\n\n        // Mock Stripe Session Creation for Product Sales\n        // In real life, retrieve Stripe Connect account for 'barberId' and create session\n\n        // Mock Success URL\n        const origin = req.headers.get('origin') || 'http://localhost:3000';\n        const successUrl = `${origin}/success?session_id=mock_session_123`;\n\n        return NextResponse.json({ url: successUrl });\n    } catch (error) {\n        return NextResponse.json({ error: 'Internal Error' }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/api/webhooks/stripe/route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[604,607],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[604,607],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[942,945],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[942,945],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1335,1338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1335,1338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1957,1960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1957,1960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":61,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":61,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2692,2695],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2692,2695],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3613,3616],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3613,3616],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextRequest, NextResponse } from 'next/server';\nimport { constructWebhookEvent } from '@/features/subscription/services/stripeService';\nimport { updateUserSubscription, setStripeCustomerId, getPlanFromPriceId } from '@/features/subscription/services/subscriptionService';\nimport { SubscriptionStatus } from '@/features/subscription/types';\n\nexport async function POST(req: NextRequest) {\n    const body = await req.text();\n    const signature = req.headers.get('stripe-signature') || '';\n\n    let event;\n\n    try {\n        event = await constructWebhookEvent(body, signature);\n    } catch (err: any) {\n        console.error(`Webhook signature verification failed.`, err.message);\n        return NextResponse.json({ error: 'Webhook signature verification failed.' }, { status: 400 });\n    }\n\n    try {\n        switch (event.type) {\n            case 'checkout.session.completed': {\n                const session = event.data.object as any;\n                const userId = session.metadata?.userId;\n                const customerId = session.customer;\n\n                if (userId && customerId) {\n                    await setStripeCustomerId(userId, customerId as string);\n                }\n                break;\n            }\n            case 'invoice.payment_succeeded': {\n                const invoice = event.data.object as any;\n                const customerId = invoice.customer as string;\n                const subscriptionId = invoice.subscription as string;\n\n                if (subscriptionId) {\n                    // Fetch latest subscription status to be sure\n                    const { stripe } = await import('@/lib/stripe');\n                    const subscription = await stripe.subscriptions.retrieve(subscriptionId);\n\n                    const status = subscription.status as SubscriptionStatus;\n                    const priceId = subscription.items.data[0].price.id;\n                    const currentPeriodEnd = (subscription as any).current_period_end;\n                    const userId = subscription.metadata?.userId;\n\n                    const plan = getPlanFromPriceId(priceId);\n\n                    await updateUserSubscription(customerId, {\n                        plan,\n                        status,\n                        currentPeriodEnd,\n                        stripeSubscriptionId: subscriptionId,\n                        stripeCustomerId: customerId,\n                    }, userId);\n                }\n                break;\n            }\n            case 'customer.subscription.created':\n            case 'customer.subscription.updated':\n            case 'customer.subscription.deleted': {\n                const subscription = event.data.object as any;\n                const status = subscription.status as SubscriptionStatus;\n                const priceId = subscription.items.data[0].price.id;\n                const currentPeriodEnd = subscription.current_period_end;\n                const customerId = subscription.customer as string;\n                const userId = subscription.metadata?.userId;\n\n                // Map price ID to PlanTier\n                const plan = getPlanFromPriceId(priceId);\n\n                await updateUserSubscription(customerId, {\n                    plan,\n                    status,\n                    currentPeriodEnd,\n                    stripeSubscriptionId: subscription.id,\n                    stripeCustomerId: customerId,\n                }, userId);\n                break;\n            }\n            default:\n            // Unhandled event type\n        }\n\n        return NextResponse.json({ received: true });\n    } catch (err: any) {\n        console.error(`Error handling webhook event: ${err.message}`);\n        return NextResponse.json({ error: 'Webhook handler failed' }, { status: 500 });\n    }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/demo-products/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/demo/[templateId]/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":53,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":53,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1918,1921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1918,1921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { notFound } from 'next/navigation';\nimport DemoWrapper from '@/features/demo/components/DemoWrapper';\nimport { BarbershopData } from '@/types/barbershop';\n\n// Mock data for pure template demos (generic content)\nconst DEMO_DATA: BarbershopData = {\n    id: 'demo',\n    uid: 'demo-uid',\n    slug: 'demo',\n    template_id: 'classic', // will be overridden\n    isPublished: true,\n    products: [],\n    name: 'Barbearia Modelo',\n    colors: {\n        primary: '#d4af37', // Gold for Classic\n        secondary: '#000000',\n        background: '#0a0a0a',\n        text: '#d4af37'\n    },\n    contact: {\n        phone: '(11) 99999-9999',\n        address: 'Rua Exemplo, 123 - Centro',\n        whatsapp: '5511999999999'\n    },\n    content: {\n        description: 'Experimente a qualidade e o estilo que você merece.',\n        hero_image: 'https://images.unsplash.com/photo-1585747860715-2ba37e788b70?q=80&w=2074&auto=format&fit=crop',\n    },\n    services: [\n        { name: 'Corte de Cabelo', price: 50, duration: '45 min' },\n        { name: 'Barba Completa', price: 35, duration: '30 min' },\n        { name: 'Combo (Cabelo + Barba)', price: 75, duration: '1h 15min' },\n    ],\n    gallery: [\n        'https://images.unsplash.com/photo-1503951914875-452162b7f304?q=80&w=2070&auto=format&fit=crop',\n        'https://images.unsplash.com/photo-1599351431202-1e0f0137899a?q=80&w=1976&auto=format&fit=crop',\n        'https://images.unsplash.com/photo-1621605815971-fbc98d665033?q=80&w=2070&auto=format&fit=crop',\n    ]\n};\n\nexport function generateStaticParams() {\n    return [\n        { templateId: 'classic' },\n        { templateId: 'modern' },\n        { templateId: 'urban' },\n    ];\n}\n\nexport default async function DemoPage({ params }: { params: Promise<{ templateId: string }> }) {\n    const { templateId } = await params;\n\n    // Override template_id in mock data\n    const data = { ...DEMO_DATA, template_id: templateId as any };\n\n    // Adjust colors/images based on template\n    if (templateId === 'modern') {\n        data.colors = {\n            primary: '#111827',\n            secondary: '#38bdf8',\n            background: '#ffffff',\n            text: '#111827'\n        };\n        data.content.hero_image = 'https://images.unsplash.com/photo-1621605815971-fbc98d665033?q=80&w=2070&auto=format&fit=crop';\n    } else if (templateId === 'urban') {\n        data.colors = {\n            primary: '#ef4444',\n            secondary: '#00F0FF',\n            background: '#050505',\n            text: '#ffffff'\n        };\n        data.content.hero_image = 'https://images.unsplash.com/photo-1593702295094-380734e4a82a?q=80&w=2065&auto=format&fit=crop';\n    }\n\n    if (!['classic', 'modern', 'urban'].includes(templateId)) {\n        return notFound();\n    }\n\n    return (\n        <DemoWrapper initialData={data} templateId={templateId} />\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/demo/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/success/page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":10,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":17},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\n/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/success/page.tsx:19:13\n  17 |     useEffect(() => {\n  18 |         if (!sessionId) {\n> 19 |             setStatus('error');\n     |             ^^^^^^^^^ Avoid calling setState() directly within an effect\n  20 |             setMessage('Sessão inválida.');\n  21 |             return;\n  22 |         }","line":19,"column":13,"nodeType":null,"endLine":19,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":42,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":42,"endColumn":27}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport { Suspense, useEffect, useState } from 'react';\nimport { useSearchParams, useRouter } from 'next/navigation';\nimport { CheckCircle, Loader2, PartyPopper } from 'lucide-react';\nimport Link from 'next/link';\n\nfunction SuccessContent() {\n    const searchParams = useSearchParams();\n    const router = useRouter();\n    const sessionId = searchParams.get('session_id');\n\n    const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\n    const [slug, setSlug] = useState('');\n    const [message, setMessage] = useState('Verificando pagamento...');\n\n    useEffect(() => {\n        if (!sessionId) {\n            setStatus('error');\n            setMessage('Sessão inválida.');\n            return;\n        }\n\n        const verifyPayment = async () => {\n            try {\n                const response = await fetch('/api/confirm-payment', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ sessionId }),\n                });\n\n                const data = await response.json();\n\n                if (response.ok) {\n                    setStatus('success');\n                    setSlug(data.slug);\n                    setMessage('Pagamento confirmado! Sua barbearia foi criada.');\n                } else {\n                    setStatus('error');\n                    setMessage(data.message || 'Erro ao confirmar pagamento.');\n                }\n            } catch (error) {\n                setStatus('error');\n                setMessage('Erro de conexão.');\n            }\n        };\n\n        verifyPayment();\n    }, [sessionId]);\n\n    return (\n        <div className=\"min-h-screen bg-gray-50 flex items-center justify-center p-4\">\n            <div className=\"bg-white p-8 rounded-2xl shadow-xl max-w-md w-full text-center space-y-6\">\n\n                {status === 'loading' && (\n                    <div className=\"flex flex-col items-center gap-4 py-8\">\n                        <Loader2 className=\"animate-spin text-blue-600\" size={48} />\n                        <h2 className=\"text-xl font-bold text-gray-800\">{message}</h2>\n                        <p className=\"text-gray-500\">Estamos construindo seu site...</p>\n                    </div>\n                )}\n\n                {status === 'success' && (\n                    <div className=\"flex flex-col items-center gap-4 py-8 animate-in zoom-in duration-500\">\n                        <div className=\"bg-green-100 p-4 rounded-full text-green-600 mb-2\">\n                            <PartyPopper size={48} />\n                        </div>\n                        <h2 className=\"text-2xl font-bold text-gray-900\">Sucesso!</h2>\n                        <p className=\"text-gray-600\">{message}</p>\n\n                        <div className=\"w-full bg-gray-100 rounded-lg p-4 mt-4\">\n                            <p className=\"text-sm text-gray-500 mb-1\">Seu site está no ar:</p>\n                            <p className=\"font-bold text-blue-600 text-lg\">seusaas.com/{slug}</p>\n                        </div>\n\n                        <Link\n                            href={`/${slug}`}\n                            className=\"w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-colors mt-4 block\"\n                        >\n                            Acessar meu Site\n                        </Link>\n                    </div>\n                )}\n\n                {status === 'error' && (\n                    <div className=\"flex flex-col items-center gap-4 py-8\">\n                        <div className=\"bg-red-100 p-4 rounded-full text-red-600 mb-2\">\n                            <CheckCircle size={48} className=\"rotate-45\" /> {/* Using CheckCircle as X */}\n                        </div>\n                        <h2 className=\"text-xl font-bold text-gray-900\">Ops!</h2>\n                        <p className=\"text-red-600\">{message}</p>\n                        <Link\n                            href=\"/wizard\"\n                            className=\"text-gray-500 hover:text-gray-800 underline mt-4\"\n                        >\n                            Voltar para o Wizard\n                        </Link>\n                    </div>\n                )}\n\n            </div>\n        </div>\n    );\n}\n\nexport default function SuccessPage() {\n    return (\n        <Suspense fallback={<div className=\"min-h-screen flex items-center justify-center\"><Loader2 className=\"animate-spin text-blue-600\" /></div>}>\n            <SuccessContent />\n        </Suspense>\n    );\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/wizard/layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/joaovitormartinspetraglia/Downloads/Pages/Barbearia/src/app/wizard/page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]